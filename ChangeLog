leeh        2002/06/05 07:43:55 EDT	(20020605_5)

  Modified files:
    include              handler.h tcm.h 
    src                  main.c parse.c serv_commands.c services.c 
  Log:
  - made the serv_handler take a source_p
  - split join/kick/nick/wallops out into serv_commands.c
  
  Revision  Changes    Path
  1.3       +3 -1      tcm-hybrid/include/handler.h
  1.52      +1 -0      tcm-hybrid/include/tcm.h
  1.109     +1 -0      tcm-hybrid/src/main.c
  1.58      +7 -114    tcm-hybrid/src/parse.c
  1.2       +66 -8     tcm-hybrid/src/serv_commands.c
  1.14      +3 -3      tcm-hybrid/src/services.c



db          2002/06/04 21:10:45 EDT	(20020605_4)

  Modified files:
    src                  parse.c 
  Log:
  - function is clearer than argv[1] at this point...
  
  Revision  Changes    Path
  1.57      +8 -8      tcm-hybrid/src/parse.c



db          2002/06/04 21:01:02 EDT	(20020605_3)

  Modified files:
    include              dcc.h 
    src                  dcc.c parse.c 
  Log:
  - change initiate_dcc_chat interface to use struct source_client *
  
  Revision  Changes    Path
  1.7       +3 -3      tcm-hybrid/include/dcc.h
  1.9       +10 -10    tcm-hybrid/src/dcc.c
  1.56      +1 -1      tcm-hybrid/src/parse.c



db          2002/06/04 20:21:44 EDT	(20020605_2)

  Modified files:
    include              dcc.h 
    src                  dcc.c parse.c 
  Log:
  - changed interface for accept_dcc_connection to have port passed in
    as an int.
  
  Revision  Changes    Path
  1.6       +1 -1      tcm-hybrid/include/dcc.h
  1.8       +2 -15     tcm-hybrid/src/dcc.c
  1.55      +16 -1     tcm-hybrid/src/parse.c



leeh        2002/06/04 20:10:58 EDT	(20020605_1)

  Modified files:
    include              dcc.h parse.h tcm_io.h 
    src                  dcc.c parse.c tcm_io.c 
  Log:
  - introduced a source_p, rewrote parse_server.
    argv[0] is now always the source
    argv[1] is now always the command.
  
  Revision  Changes    Path
  1.5       +2 -2      tcm-hybrid/include/dcc.h
  1.20      +7 -0      tcm-hybrid/include/parse.h
  1.37      +1 -1      tcm-hybrid/include/tcm_io.h
  1.7       +9 -14     tcm-hybrid/src/dcc.c
  1.54      +60 -66    tcm-hybrid/src/parse.c
  1.86      +2 -2      tcm-hybrid/src/tcm_io.c



db          2002/06/04 19:49:48 EDT	(20020605_0)

  Modified files:
    include              dcc.h 
    src                  dcc.c parse.c 
  Log:
  - cleaned up more bogus unnecessary complexity in parse.c
    removed a function in dcc.c
  
  Revision  Changes    Path
  1.4       +2 -2      tcm-hybrid/include/dcc.h
  1.6       +24 -69    tcm-hybrid/src/dcc.c
  1.53      +1 -8      tcm-hybrid/src/parse.c



db          2002/06/04 17:30:15 EDT	(20020604_6)

  Modified files:
    include              bothunt.h 
    src                  parse.c 
  Log:
  - hard coded constants (18) rule
  - got rid of an extern doingtrace in bothunt.h
  - got rid of report_bot_kline() no longer used
  
  Revision  Changes    Path
  1.47      +1 -7      tcm-hybrid/include/bothunt.h
  1.52      +8 -4      tcm-hybrid/src/parse.c



leeh        2002/06/04 17:21:45 EDT	(20020604_5)

  Modified files:
    include              handler.h 
    src                  handler.c services.c 
  Log:
  - ripped multi func handlers (part 1)
  
  Revision  Changes    Path
  1.2       +1 -2      tcm-hybrid/include/handler.h
  1.5       +12 -72    tcm-hybrid/src/handler.c
  1.13      +3 -1      tcm-hybrid/src/services.c



wcampbel    2002/06/04 09:24:33 EDT	(20020604_4)

  Modified files:
    .                    configure 
    autoconf             configure.in 
    include              setup.h.in 
    src                  bothunt.c dcc.c tcm_io.c 
  Log:
  Use a proper check for sys/select.h, not #ifdef AIX
  lint cleanups
  
  Revision  Changes    Path
  1.20      +1 -0      tcm-hybrid/autoconf/configure.in
  1.20      +52 -12    tcm-hybrid/configure
  1.8       +4 -1      tcm-hybrid/include/setup.h.in
  1.150     +1 -5      tcm-hybrid/src/bothunt.c
  1.5       +0 -4      tcm-hybrid/src/dcc.c
  1.85      +1 -18     tcm-hybrid/src/tcm_io.c



db          2002/06/04 04:36:31 EDT	(20020604_3)

  Modified files:
    src                  tcm_io.c 
  Log:
  - removed superflous variable, cleanups
  
  Revision  Changes    Path
  1.84      +13 -17    tcm-hybrid/src/tcm_io.c



db          2002/06/04 01:54:06 EDT	(20020604_2)

  Modified files:
    include              parse.h tcm_io.h 
    src                  main.c tcm_io.c 
  Log:
  - got rid of kludgy server:port parsing in connect_to_server
  
  Revision  Changes    Path
  1.19      +0 -1      tcm-hybrid/include/parse.h
  1.36      +1 -1      tcm-hybrid/include/tcm_io.h
  1.108     +2 -5      tcm-hybrid/src/main.c
  1.83      +5 -15     tcm-hybrid/src/tcm_io.c



db          2002/06/04 00:43:14 EDT	(20020604_1)

  Modified files:
    include              config.h tcm_io.h 
    src                  dcc.c tcm_io.c 
  Log:
  - reworked the way time outs happen, yet another handler handles timeouts.
  - listen() socket was not being made non blocking, so the tcm was blocking
    waiting for /dcc chats *oops*
  - reworked dcc.c code, more sensible naming. made work.
  
  Revision  Changes    Path
  1.66      +4 -0      tcm-hybrid/include/config.h
  1.35      +8 -7      tcm-hybrid/include/tcm_io.h
  1.4       +68 -16    tcm-hybrid/src/dcc.c
  1.82      +32 -14    tcm-hybrid/src/tcm_io.c



db          2002/06/03 21:18:23 EDT	(20020604_0)

  Modified files:
    include              parse.h tcm_io.h 
    src                  tcm_io.c 
  Log:
  - moved curr_state from connections into tcm_status.ping_state
  
  Revision  Changes    Path
  1.18      +3 -0      tcm-hybrid/include/parse.h
  1.34      +0 -2      tcm-hybrid/include/tcm_io.h
  1.81      +5 -5      tcm-hybrid/src/tcm_io.c



wcampbel    2002/06/03 18:51:02 EDT	(20020603_10)

  Modified files:
    src                  .depend 
  Log:
  .depend!!!
  
  Revision  Changes    Path
  1.25      +14 -8     tcm-hybrid/src/.depend



leeh        2002/06/03 17:49:37 EDT	(20020603_9)

  Modified files:
    src                  Makefile.in 
  Added files:
    src                  serv_commands.c 
  Log:
  - added the new serv_commands.c
  - updated Makefile with this and commands.c -> dcc_commands.c
  
  Revision  Changes    Path
  1.30      +2 -1      tcm-hybrid/src/Makefile.in
  1.1       +42 -0     tcm-hybrid/src/serv_commands.c (new)



leeh        2002/06/03 17:41:31 EDT	(20020603_8)

  Modified files:
    src                  actions.c 
  Log:
  - removed the damned recursion..
  
  Revision  Changes    Path
  1.25      +25 -24    tcm-hybrid/src/actions.c



db          2002/06/03 16:22:29 EDT	(20020603_7)

  Modified files:
    include              parse.h wingate.h 
    src                  wingate.c 
  Log:
  - removed last remnants of plus_c_info
  
  Revision  Changes    Path
  1.17      +0 -10     tcm-hybrid/include/parse.h
  1.5       +1 -3      tcm-hybrid/include/wingate.h
  1.54      +16 -16    tcm-hybrid/src/wingate.c



db          2002/06/03 10:57:35 EDT	(20020603_6)

  Modified files:
    src                  tcm_io.c 
  Log:
  - don't use connections[i].socket == INVALID use state == S_CLIENT
  - other quick cleanups in style
  
  Revision  Changes    Path
  1.80      +4 -4      tcm-hybrid/src/tcm_io.c



leeh        2002/06/03 07:03:09 EDT	(20020603_5)

  Modified files:
    include              actions.h 
    src                  actions.c bothunt.c clones.c hash.c 
                         services.c wingate.c 
  Log:
  - removed the ident setting from handle_action()
  
  Revision  Changes    Path
  1.11      +1 -1      tcm-hybrid/include/actions.h
  1.24      +10 -3     tcm-hybrid/src/actions.c
  1.149     +9 -17     tcm-hybrid/src/bothunt.c
  1.15      +1 -1      tcm-hybrid/src/clones.c
  1.28      +3 -22     tcm-hybrid/src/hash.c
  1.12      +2 -2      tcm-hybrid/src/services.c
  1.53      +3 -3      tcm-hybrid/src/wingate.c



leeh        2002/06/03 06:50:00 EDT	(20020603_4)

  Modified files:
    include              actions.h 
    src                  actions.c 
  Log:
  - tweaked the actions defaults
  - added ~* back
  
  Revision  Changes    Path
  1.10      +8 -5      tcm-hybrid/include/actions.h
  1.23      +4 -0      tcm-hybrid/src/actions.c



db          2002/06/02 22:10:17 EDT	(20020603_3)

  Modified files:
    src                  stdcmds.c tcm_io.c 
  Log:
  - parse_server() can call close_connection() which means io_read_function() can
    become NULL during I/O loop. oops
  
  Revision  Changes    Path
  1.89      +0 -5      tcm-hybrid/src/stdcmds.c
  1.79      +6 -0      tcm-hybrid/src/tcm_io.c



db          2002/06/02 19:41:35 EDT	(20020603_2)

  Modified files:
    src                  commands.c hash.c stdcmds.c 
  Log:
  - cleanups, removed one unnecessary include
  
  Revision  Changes    Path
  1.120     +25 -25    tcm-hybrid/src/commands.c
  1.27      +119 -119  tcm-hybrid/src/hash.c
  1.88      +6 -7      tcm-hybrid/src/stdcmds.c



db          2002/06/02 19:30:12 EDT	(20020603_1)

  Modified files:
    include              parse.h 
    src                  main.c parse.c tcm_io.c 
  Log:
  - pingtime -> tcm_status.ping_time
  
  Revision  Changes    Path
  1.16      +3 -3      tcm-hybrid/include/parse.h
  1.107     +4 -5      tcm-hybrid/src/main.c
  1.51      +1 -1      tcm-hybrid/src/parse.c
  1.78      +4 -4      tcm-hybrid/src/tcm_io.c



db          2002/06/02 19:13:22 EDT	(20020603_0)

  Modified files:
    include              parse.h 
    src                  actions.c bothunt.c clones.c hash.c 
                         main.c parse.c stdcmds.c 
  Log:
  - moved doingtrace into tcm_status.doing_trace
  
  Revision  Changes    Path
  1.15      +1 -0      tcm-hybrid/include/parse.h
  1.22      +5 -2      tcm-hybrid/src/actions.c
  1.148     +2 -8      tcm-hybrid/src/bothunt.c
  1.14      +14 -4     tcm-hybrid/src/clones.c
  1.26      +1 -1      tcm-hybrid/src/hash.c
  1.106     +2 -0      tcm-hybrid/src/main.c
  1.50      +3 -3      tcm-hybrid/src/parse.c
  1.87      +0 -2      tcm-hybrid/src/stdcmds.c



wcampbel    2002/06/02 18:24:18 EDT	(20020602_4)

  Modified files:
    include              userlist.h 
    src                  userlist.c 
  Log:
  Fixed a prototype
  Updated .depend
  
  Revision  Changes    Path
  1.65      +1 -1      tcm-hybrid/include/userlist.h
  1.110     +1 -1      tcm-hybrid/src/userlist.c



db          2002/06/02 18:17:03 EDT	(20020602_3)

  Modified files:
    include              bothunt.h hash.h stdcmds.h tcm_io.h 
                         userlist.h 
    src                  actions.c bothunt.c commands.c dcc.c 
                         hash.c main.c parse.c stdcmds.c 
                         userlist.c 
  Log:
  - init_hash() should have been clear_hash()
  - added init_actions() to keep "bare" stuff out of main.c
  - stamped out moreruntogethernames()
  
  Revision  Changes    Path
  1.46      +8 -10     tcm-hybrid/include/bothunt.h
  1.18      +1 -1      tcm-hybrid/include/hash.h
  1.28      +2 -2      tcm-hybrid/include/stdcmds.h
  1.33      +0 -1      tcm-hybrid/include/tcm_io.h
  1.64      +1 -1      tcm-hybrid/include/userlist.h
  1.21      +2 -1      tcm-hybrid/src/actions.c
  1.147     +11 -13    tcm-hybrid/src/bothunt.c
  1.119     +3 -2      tcm-hybrid/src/commands.c
  1.3       +1 -1      tcm-hybrid/src/dcc.c
  1.25      +2 -4      tcm-hybrid/src/hash.c
  1.105     +2 -3      tcm-hybrid/src/main.c
  1.49      +9 -4      tcm-hybrid/src/parse.c
  1.86      +2 -10     tcm-hybrid/src/stdcmds.c
  1.109     +10 -10    tcm-hybrid/src/userlist.c



wcampbel    2002/06/02 17:23:21 EDT	(20020602_2)

  Modified files:
    src                  hash.c 
  Log:
  Fixed some faulty logic in list_class() which caused successful .class and
  .classt searches to only set the count to 1, not the total count of users
  in that class.
  
  Revision  Changes    Path
  1.24      +8 -8      tcm-hybrid/src/hash.c



db          2002/06/02 01:26:42 EDT	(20020602_1)

  Modified files:
    src                  wingate.c 
  Log:
  - do some limiting of number of outstanding WINGATE/SQUID/SOCKS connections
  
  Revision  Changes    Path
  1.52      +28 -1     tcm-hybrid/src/wingate.c



db          2002/06/01 22:20:45 EDT	(20020602_0)

  Modified files:
    include              hash.h 
    src                  actions.c hash.c 
  Log:
  - more bloat reduction
  
  Revision  Changes    Path
  1.17      +3 -2      tcm-hybrid/include/hash.h
  1.20      +4 -4      tcm-hybrid/src/actions.c
  1.23      +14 -33    tcm-hybrid/src/hash.c



db          2002/06/01 15:43:16 EDT	(20020601_12)

  Modified files:
    include              logging.h userlist.h 
    src                  bothunt.c hash.c logging.c stdcmds.c 
                         vclones.c 
  Log:
  - yet more cleanups.  removed a function, replaced with tcm_log
  - removed unused botfailure
  
  Revision  Changes    Path
  1.15      +1 -2      tcm-hybrid/include/logging.h
  1.63      +0 -1      tcm-hybrid/include/userlist.h
  1.146     +6 -6      tcm-hybrid/src/bothunt.c
  1.22      +37 -37    tcm-hybrid/src/hash.c
  1.46      +30 -108   tcm-hybrid/src/logging.c
  1.85      +27 -68    tcm-hybrid/src/stdcmds.c
  1.10      +6 -5      tcm-hybrid/src/vclones.c



wcampbel    2002/06/01 09:06:03 EDT	(20020601_11)

  Modified files:
    .                    configure 
  Log:
  And rebuild configure
  
  Revision  Changes    Path
  1.19      +84 -95    tcm-hybrid/configure



wcampbel    2002/06/01 09:04:27 EDT	(20020601_10)

  Modified files:
    autoconf             configure.in 
    include              bothunt.h dcc.h logging.h setup.h.in 
                         tcm_io.h userlist.h wingate.h 
    src                  bothunt.c main.c tcm_io.c 
  Log:
  More lint cleanups
  
  Revision  Changes    Path
  1.19      +1 -1      tcm-hybrid/autoconf/configure.in
  1.45      +0 -1      tcm-hybrid/include/bothunt.h
  1.3       +0 -2      tcm-hybrid/include/dcc.h
  1.14      +0 -1      tcm-hybrid/include/logging.h
  1.7       +4 -1      tcm-hybrid/include/setup.h.in
  1.32      +0 -1      tcm-hybrid/include/tcm_io.h
  1.62      +0 -2      tcm-hybrid/include/userlist.h
  1.4       +0 -1      tcm-hybrid/include/wingate.h
  1.145     +3 -0      tcm-hybrid/src/bothunt.c
  1.104     +4 -0      tcm-hybrid/src/main.c
  1.77      +1 -2      tcm-hybrid/src/tcm_io.c



wcampbel    2002/06/01 08:36:17 EDT	(20020601_9)

  Modified files:
    src                  clones.c vclones.c 
  Log:
  -Wall cleanups on Solaris
  
  Revision  Changes    Path
  1.13      +2 -1      tcm-hybrid/src/clones.c
  1.9       +0 -1      tcm-hybrid/src/vclones.c



db          2002/06/01 00:46:33 EDT	(20020601_8)

  Modified files:
    include              hash.h 
    src                  commands.c hash.c 
  Log:
  - made .list work again (typo, had ip_table not domain_table)n
  - combined kill_list and list_users into kill_or_list_users()
  
  Revision  Changes    Path
  1.16      +3 -3      tcm-hybrid/include/hash.h
  1.118     +11 -11    tcm-hybrid/src/commands.c
  1.21      +35 -68    tcm-hybrid/src/hash.c



db          2002/06/01 00:22:05 EDT	(20020601_7)

  Modified files:
    src                  hash.c 
  Log:
  - no, I don't know what kind of drugs I was on.
  
  Revision  Changes    Path
  1.20      +3 -3      tcm-hybrid/src/hash.c



db          2002/05/31 23:49:25 EDT	(20020601_6)

  Modified files:
    src                  hash.c 
  Log:
  - oops. make sure -> next is NULL after malloc
  
  Revision  Changes    Path
  1.19      +1 -0      tcm-hybrid/src/hash.c



db          2002/05/31 23:40:51 EDT	(20020601_5)

  Modified files:
    include              hash.h 
    src                  clones.c hash.c 
  Log:
  - fixed some goofs in hash.c/clones.c
    notably need to allocate a hash_rec for each link list oops.
  
  Revision  Changes    Path
  1.15      +1 -1      tcm-hybrid/include/hash.h
  1.12      +1 -2      tcm-hybrid/src/clones.c
  1.18      +26 -22    tcm-hybrid/src/hash.c



db          2002/05/31 22:18:12 EDT	(20020601_4)

  Modified files:
    src                  bothunt.c 
  Log:
  - simple formatting fixes.
  
  Revision  Changes    Path
  1.144     +3 -2      tcm-hybrid/src/bothunt.c



wcampbel    2002/05/31 22:00:10 EDT	(20020601_3)

  Modified files:
    src                  match.c 
  Log:
  Removed some incorrect comments.
  
  Revision  Changes    Path
  1.2       +4 -10     tcm-hybrid/src/match.c



wcampbel    2002/05/31 21:54:11 EDT	(20020601_2)

  Modified files:
    include              config.h 
  Log:
  Remove the last vestiges of WANT_*LIST
  
  Revision  Changes    Path
  1.65      +0 -6      tcm-hybrid/include/config.h



wcampbel    2002/05/31 21:46:21 EDT	(20020601_1)

  Modified files:
    include              userlist.h 
  Log:
  Another cleanup from lint
  
  Revision  Changes    Path
  1.61      +1 -1      tcm-hybrid/include/userlist.h



wcampbel    2002/05/31 21:12:31 EDT	(20020601_0)

  Modified files:
    src                  Makefile.in bothunt.c clones.c handler.c 
                         hash.c logging.c userlist.c 
  Log:
  Cleanups from lint.
  
  Check the XXX's please Di, they may be clone system bugs.
  
  Revision  Changes    Path
  1.29      +2 -2      tcm-hybrid/src/Makefile.in
  1.143     +1 -2      tcm-hybrid/src/bothunt.c
  1.11      +1 -0      tcm-hybrid/src/clones.c
  1.4       +1 -1      tcm-hybrid/src/handler.c
  1.17      +0 -5      tcm-hybrid/src/hash.c
  1.45      +0 -2      tcm-hybrid/src/logging.c
  1.108     +2 -1      tcm-hybrid/src/userlist.c



db          2002/05/31 02:12:18 EDT	(20020531_5)

  Modified files:
    src                  hash.c 
  Log:
  - actually add info to the hash_rec being hashed in
  
  Revision  Changes    Path
  1.16      +13 -4     tcm-hybrid/src/hash.c



db          2002/05/31 02:03:54 EDT	(20020531_4)

  Modified files:
    src                  clones.c 
  Log:
  - simplified clones.c a bit (I hope)
  
  Revision  Changes    Path
  1.10      +131 -182  tcm-hybrid/src/clones.c



db          2002/05/31 00:54:52 EDT	(20020531_3)

  Modified files:
    src                  vclones.c 
  Log:
  - consolidated report_vbots() and report_multi_user()
  
  Revision  Changes    Path
  1.8       +67 -83    tcm-hybrid/src/vclones.c



wcampbel    2002/05/30 22:06:36 EDT	(20020531_2)

  Modified files:
    src                  actions.c 
  Log:
  These two functions can go away
  
  Approved by:    Lee
  
  Revision  Changes    Path
  1.19      +0 -21     tcm-hybrid/src/actions.c



wcampbel    2002/05/30 22:02:41 EDT	(20020531_1)

  Modified files:
    src                  actions.c 
  Log:
  Lee said the p reference in the else can go, GONE :)
  
  Revision  Changes    Path
  1.18      +0 -2      tcm-hybrid/src/actions.c



wcampbel    2002/05/30 21:54:23 EDT	(20020531_0)

  Modified files:
    include              actions.h dcc.h hash.h tcm.h userlist.h 
    src                  .depend actions.c bothunt.c clones.c 
                         commands.c handler.c hash.c main.c 
                         parse.c stdcmds.c userlist.c vclones.c 
  Log:
  TCM now compiles on Solaris again.  Cleanups of headers, variables, and
  a few scattered bugs.  Updated .depend's.
  
  A pointer is NOT a boolean (just for you Juli ;))
  
  Please look at my XXX's in src/actions.c
  
  Revision  Changes    Path
  1.9       +2 -2      tcm-hybrid/include/actions.h
  1.2       +2 -2      tcm-hybrid/include/dcc.h
  1.14      +2 -0      tcm-hybrid/include/hash.h
  1.51      +6 -0      tcm-hybrid/include/tcm.h
  1.60      +1 -0      tcm-hybrid/include/userlist.h
  1.24      +17 -12    tcm-hybrid/src/.depend
  1.17      +7 -3      tcm-hybrid/src/actions.c
  1.142     +1 -12     tcm-hybrid/src/bothunt.c
  1.9       +2 -0      tcm-hybrid/src/clones.c
  1.117     +3 -8      tcm-hybrid/src/commands.c
  1.3       +4 -4      tcm-hybrid/src/handler.c
  1.15      +3 -2      tcm-hybrid/src/hash.c
  1.103     +1 -0      tcm-hybrid/src/main.c
  1.48      +1 -0      tcm-hybrid/src/parse.c
  1.84      +1 -0      tcm-hybrid/src/stdcmds.c
  1.107     +1 -1      tcm-hybrid/src/userlist.c
  1.7       +1 -0      tcm-hybrid/src/vclones.c



jmallett    2002/05/30 18:48:26 EDT	(20020530_13)

  Modified files:
    src                  hash.c 
  Log:
  This is a NULL-terminated tail queue, not a circular queue.  Using it as the
  latter results in infinite loops in a number of locations, since there's no
  NULL to terminate, ever!
  
  Not that this even does circular-queues properly, it enforces tight-circles
  at the index point.
  
  Revision  Changes    Path
  1.14      +1 -1      tcm-hybrid/src/hash.c



db          2002/05/30 18:41:00 EDT	(20020530_12)

  Modified files:
    src                  clones.c hash.c vclones.c 
  Log:
  - userptr -> ptr
  
  Revision  Changes    Path
  1.8       +91 -88    tcm-hybrid/src/clones.c
  1.13      +41 -37    tcm-hybrid/src/hash.c
  1.6       +39 -36    tcm-hybrid/src/vclones.c



db          2002/05/30 16:58:53 EDT	(20020530_11)

  Modified files:
    include              hash.h 
    src                  hash.c 
  Log:
  - more run together variables
  - missed prototype fix
  
  Revision  Changes    Path
  1.13      +5 -5      tcm-hybrid/include/hash.h
  1.12      +4 -4      tcm-hybrid/src/hash.c



db          2002/05/30 16:54:10 EDT	(20020530_10)

  Modified files:
    include              hash.h logging.h 
    src                  actions.c bothunt.c clones.c hash.c 
                         logging.c vclones.c 
  Log:
  ihateruntogethervariablenames
  
  Revision  Changes    Path
  1.12      +16 -16    tcm-hybrid/include/hash.h
  1.13      +2 -2      tcm-hybrid/include/logging.h
  1.16      +2 -2      tcm-hybrid/src/actions.c
  1.141     +2 -2      tcm-hybrid/src/bothunt.c
  1.7       +9 -9      tcm-hybrid/src/clones.c
  1.11      +48 -48    tcm-hybrid/src/hash.c
  1.44      +2 -2      tcm-hybrid/src/logging.c
  1.5       +5 -5      tcm-hybrid/src/vclones.c



db          2002/05/30 14:59:40 EDT	(20020530_9)

  Modified files:
    include              bothunt.h hash.h logging.h 
    src                  bothunt.c hash.c logging.c 
  Log:
  - got rid of plus_c_info use struct userentry consistently now
  
  Revision  Changes    Path
  1.44      +1 -0      tcm-hybrid/include/bothunt.h
  1.11      +2 -2      tcm-hybrid/include/hash.h
  1.12      +3 -1      tcm-hybrid/include/logging.h
  1.140     +12 -9     tcm-hybrid/src/bothunt.c
  1.10      +8 -8      tcm-hybrid/src/hash.c
  1.43      +19 -22    tcm-hybrid/src/logging.c



db          2002/05/30 14:22:18 EDT	(20020530_8)

  Modified files:
    include              hash.h 
    src                  actions.c bothunt.c clones.c hash.c 
                         logging.c vclones.c 
  Log:
  - I screwed up on the hash code :-)
    anyway, this cleans up the hash table code a bit
  
  Revision  Changes    Path
  1.10      +16 -14    tcm-hybrid/include/hash.h
  1.15      +2 -2      tcm-hybrid/src/actions.c
  1.139     +6 -14     tcm-hybrid/src/bothunt.c
  1.6       +49 -47    tcm-hybrid/src/clones.c
  1.9       +382 -407  tcm-hybrid/src/hash.c
  1.42      +2 -2      tcm-hybrid/src/logging.c
  1.4       +19 -18    tcm-hybrid/src/vclones.c



leeh        2002/05/30 12:36:03 EDT	(20020530_7)

  Modified files:
    include              actions.h 
    src                  actions.c commands.c 
  Log:
  - more cleanups.
  - moved the action commands into actions.c, which allowed a bunch of
    things to be made static.  hmm.  that wierd static word again.
  
  Revision  Changes    Path
  1.8       +6 -16     tcm-hybrid/include/actions.h
  1.14      +52 -5     tcm-hybrid/src/actions.c
  1.116     +8 -105    tcm-hybrid/src/commands.c



leeh        2002/05/30 11:59:35 EDT	(20020530_6)

  Modified files:
    include              actions.h tcm.h 
    src                  actions.c commands.c 
  Log:
  - more action cleanups..
  
  Revision  Changes    Path
  1.7       +3 -0      tcm-hybrid/include/actions.h
  1.50      +0 -3      tcm-hybrid/include/tcm.h
  1.13      +41 -5     tcm-hybrid/src/actions.c
  1.115     +1 -46     tcm-hybrid/src/commands.c



leeh        2002/05/30 11:27:33 EDT	(20020530_5)

  Modified files:
    include              actions.h config.h 
    src                  actions.c commands.c main.c services.c 
                         userlist.c wingate.c 
  Log:
  - upped pingtime
  - cleanups to actions (still unfinished)
  
  Revision  Changes    Path
  1.6       +7 -1      tcm-hybrid/include/actions.h
  1.64      +1 -1      tcm-hybrid/include/config.h
  1.12      +207 -18   tcm-hybrid/src/actions.c
  1.114     +16 -38    tcm-hybrid/src/commands.c
  1.102     +0 -85     tcm-hybrid/src/main.c
  1.11      +4 -0      tcm-hybrid/src/services.c
  1.106     +1 -36     tcm-hybrid/src/userlist.c
  1.51      +3 -9      tcm-hybrid/src/wingate.c



leeh        2002/05/30 09:33:52 EDT	(20020530_4)

  Modified files:
    .                    ChangeLog 
    src                  .depend actions.c 
  Log:
  - add set_action() to simplify init_actions()
  - updated depend
  - please dont change my commit messages.
  
  Revision  Changes    Path
  1.474     +3 -0      tcm-hybrid/ChangeLog
  1.23      +1 -1      tcm-hybrid/src/.depend
  1.11      +26 -31    tcm-hybrid/src/actions.c



bill        2002/05/30 00:48:52 EDT	(20020530_3)

  Modified files:
    .                    ChangeLog 
    src                  bothunt.c clones.c dcc.c 
  Log:
  - properly fix .chat command
  - redid server notice parsing to use get_user_host()
  - got rid of a few unnessecary strstr() and strchr() calls in server notice parsing
  - removed references to deleted commands.h
  
  Revision  Changes    Path
  1.472     +0 -3      tcm-hybrid/ChangeLog
  1.138     +86 -113   tcm-hybrid/src/bothunt.c
  1.5       +0 -1      tcm-hybrid/src/clones.c
  1.2       +2 -3      tcm-hybrid/src/dcc.c



db          2002/05/29 22:21:56 EDT	(20020530_2)

  Modified files:
    src                  actions.c clones.c hash.c vclones.c 
  Log:
  - removed errant ->info in actions
  - cleaned up code futher, caught a memory leak
  
  Revision  Changes    Path
  1.10      +2 -2      tcm-hybrid/src/actions.c
  1.4       +7 -11     tcm-hybrid/src/clones.c
  1.8       +3 -1      tcm-hybrid/src/hash.c
  1.3       +8 -9      tcm-hybrid/src/vclones.c



leeh        2002/05/29 21:49:54 EDT	(20020530_1)

  Modified files:
    include              actions.h stdcmds.h tcm.h 
    src                  .depend actions.c bothunt.c commands.c 
                         handler.c main.c modules.c parse.c 
                         services.c stdcmds.c tcm_io.c userlist.c 
                         wingate.c 
  Removed files:
    include              commands.h 
  Log:
  - removed channels.h, there are these wierd things called 'statics' and
    as the handler code doesnt need to be able to reference these functions
    directly, you can use this 'static' thing instead of making everything
    extern.
  - ripped m_kperm (use .kline), brought back m_kclones etc and ripped
    m_kaction.

  of course, not having bills intelligence means I dont have any clue
  what I just said..
  
  Revision  Changes    Path
  1.5       +2 -2      tcm-hybrid/include/actions.h
  1.20      +0 -63     tcm-hybrid/include/commands.h (dead)
  1.27      +1 -1      tcm-hybrid/include/stdcmds.h
  1.49      +6 -3      tcm-hybrid/include/tcm.h
  1.22      +41 -35    tcm-hybrid/src/.depend
  1.9       +144 -106  tcm-hybrid/src/actions.c
  1.137     +0 -1      tcm-hybrid/src/bothunt.c
  1.113     +82 -67    tcm-hybrid/src/commands.c
  1.2       +0 -1      tcm-hybrid/src/handler.c
  1.101     +0 -1      tcm-hybrid/src/main.c
  1.49      +0 -1      tcm-hybrid/src/modules.c
  1.47      +0 -1      tcm-hybrid/src/parse.c
  1.10      +0 -1      tcm-hybrid/src/services.c
  1.83      +6 -6      tcm-hybrid/src/stdcmds.c
  1.76      +0 -1      tcm-hybrid/src/tcm_io.c
  1.105     +0 -1      tcm-hybrid/src/userlist.c
  1.50      +0 -1      tcm-hybrid/src/wingate.c



db          2002/05/29 21:45:32 EDT	(20020530_0)

  Modified files:
    include              hash.h 
    src                  actions.c clones.c hash.c vclones.c 
  Log:
  - removed superflous info pointer, extra indirection not needed.
  
    This is a synch up commit, to allow Lee and I to synch up. Further testing
  is needed.
  
  Revision  Changes    Path
  1.9       +6 -11     tcm-hybrid/include/hash.h
  1.8       +5 -5      tcm-hybrid/src/actions.c
  1.3       +51 -52    tcm-hybrid/src/clones.c
  1.7       +109 -194  tcm-hybrid/src/hash.c
  1.2       +21 -23    tcm-hybrid/src/vclones.c



db          2002/05/29 14:47:50 EDT	(20020529_8)

  Modified files:
    include              tcm_io.h 
    src                  Makefile.in tcm_io.c 
  Added files:
    include              dcc.h 
    src                  dcc.c 
  Log:
  - split dcc handling out of tcm_io.c into dcc.c
  
  Revision  Changes    Path
  1.1       +15 -0     tcm-hybrid/include/dcc.h (new)
  1.31      +0 -5      tcm-hybrid/include/tcm_io.h
  1.28      +1 -0      tcm-hybrid/src/Makefile.in
  1.1       +332 -0    tcm-hybrid/src/dcc.c (new)
  1.75      +5 -283    tcm-hybrid/src/tcm_io.c



db          2002/05/29 12:05:11 EDT	(20020529_7)

  Modified files:
    src                  tcm_io.c 
  Log:
  - cleanups.. use memset to zero out a connection struct when closed
  - use strlcpy instead of strncpy
  - memset the entire connection array at startup
  
  Revision  Changes    Path
  1.74      +14 -51    tcm-hybrid/src/tcm_io.c



leeh        2002/05/29 09:36:44 EDT	(20020529_6)

  Modified files:
    src                  tcm_io.c 
  Log:
  - somebody "fixing" dcc broke /msg tcm .chat, reverted part of the change.
  
  Revision  Changes    Path
  1.73      +2 -0      tcm-hybrid/src/tcm_io.c



leeh        2002/05/29 09:10:44 EDT	(20020529_5)

  Modified files:
    include              userlist.h 
    src                  userlist.c 
  Log:
  - kludged get_umode() for now to return(type|FLAGS_ALL) as FLAGS_ALL is
    for messages that all clients should see, and the userlist doesnt
    contain those in stats O..
  
  Revision  Changes    Path
  1.59      +8 -11     tcm-hybrid/include/userlist.h
  1.104     +2 -1      tcm-hybrid/src/userlist.c



db          2002/05/29 02:26:18 EDT	(20020529_4)

  Modified files:
    include              tcm_io.h userlist.h 
    src                  actions.c bothunt.c clones.c commands.c 
                         hash.c logging.c main.c modules.c parse.c 
                         services.c stdcmds.c tcm_io.c userlist.c 
  Log:
  - combined SEND and USER flags, renamed "TYPE" to FLAGS
    this means its now a simple AND in tcm_io.c
  - localized all references to maxconns to tcm_io.c
  
  Revision  Changes    Path
  1.30      +0 -14     tcm-hybrid/include/tcm_io.h
  1.58      +27 -18    tcm-hybrid/include/userlist.h
  1.7       +2 -2      tcm-hybrid/src/actions.c
  1.136     +26 -62    tcm-hybrid/src/bothunt.c
  1.2       +1 -1      tcm-hybrid/src/clones.c
  1.112     +21 -65    tcm-hybrid/src/commands.c
  1.6       +12 -12    tcm-hybrid/src/hash.c
  1.41      +1 -1      tcm-hybrid/src/logging.c
  1.100     +1 -1      tcm-hybrid/src/main.c
  1.48      +9 -8      tcm-hybrid/src/modules.c
  1.46      +7 -7      tcm-hybrid/src/parse.c
  1.9       +2 -2      tcm-hybrid/src/services.c
  1.82      +3 -3      tcm-hybrid/src/stdcmds.c
  1.72      +102 -64   tcm-hybrid/src/tcm_io.c
  1.103     +37 -22    tcm-hybrid/src/userlist.c



leeh        2002/05/28 21:47:34 EDT	(20020529_3)

  Modified files:
    src                  commands.c 
  Log:
  - removed an #ifdef IRCD_GOATCHEESE
  
  Revision  Changes    Path
  1.111     +0 -6      tcm-hybrid/src/commands.c



leeh        2002/05/28 21:19:35 EDT	(20020529_2)

  Modified files:
    include              commands.h hash.h tcm.h 
    src                  Makefile.in commands.c hash.c main.c 
  Added files:
    src                  vclones.c 
  Log:
  - split virtual stuff into vclones.c
  
  Revision  Changes    Path
  1.19      +0 -3      tcm-hybrid/include/commands.h
  1.8       +0 -6      tcm-hybrid/include/hash.h
  1.48      +3 -0      tcm-hybrid/include/tcm.h
  1.27      +1 -0      tcm-hybrid/src/Makefile.in
  1.110     +0 -56     tcm-hybrid/src/commands.c
  1.5       +0 -192    tcm-hybrid/src/hash.c
  1.99      +1 -0      tcm-hybrid/src/main.c
  1.1       +287 -0    tcm-hybrid/src/vclones.c (new)



leeh        2002/05/28 20:59:30 EDT	(20020529_1)

  Modified files:
    include              commands.h hash.h tcm.h userlist.h 
    src                  Makefile.in bothunt.c commands.c hash.c 
                         main.c modules.c tcm_io.c 
  Added files:
    src                  clones.c 
  Log:
  - split the clone stuff out into clones.c
  
  Revision  Changes    Path
  1.18      +0 -4      tcm-hybrid/include/commands.h
  1.7       +12 -6     tcm-hybrid/include/hash.h
  1.47      +2 -0      tcm-hybrid/include/tcm.h
  1.57      +0 -1      tcm-hybrid/include/userlist.h
  1.26      +1 -0      tcm-hybrid/src/Makefile.in
  1.135     +0 -59     tcm-hybrid/src/bothunt.c
  1.1       +511 -0    tcm-hybrid/src/clones.c (new)
  1.109     +0 -69     tcm-hybrid/src/commands.c
  1.4       +4 -339    tcm-hybrid/src/hash.c
  1.98      +2 -0      tcm-hybrid/src/main.c
  1.47      +6 -2      tcm-hybrid/src/modules.c
  1.71      +4 -6      tcm-hybrid/src/tcm_io.c



leeh        2002/05/28 19:57:23 EDT	(20020529_0)

  Modified files:
    src                  commands.c tcm_io.c 
  Log:
  - added my debug code back
  - merged m_disconnect and handle_disconnect
  
  Revision  Changes    Path
  1.108     +14 -32    tcm-hybrid/src/commands.c
  1.70      +3 -0      tcm-hybrid/src/tcm_io.c



bill        2002/05/28 17:10:29 EDT	(20020528_26)

  Modified files:
    src                  tcm_io.c 
  Log:
  - moved finish_dcc_chat to io_write_function, as we are waiting to be able to write to the socket, not read from it.
  - log dcc quits the same we log dcc connects
  
  Revision  Changes    Path
  1.69      +14 -16    tcm-hybrid/src/tcm_io.c



leeh        2002/05/28 16:01:53 EDT	(20020528_25)

  Modified files:
    include              bothunt.h config.h 
    src                  bothunt.c parse.c 
  Log:
  - ripped on_trace_class
  
  Revision  Changes    Path
  1.43      +0 -1      tcm-hybrid/include/bothunt.h
  1.63      +1 -1      tcm-hybrid/include/config.h
  1.134     +0 -7      tcm-hybrid/src/bothunt.c
  1.45      +1 -1      tcm-hybrid/src/parse.c



db          2002/05/28 15:40:54 EDT	(20020528_24)

  Modified files:
    include              bothunt.h hash.h 
    src                  bothunt.c 
  Log:
  - redid bothunt.c messages to monitor code
    precalculate message lengths
  
  Revision  Changes    Path
  1.42      +38 -26    tcm-hybrid/include/bothunt.h
  1.6       +21 -0     tcm-hybrid/include/hash.h
  1.133     +41 -41    tcm-hybrid/src/bothunt.c



leeh        2002/05/28 14:47:19 EDT	(20020528_23)

  Modified files:
    include              config.h tcm.h userlist.h 
    src                  bothunt.c commands.c tcm_io.c userlist.c 
  Log:
  - ripped out set, replaced it with +mn
  - gline fix
  
  Revision  Changes    Path
  1.62      +1 -1      tcm-hybrid/include/config.h
  1.46      +0 -5      tcm-hybrid/include/tcm.h
  1.56      +2 -0      tcm-hybrid/include/userlist.h
  1.132     +3 -1      tcm-hybrid/src/bothunt.c
  1.107     +0 -52     tcm-hybrid/src/commands.c
  1.68      +2 -2      tcm-hybrid/src/tcm_io.c
  1.102     +2 -0      tcm-hybrid/src/userlist.c



db          2002/05/28 14:18:30 EDT	(20020528_22)

  Modified files:
    src                  main.c tcm_io.c 
  Log:
  - hide init of maxconns in init_connections()
  
  Revision  Changes    Path
  1.97      +0 -2      tcm-hybrid/src/main.c
  1.67      +2 -0      tcm-hybrid/src/tcm_io.c



db          2002/05/28 14:16:15 EDT	(20020528_21)

  Modified files:
    src                  main.c tcm_io.c 
  Log:
  - fixed stupid with maxconns. too many globals still, called all over...
  
  Revision  Changes    Path
  1.96      +2 -0      tcm-hybrid/src/main.c
  1.66      +0 -2      tcm-hybrid/src/tcm_io.c



db          2002/05/28 13:57:12 EDT	(20020528_20)

  Modified files:
    include              parse.h 
    src                  bothunt.c main.c parse.c tcm_io.c 
  Log:
  - cleaned up code to use tcm_status , moved my_class into tcm_status
  
  Revision  Changes    Path
  1.14      +6 -4      tcm-hybrid/include/parse.h
  1.131     +3 -4      tcm-hybrid/src/bothunt.c
  1.95      +7 -6      tcm-hybrid/src/main.c
  1.44      +16 -16    tcm-hybrid/src/parse.c
  1.65      +6 -6      tcm-hybrid/src/tcm_io.c



db          2002/05/28 13:32:06 EDT	(20020528_19)

  Modified files:
    include              parse.h 
    src                  main.c parse.c tcm_io.c 
  Log:
  - added t_tcm_status struct and corresponding tcm_status which keep
    track of current nick, hostname etc. more will be moved into this
    struct as needed.
  
  Revision  Changes    Path
  1.13      +9 -4      tcm-hybrid/include/parse.h
  1.94      +12 -11    tcm-hybrid/src/main.c
  1.43      +14 -13    tcm-hybrid/src/parse.c
  1.64      +7 -6      tcm-hybrid/src/tcm_io.c



leeh        2002/05/28 12:52:09 EDT	(20020528_18)

  Modified files:
    src                  userlist.c 
  Log:
  - fixed a merge problem
  
  Revision  Changes    Path
  1.101     +0 -13     tcm-hybrid/src/userlist.c



db          2002/05/28 12:41:59 EDT	(20020528_17)

  Modified files:
    include              actions.h logging.h parse.h tcm.h 
                         tcm_io.h userlist.h 
    src                  actions.c bothunt.c logging.c main.c 
                         parse.c tcm_io.c userlist.c 
  Log:
  - cleaned up tcm.h
  
  Revision  Changes    Path
  1.4       +5 -1      tcm-hybrid/include/actions.h
  1.11      +3 -0      tcm-hybrid/include/logging.h
  1.12      +4 -2      tcm-hybrid/include/parse.h
  1.45      +0 -13     tcm-hybrid/include/tcm.h
  1.29      +4 -0      tcm-hybrid/include/tcm_io.h
  1.55      +0 -1      tcm-hybrid/include/userlist.h
  1.6       +4 -0      tcm-hybrid/src/actions.c
  1.130     +6 -19     tcm-hybrid/src/bothunt.c
  1.40      +3 -0      tcm-hybrid/src/logging.c
  1.93      +2 -5      tcm-hybrid/src/main.c
  1.42      +1 -2      tcm-hybrid/src/parse.c
  1.63      +19 -0     tcm-hybrid/src/tcm_io.c
  1.100     +4 -14     tcm-hybrid/src/userlist.c



leeh        2002/05/28 12:06:00 EDT	(20020528_16)

  Modified files:
    include              userlist.h 
    src                  commands.c userlist.c 
  Log:
  - get_umodes_current doesnt have much use anymore, reference the type
    directly instead
  
  Revision  Changes    Path
  1.54      +0 -1      tcm-hybrid/include/userlist.h
  1.106     +1 -1      tcm-hybrid/src/commands.c
  1.99      +6 -12     tcm-hybrid/src/userlist.c



leeh        2002/05/28 12:01:59 EDT	(20020528_15)

  Modified files:
    include              userlist.h 
    src                  commands.c main.c userlist.c 
  Log:
  - redid save_umodes(), made it an event
  
  Revision  Changes    Path
  1.53      +4 -0      tcm-hybrid/include/userlist.h
  1.105     +0 -30     tcm-hybrid/src/commands.c
  1.92      +2 -0      tcm-hybrid/src/main.c
  1.98      +80 -1     tcm-hybrid/src/userlist.c



leeh        2002/05/28 11:10:18 EDT	(20020528_14)

  Modified files:
    etc                  tcm.cf 
    include              config.h tcm_io.h 
    src                  tcm_io.c wingate.c 
  Log:
  - redid the ping timeout code to exempt clients and to send a PING to the
    server when we dont get no data for 1/2 pingtime.
  
  Revision  Changes    Path
  1.28      +0 -7      tcm-hybrid/etc/tcm.cf
  1.61      +4 -1      tcm-hybrid/include/config.h
  1.28      +4 -2      tcm-hybrid/include/tcm_io.h
  1.62      +40 -22    tcm-hybrid/src/tcm_io.c
  1.49      +8 -8      tcm-hybrid/src/wingate.c



leeh        2002/05/28 08:48:36 EDT	(20020528_13)

  Modified files:
    include              stdcmds.h userlist.h 
    src                  bothunt.c commands.c main.c parse.c 
                         stdcmds.c userlist.c 
  Log:
  - cleaned up join()
  - ripped set_modes()
  
  Revision  Changes    Path
  1.26      +1 -2      tcm-hybrid/include/stdcmds.h
  1.52      +0 -2      tcm-hybrid/include/userlist.h
  1.129     +0 -5      tcm-hybrid/src/bothunt.c
  1.104     +3 -4      tcm-hybrid/src/commands.c
  1.91      +1 -1      tcm-hybrid/src/main.c
  1.41      +2 -12     tcm-hybrid/src/parse.c
  1.81      +5 -24     tcm-hybrid/src/stdcmds.c
  1.97      +1 -5      tcm-hybrid/src/userlist.c



leeh        2002/05/28 08:14:20 EDT	(20020528_12)

  Modified files:
    include              hash.h modules.h 
    src                  .depend Makefile.in bothunt.c commands.c 
                         main.c modules.c parse.c services.c 
                         userlist.c 
  Added files:
    include              handler.h 
    src                  handler.c 
  Log:
  - moved handler code to its own file
  - ripped on_cannot_join, if you cant join, big deal.
  
  Revision  Changes    Path
  1.1       +50 -0     tcm-hybrid/include/handler.h (new)
  1.5       +0 -1      tcm-hybrid/include/hash.h
  1.28      +0 -40     tcm-hybrid/include/modules.h
  1.21      +52 -34    tcm-hybrid/src/.depend
  1.25      +1 -0      tcm-hybrid/src/Makefile.in
  1.128     +0 -1      tcm-hybrid/src/bothunt.c
  1.103     +1 -1      tcm-hybrid/src/commands.c
  1.1       +318 -0    tcm-hybrid/src/handler.c (new)
  1.90      +1 -0      tcm-hybrid/src/main.c
  1.46      +1 -292    tcm-hybrid/src/modules.c
  1.40      +2 -32     tcm-hybrid/src/parse.c
  1.8       +1 -0      tcm-hybrid/src/services.c
  1.96      +1 -0      tcm-hybrid/src/userlist.c



leeh        2002/05/28 07:52:41 EDT	(20020528_11)

  Modified files:
    include              tcm_io.h 
    src                  bothunt.c commands.c tcm_io.c 
  Log:
  - removed connections[].type
  
  Revision  Changes    Path
  1.27      +0 -1      tcm-hybrid/include/tcm_io.h
  1.127     +1 -1      tcm-hybrid/src/bothunt.c
  1.102     +25 -23    tcm-hybrid/src/commands.c
  1.61      +0 -2      tcm-hybrid/src/tcm_io.c



db          2002/05/28 01:46:43 EDT	(20020528_10)

  Modified files:
    include              actions.h tcm.h 
    src                  bothunt.c main.c tcm_io.c 
  Log:
  - use an event to reconnect tcm to server after timeout or other error
  - move more prototypes into right headers
  
  Revision  Changes    Path
  1.3       +7 -0      tcm-hybrid/include/actions.h
  1.44      +0 -8      tcm-hybrid/include/tcm.h
  1.126     +1 -0      tcm-hybrid/src/bothunt.c
  1.89      +4 -3      tcm-hybrid/src/main.c
  1.60      +21 -13    tcm-hybrid/src/tcm_io.c



db          2002/05/28 00:32:27 EDT	(20020528_9)

  Modified files:
    include              bothunt.h hash.h 
    src                  bothunt.c parse.c userlist.c 
  Log:
  - make names readable *grumble*
  - added get_user_host() function to bothunt.c cleaned bothunt.c up a bit
  - moved prototypes from bothunt.h to hash.h
  
  Revision  Changes    Path
  1.41      +6 -10     tcm-hybrid/include/bothunt.h
  1.4       +3 -0      tcm-hybrid/include/hash.h
  1.125     +102 -107  tcm-hybrid/src/bothunt.c
  1.39      +5 -5      tcm-hybrid/src/parse.c
  1.95      +1 -1      tcm-hybrid/src/userlist.c



db          2002/05/27 23:27:00 EDT	(20020528_8)

  Modified files:
    src                  hash.c tcm_io.c 
  Log:
  - cleanups more cleanups
  - tcm now reconnects after pinging out
  
  Revision  Changes    Path
  1.3       +2 -1      tcm-hybrid/src/hash.c
  1.59      +3 -3      tcm-hybrid/src/tcm_io.c



db          2002/05/27 21:07:58 EDT	(20020528_7)

  Modified files:
    src                  tcm_io.c 
  Log:
  - close listening socket after accept
  
  Revision  Changes    Path
  1.58      +3 -0      tcm-hybrid/src/tcm_io.c



db          2002/05/27 20:35:14 EDT	(20020528_6)

  Modified files:
    include              hash.h parse.h 
    src                  actions.c bothunt.c commands.c hash.c 
                         logging.c stdcmds.c userlist.c wingate.c 
  Log:
  - removed hash.h from files that didn't need it, replaced with parse.
  
  Revision  Changes    Path
  1.3       +1 -8      tcm-hybrid/include/hash.h
  1.11      +8 -2      tcm-hybrid/include/parse.h
  1.5       +2 -1      tcm-hybrid/src/actions.c
  1.124     +1 -1      tcm-hybrid/src/bothunt.c
  1.101     +1 -2      tcm-hybrid/src/commands.c
  1.2       +1 -1      tcm-hybrid/src/hash.c
  1.39      +1 -1      tcm-hybrid/src/logging.c
  1.80      +1 -1      tcm-hybrid/src/stdcmds.c
  1.94      +1 -1      tcm-hybrid/src/userlist.c
  1.48      +1 -2      tcm-hybrid/src/wingate.c



db          2002/05/27 20:20:25 EDT	(20020528_5)

  Modified files:
    src                  bothunt.c tcm_io.c 
  Log:
  - fixed bug in tcm_io.c
  - cleanups in bothunt.c
  
  Revision  Changes    Path
  1.123     +17 -14    tcm-hybrid/src/bothunt.c
  1.57      +1 -3      tcm-hybrid/src/tcm_io.c



leeh        2002/05/27 20:03:04 EDT	(20020528_4)

  Modified files:
    src                  stdcmds.c 
  Log:
  - removed a extra space in the kline notice
  
  Revision  Changes    Path
  1.79      +3 -3      tcm-hybrid/src/stdcmds.c



db          2002/05/27 19:59:51 EDT	(20020528_3)

  Modified files:
    include              actions.h bothunt.h hash.h logging.h 
    src                  Makefile.in actions.c bothunt.c 
                         commands.c logging.c main.c parse.c 
                         services.c stdcmds.c tcm_io.c userlist.c 
                         wingate.c 
  Added files:
    src                  hash.c 
  Log:
  - added new hash.c file, moved all hash related code from bothunt.c into
    hash.c
    NOTE there should be a better place to stick plus_c_info than in hash.h !
  
  Revision  Changes    Path
  1.2       +10 -0     tcm-hybrid/include/actions.h
  1.40      +2 -11     tcm-hybrid/include/bothunt.h
  1.2       +20 -0     tcm-hybrid/include/hash.h
  1.10      +1 -0      tcm-hybrid/include/logging.h
  1.24      +2 -1      tcm-hybrid/src/Makefile.in
  1.4       +46 -1     tcm-hybrid/src/actions.c
  1.122     +48 -2038  tcm-hybrid/src/bothunt.c
  1.100     +2 -0      tcm-hybrid/src/commands.c
  1.1       +2015 -0   tcm-hybrid/src/hash.c (new)
  1.38      +1 -0      tcm-hybrid/src/logging.c
  1.88      +1 -0      tcm-hybrid/src/main.c
  1.38      +1 -0      tcm-hybrid/src/parse.c
  1.7       +1 -0      tcm-hybrid/src/services.c
  1.78      +1 -1      tcm-hybrid/src/stdcmds.c
  1.56      +1 -0      tcm-hybrid/src/tcm_io.c
  1.93      +1 -0      tcm-hybrid/src/userlist.c
  1.47      +2 -0      tcm-hybrid/src/wingate.c



leeh        2002/05/27 19:49:14 EDT	(20020528_2)

  Modified files:
    include              userlist.h 
    src                  commands.c 
  Log:
  - ripped TYPE_PENDING
  - ripped various old umode functions
  
  Revision  Changes    Path
  1.51      +0 -1      tcm-hybrid/include/userlist.h
  1.99      +15 -117   tcm-hybrid/src/commands.c



leeh        2002/05/27 19:40:01 EDT	(20020528_1)

  Modified files:
    src                  bothunt.c commands.c parse.c tcm_io.c 
                         userlist.c 
  Log:
  - started moving stuff over to has_umode()
  
  Revision  Changes    Path
  1.121     +1 -1      tcm-hybrid/src/bothunt.c
  1.98      +6 -235    tcm-hybrid/src/commands.c
  1.37      +3 -3      tcm-hybrid/src/parse.c
  1.55      +8 -8      tcm-hybrid/src/tcm_io.c
  1.92      +2 -2      tcm-hybrid/src/userlist.c



leeh        2002/05/27 19:10:04 EDT	(20020528_0)

  Modified files:
    include              userlist.h 
    src                  bothunt.c commands.c userlist.c 
  Log:
  - ripped TYPE_INVM
  
  Revision  Changes    Path
  1.50      +0 -1      tcm-hybrid/include/userlist.h
  1.120     +1 -1      tcm-hybrid/src/bothunt.c
  1.97      +3 -12     tcm-hybrid/src/commands.c
  1.91      +0 -1      tcm-hybrid/src/userlist.c



leeh        2002/05/27 18:40:42 EDT	(20020527_25)

  Modified files:
    include              userlist.h 
    src                  userlist.c 
  Log:
  - added has_umode()
  
  Revision  Changes    Path
  1.49      +2 -1      tcm-hybrid/include/userlist.h
  1.90      +13 -0     tcm-hybrid/src/userlist.c



db          2002/05/27 18:03:23 EDT	(20020527_24)

  Modified files:
    include              bothunt.h stdcmds.h 
  Log:
  - removal of duplicate function definitions
  - moved function definitions from stdcmds.h into bothunt.h
  
  Revision  Changes    Path
  1.39      +15 -4     tcm-hybrid/include/bothunt.h
  1.25      +0 -17     tcm-hybrid/include/stdcmds.h



leeh        2002/05/27 17:55:21 EDT	(20020527_23)

  Modified files:
    include              userlist.h 
    src                  commands.c userlist.c 
  Log:
  - userlist.type -> int
  - ripped out +e
  
  Revision  Changes    Path
  1.48      +3 -4      tcm-hybrid/include/userlist.h
  1.96      +0 -3      tcm-hybrid/src/commands.c
  1.89      +4 -5      tcm-hybrid/src/userlist.c



leeh        2002/05/27 17:47:14 EDT	(20020527_22)

  Modified files:
    include              bothunt.h userlist.h 
    src                  .depend actions.c bothunt.c parse.c 
                         services.c userlist.c wingate.c 
  Log:
  - on_stats_o -> add_an_oper -> userlist.c
  - get_method_* -> actions.c
  - moved m_umode above set_umode
  - updated depend
  
  Revision  Changes    Path
  1.38      +0 -1      tcm-hybrid/include/bothunt.h
  1.47      +3 -0      tcm-hybrid/include/userlist.h
  1.20      +15 -12    tcm-hybrid/src/.depend
  1.3       +40 -1     tcm-hybrid/src/actions.c
  1.119     +0 -74     tcm-hybrid/src/bothunt.c
  1.36      +1 -2      tcm-hybrid/src/parse.c
  1.6       +1 -0      tcm-hybrid/src/services.c
  1.88      +116 -92   tcm-hybrid/src/userlist.c
  1.46      +2 -0      tcm-hybrid/src/wingate.c



db          2002/05/27 17:45:50 EDT	(20020527_21)

  Modified files:
    src                  bothunt.c 
  Log:
  - style fixes
  
  Revision  Changes    Path
  1.118     +55 -55    tcm-hybrid/src/bothunt.c



leeh        2002/05/27 17:25:13 EDT	(20020527_20)

  Modified files:
    include              userlist.h 
    src                  parse.c 
  Log:
  - removed an unused struct
  
  Revision  Changes    Path
  1.46      +0 -9      tcm-hybrid/include/userlist.h
  1.35      +8 -0      tcm-hybrid/src/parse.c



db          2002/05/27 17:19:28 EDT	(20020527_19)

  Modified files:
    include              bothunt.h 
    src                  actions.c bothunt.c 
  Log:
  - added definition for find_host in bothunt.h
  - style fixes in actions.
  
  Revision  Changes    Path
  1.37      +3 -0      tcm-hybrid/include/bothunt.h
  1.2       +33 -30    tcm-hybrid/src/actions.c
  1.117     +3 -3      tcm-hybrid/src/bothunt.c



db          2002/05/27 17:02:39 EDT	(20020527_18)

  Modified files:
    include              bothunt.h logging.h stdcmds.h userlist.h 
    src                  Makefile.in bothunt.c commands.c 
                         logging.c main.c parse.c stdcmds.c 
                         userlist.c 
  Added files:
    include              actions.h hash.h 
    src                  actions.c 
  Log:
  - move stuff from stdcmds.c into bothunt.c for now, bothunt.c is bloated
  - added actions.c actions.h
  - start preparation for moving stuff into hash.c added hash.h
  
  some minor compile warnings need to be sorted
  
  Revision  Changes    Path
  1.1       +75 -0     tcm-hybrid/include/actions.h (new)
  1.36      +5 -1      tcm-hybrid/include/bothunt.h
  1.1       +34 -0     tcm-hybrid/include/hash.h (new)
  1.9       +0 -1      tcm-hybrid/include/logging.h
  1.24      +5 -10     tcm-hybrid/include/stdcmds.h
  1.45      +1 -106    tcm-hybrid/include/userlist.h
  1.23      +2 -1      tcm-hybrid/src/Makefile.in
  1.1       +305 -0    tcm-hybrid/src/actions.c (new)
  1.116     +1231 -9   tcm-hybrid/src/bothunt.c
  1.95      +1 -0      tcm-hybrid/src/commands.c
  1.37      +0 -63     tcm-hybrid/src/logging.c
  1.87      +1 -0      tcm-hybrid/src/main.c
  1.34      +0 -59     tcm-hybrid/src/parse.c
  1.77      +2 -1349   tcm-hybrid/src/stdcmds.c
  1.87      +1 -0      tcm-hybrid/src/userlist.c



leeh        2002/05/27 16:26:46 EDT	(20020527_17)

  Modified files:
    src                  userlist.c 
  Log:
  - made type_show use the table
  - allow umodes to be set for non-connected users..
  
  Revision  Changes    Path
  1.86      +23 -45    tcm-hybrid/src/userlist.c



leeh        2002/05/27 16:15:42 EDT	(20020527_16)

  Modified files:
    include              userlist.h 
    src                  main.c userlist.c 
  Log:
  - use umodes purely in the userlist struct
  - ripped init_userlist, none of the things in it did anything anyway.
  
  Revision  Changes    Path
  1.44      +2 -8      tcm-hybrid/include/userlist.h
  1.86      +1 -1      tcm-hybrid/src/main.c
  1.85      +56 -131   tcm-hybrid/src/userlist.c



db          2002/05/27 13:42:08 EDT	(20020527_15)

  Modified files:
    src                  tcm_io.c 
  Log:
  - ensure closed connection resets time_out to 0
  
  Revision  Changes    Path
  1.54      +4 -4      tcm-hybrid/src/tcm_io.c



db          2002/05/27 13:32:22 EDT	(20020527_14)

  Modified files:
    include              tcm_io.h 
    src                  tcm_io.c userlist.c wingate.c 
  Log:
  - generalised timeout to all connections.
  
  Revision  Changes    Path
  1.26      +2 -1      tcm-hybrid/include/tcm_io.h
  1.53      +34 -21    tcm-hybrid/src/tcm_io.c
  1.84      +1 -1      tcm-hybrid/src/userlist.c
  1.45      +9 -10     tcm-hybrid/src/wingate.c



leeh        2002/05/27 07:42:01 EDT	(20020527_13)

  Modified files:
    etc                  userlist.cf 
    include              config.h userlist.h 
    src                  bothunt.c userlist.c 
  Log:
  - split usermodes into 'privs' and 'flags'.  privs are those that grant
    abilities (KDWM), flags are those that just change what a user sees
    whilst connected (spy on /links etc)
  
    The general idea is, users cant set privs themselves and if admins set
    them theyre only temporary whilst that users connected.  You set privs
    in userlist.cf, flags are saved in <user>.prefs
  
    I think this is the right approach..
  
  Revision  Changes    Path
  1.22      +5 -13     tcm-hybrid/etc/userlist.cf
  1.60      +2 -2      tcm-hybrid/include/config.h
  1.43      +3 -2      tcm-hybrid/include/userlist.h
  1.115     +2 -0      tcm-hybrid/src/bothunt.c
  1.83      +80 -39    tcm-hybrid/src/userlist.c



db          2002/05/27 01:03:16 EDT	(20020527_12)

  Modified files:
    include              bothunt.h parse.h 
    src                  bothunt.c parse.c 
  Log:
  - more tidy ups to parse.c
  - renamed functions
  - renamed onctcp -> on_ctcp moved it from bothunt.c made it static
  
  Revision  Changes    Path
  1.35      +0 -1      tcm-hybrid/include/bothunt.h
  1.10      +1 -2      tcm-hybrid/include/parse.h
  1.114     +0 -51     tcm-hybrid/src/bothunt.c
  1.33      +70 -32    tcm-hybrid/src/parse.c



db          2002/05/26 22:59:29 EDT	(20020527_11)

  Modified files:
    include              parse.h 
    src                  parse.c 
  Log:
  - simple renames of function names, variables tidying up
  
  Revision  Changes    Path
  1.9       +0 -1      tcm-hybrid/include/parse.h
  1.32      +29 -28    tcm-hybrid/src/parse.c



db          2002/05/26 22:46:10 EDT	(20020527_10)

  Modified files:
    src                  parse.c 
  Log:
  - renamed onnicktaken to on_nick_taken etc.
  - fix an off by one error in on_nick_taken
  
  Revision  Changes    Path
  1.31      +11 -18    tcm-hybrid/src/parse.c



db          2002/05/26 22:24:48 EDT	(20020527_9)

  Modified files:
    src                  logging.c main.c userlist.c 
  Log:
  - mor tidy ups
  
  Revision  Changes    Path
  1.36      +10 -14    tcm-hybrid/src/logging.c
  1.85      +6 -8      tcm-hybrid/src/main.c
  1.82      +16 -24    tcm-hybrid/src/userlist.c



leeh        2002/05/26 21:54:50 EDT	(20020527_8)

  Modified files:
    src                  userlist.c 
  Log:
  - return hardcoded and own set preferences
  
  Revision  Changes    Path
  1.81      +4 -5      tcm-hybrid/src/userlist.c



db          2002/05/26 21:44:36 EDT	(20020527_7)

  Modified files:
    src                  tcm_io.c 
  Log:
  - removed unused dccbuf
  
  Revision  Changes    Path
  1.52      +2 -2      tcm-hybrid/src/tcm_io.c



db          2002/05/26 21:37:45 EDT	(20020527_6)

  Modified files:
    include              config.h logging.h 
    src                  bothunt.c commands.c logging.c main.c 
                         services.c stdcmds.c tcm_io.c wingate.c 
  Log:
  - rationalised logging. got rid of log_problem and log replaced with tcm_log
    added L_ERR L_WARN L_NORM
  
  Revision  Changes    Path
  1.59      +3 -0      tcm-hybrid/include/config.h
  1.8       +5 -2      tcm-hybrid/include/logging.h
  1.113     +22 -19    tcm-hybrid/src/bothunt.c
  1.94      +5 -3      tcm-hybrid/src/commands.c
  1.35      +24 -33    tcm-hybrid/src/logging.c
  1.84      +1 -1      tcm-hybrid/src/main.c
  1.5       +2 -1      tcm-hybrid/src/services.c
  1.76      +20 -12    tcm-hybrid/src/stdcmds.c
  1.51      +4 -4      tcm-hybrid/src/tcm_io.c
  1.44      +4 -4      tcm-hybrid/src/wingate.c



db          2002/05/26 21:08:32 EDT	(20020527_5)

  Modified files:
    etc                  tcm.cf 
  Log:
  - fixed spelling mistake
  
  Revision  Changes    Path
  1.27      +2 -2      tcm-hybrid/etc/tcm.cf



db          2002/05/26 20:57:51 EDT	(20020527_4)

  Modified files:
    src                  tcm_io.c 
  Log:
  - argv was unused
  
  Revision  Changes    Path
  1.50      +0 -1      tcm-hybrid/src/tcm_io.c



db          2002/05/26 20:56:11 EDT	(20020527_3)

  Modified files:
    src                  tcm_io.c 
  Log:
  - more tidy ups and bug fixes
    make sure an error on a fd is properly dealt with
  
  Revision  Changes    Path
  1.49      +21 -20    tcm-hybrid/src/tcm_io.c



db          2002/05/26 20:42:16 EDT	(20020527_2)

  Modified files:
    include              logging.h tcm_io.h 
    src                  bothunt.c logging.c main.c parse.c 
                         tcm_io.c 
  Log:
  - more tidy ups.
    server connection struct no longer has to be 0.
    no more special cased code for i == 0.
  - cleaned up logging a bit. "log()" and "log_problem()" seem redundant to me
    thats next to fix.
  
  Still a lot more to go.
  
  Revision  Changes    Path
  1.7       +2 -2      tcm-hybrid/include/logging.h
  1.25      +2 -1      tcm-hybrid/include/tcm_io.h
  1.112     +1 -1      tcm-hybrid/src/bothunt.c
  1.34      +19 -20    tcm-hybrid/src/logging.c
  1.83      +7 -7      tcm-hybrid/src/main.c
  1.30      +15 -18    tcm-hybrid/src/parse.c
  1.48      +47 -66    tcm-hybrid/src/tcm_io.c



db          2002/05/26 19:33:51 EDT	(20020527_1)

  Modified files:
    include              tcm_io.h 
    src                  tcm_io.c wingate.c 
  Log:
  - more tidy ups.
  
  Revision  Changes    Path
  1.24      +1 -1      tcm-hybrid/include/tcm_io.h
  1.47      +15 -17    tcm-hybrid/src/tcm_io.c
  1.43      +3 -3      tcm-hybrid/src/wingate.c



db          2002/05/26 19:15:05 EDT	(20020527_0)

  Modified files:
    include              tcm_io.h 
    src                  main.c parse.c tcm_io.c 
  Log:
  - got rid of incoming_connnum global.
  - added send_to_partyline
  - changed connection states to, S_IDLE, S_CONNECTING, S_SERVER S_CLIENT
  
  Revision  Changes    Path
  1.23      +5 -2      tcm-hybrid/include/tcm_io.h
  1.82      +0 -4      tcm-hybrid/src/main.c
  1.29      +1 -1      tcm-hybrid/src/parse.c
  1.46      +32 -10    tcm-hybrid/src/tcm_io.c



leeh        2002/05/26 16:44:45 EDT	(20020526_23)

  Modified files:
    include              commands.h userlist.h 
    src                  commands.c main.c userlist.c 
  Log:
  - commited what ive done so far of the umode code
    setting other peoples umodes is broken until tomorrow.
  
  Revision  Changes    Path
  1.17      +0 -1      tcm-hybrid/include/commands.h
  1.42      +4 -0      tcm-hybrid/include/userlist.h
  1.93      +5 -108    tcm-hybrid/src/commands.c
  1.81      +1 -0      tcm-hybrid/src/main.c
  1.80      +182 -1    tcm-hybrid/src/userlist.c



db          2002/05/26 15:27:11 EDT	(20020526_22)

  Modified files:
    include              config.h 
    src                  userlist.c wingate.c 
  Log:
  - moved wingate class table back into userlist.c
  
  Revision  Changes    Path
  1.58      +9 -0      tcm-hybrid/include/config.h
  1.79      +16 -10    tcm-hybrid/src/userlist.c
  1.42      +0 -25     tcm-hybrid/src/wingate.c



leeh        2002/05/26 15:04:17 EDT	(20020526_21)

  Modified files:
    src                  userlist.c 
  Log:
  - added a usermode table
  
  Revision  Changes    Path
  1.78      +30 -0     tcm-hybrid/src/userlist.c



leeh        2002/05/26 13:44:04 EDT	(20020526_20)

  Modified files:
    include              stdcmds.h tcm.h tcm_io.h userlist.h 
    src                  bothunt.c services.c stdcmds.c tcm_io.c 
  Log:
  - ripped msg_mychannel, just call privmsg(channel, ...)
  - ripped MAX_DOMAIN, its the same as MAX_HOST
  - reverted the services clone/drone warnings to how they used to be
  
  Revision  Changes    Path
  1.23      +0 -1      tcm-hybrid/include/stdcmds.h
  1.43      +0 -4      tcm-hybrid/include/tcm.h
  1.22      +1 -1      tcm-hybrid/include/tcm_io.h
  1.41      +2 -2      tcm-hybrid/include/userlist.h
  1.111     +2 -2      tcm-hybrid/src/bothunt.c
  1.4       +15 -2     tcm-hybrid/src/services.c
  1.75      +11 -27    tcm-hybrid/src/stdcmds.c
  1.45      +4 -4      tcm-hybrid/src/tcm_io.c



leeh        2002/05/26 12:10:30 EDT	(20020526_19)

  Modified files:
    etc                  userlist.cf 
    include              bothunt.h tcm.h userlist.h 
    src                  bothunt.c commands.c main.c userlist.c 
  Log:
  - ripped out glines
  
  Revision  Changes    Path
  1.21      +4 -9      tcm-hybrid/etc/userlist.cf
  1.34      +0 -12     tcm-hybrid/include/bothunt.h
  1.42      +1 -0      tcm-hybrid/include/tcm.h
  1.40      +0 -1      tcm-hybrid/include/userlist.h
  1.110     +0 -202    tcm-hybrid/src/bothunt.c
  1.92      +0 -9      tcm-hybrid/src/commands.c
  1.80      +0 -4      tcm-hybrid/src/main.c
  1.77      +0 -5      tcm-hybrid/src/userlist.c



db          2002/05/26 11:26:02 EDT	(20020526_18)

  Modified files:
    include              bothunt.h 
    src                  Makefile.in bothunt.c tcm_io.c wingate.c 
  Log:
  - don't add fd to writefds if there is no io_write_function for it
  - more cleanups of SOCKS code in wingate.c not functional yet. getting there...
  - add services.c to Makefile.in
  - more tidy ups class[100] -> class[MAX_CLASS] etc. etc.
  
  Revision  Changes    Path
  1.33      +1 -1      tcm-hybrid/include/bothunt.h
  1.22      +1 -0      tcm-hybrid/src/Makefile.in
  1.109     +1 -1      tcm-hybrid/src/bothunt.c
  1.44      +2 -1      tcm-hybrid/src/tcm_io.c
  1.41      +67 -82    tcm-hybrid/src/wingate.c



leeh        2002/05/26 09:09:25 EDT	(20020526_17)

  Modified files:
    include              bothunt.h commands.h config.h tcm.h 
    src                  bothunt.c commands.c userlist.c wingate.c 
  Log:
  - fixed the expand_args bugs where we were jumping too far ahead in
    a buffer, causing us to pull stuff from random memory
  - fixed some compile warnings
  - started on getting rid of all these damned sizeof()'s everywhere.
  
  Revision  Changes    Path
  1.32      +8 -4      tcm-hybrid/include/bothunt.h
  1.16      +1 -1      tcm-hybrid/include/commands.h
  1.57      +12 -25    tcm-hybrid/include/config.h
  1.41      +2 -0      tcm-hybrid/include/tcm.h
  1.108     +22 -23    tcm-hybrid/src/bothunt.c
  1.91      +34 -31    tcm-hybrid/src/commands.c
  1.76      +2 -0      tcm-hybrid/src/userlist.c
  1.40      +8 -0      tcm-hybrid/src/wingate.c



db          2002/05/26 03:30:55 EDT	(20020526_16)

  Modified files:
    src                  tcm_io.c 
  Log:
  - just a few tidy ups
  
  Revision  Changes    Path
  1.43      +2 -7      tcm-hybrid/src/tcm_io.c



db          2002/05/26 03:26:09 EDT	(20020526_15)

  Modified files:
    src                  tcm_io.c wingate.c 
  Log:
  - more cleanups in wingate.c
  - made writefds/readfds static
  
  Revision  Changes    Path
  1.42      +3 -3      tcm-hybrid/src/tcm_io.c
  1.39      +3 -5      tcm-hybrid/src/wingate.c



db          2002/05/26 03:13:13 EDT	(20020526_14)

  Modified files:
    src                  tcm_io.c wingate.c 
  Log:
  - This should re-enable squid detection
    UNTESTED
  
  Revision  Changes    Path
  1.41      +2 -0      tcm-hybrid/src/tcm_io.c
  1.38      +56 -48    tcm-hybrid/src/wingate.c



db          2002/05/26 02:57:33 EDT	(20020526_13)

  Modified files:
    include              tcm_io.h wingate.h 
    src                  tcm_io.c wingate.c 
  Log:
  - this should make wingate detection work again.
    TOTALLY UNTESTED
  
  MORE to do...
  
  Revision  Changes    Path
  1.21      +3 -0      tcm-hybrid/include/tcm_io.h
  1.3       +2 -0      tcm-hybrid/include/wingate.h
  1.40      +27 -5     tcm-hybrid/src/tcm_io.c
  1.37      +146 -153  tcm-hybrid/src/wingate.c



db          2002/05/26 01:48:08 EDT	(20020526_12)

  Modified files:
    include              bothunt.h config.h tcm.h tcm_io.h 
                         userlist.h wingate.h 
    src                  bothunt.c tcm_io.c userlist.c wingate.c 
  Log:
  - interim checkpoint non-functional on wingate/squid/socks detection
    Start of the great re-do of I/O for proxy detection
  
  Revision  Changes    Path
  1.31      +3 -1      tcm-hybrid/include/bothunt.h
  1.56      +5 -2      tcm-hybrid/include/config.h
  1.40      +1 -0      tcm-hybrid/include/tcm.h
  1.20      +7 -2      tcm-hybrid/include/tcm_io.h
  1.39      +1 -1      tcm-hybrid/include/userlist.h
  1.2       +3 -5      tcm-hybrid/include/wingate.h
  1.107     +24 -31    tcm-hybrid/src/bothunt.c
  1.39      +10 -6     tcm-hybrid/src/tcm_io.c
  1.75      +26 -0     tcm-hybrid/src/userlist.c
  1.36      +180 -517  tcm-hybrid/src/wingate.c



leeh        2002/05/25 23:02:52 EDT	(20020526_11)

  Modified files:
    src                  .depend services.c tcm_io.c 
  Log:
  - updated depend, etc
  
  Revision  Changes    Path
  1.19      +33 -35    tcm-hybrid/src/.depend
  1.3       +0 -1      tcm-hybrid/src/services.c
  1.38      +2 -1      tcm-hybrid/src/tcm_io.c



db          2002/05/25 22:55:14 EDT	(20020526_10)

  Modified files:
    include              bothunt.h config.h stdcmds.h tcm_io.h 
    src                  .depend bothunt.c commands.c logging.c 
                         main.c modules.c parse.c stdcmds.c 
                         tcm_io.c userlist.c 
  Removed files:
    include              serverif.h 
  Log:
  - removed serverif.h
  
  Revision  Changes    Path
  1.30      +1 -0      tcm-hybrid/include/bothunt.h
  1.55      +8 -0      tcm-hybrid/include/config.h
  1.27      +0 -25     tcm-hybrid/include/serverif.h (dead)
  1.22      +3 -0      tcm-hybrid/include/stdcmds.h
  1.19      +1 -0      tcm-hybrid/include/tcm_io.h
  1.18      +10 -10    tcm-hybrid/src/.depend
  1.106     +1 -1      tcm-hybrid/src/bothunt.c
  1.90      +0 -1      tcm-hybrid/src/commands.c
  1.33      +0 -1      tcm-hybrid/src/logging.c
  1.79      +0 -1      tcm-hybrid/src/main.c
  1.45      +0 -1      tcm-hybrid/src/modules.c
  1.28      +2 -2      tcm-hybrid/src/parse.c
  1.74      +0 -1      tcm-hybrid/src/stdcmds.c
  1.37      +1 -1      tcm-hybrid/src/tcm_io.c
  1.74      +0 -1      tcm-hybrid/src/userlist.c



db          2002/05/25 22:32:48 EDT	(20020526_9)

  Modified files:
    include              parse.h tcm_io.h 
    src                  parse.c tcm_io.c 
  Log:
  - I/O handlers do not need to return anything.
  
  Revision  Changes    Path
  1.8       +2 -2      tcm-hybrid/include/parse.h
  1.18      +2 -1      tcm-hybrid/include/tcm_io.h
  1.27      +5 -5      tcm-hybrid/src/parse.c
  1.36      +37 -22    tcm-hybrid/src/tcm_io.c



leeh        2002/05/25 22:14:32 EDT	(20020526_8)

  Modified files:
    src                  bothunt.c 
  Log:
  - nah, shouldve been <
  
  Revision  Changes    Path
  1.105     +1 -1      tcm-hybrid/src/bothunt.c



db          2002/05/25 22:12:48 EDT	(20020526_7)

  Modified files:
    include              parse.h tcm_io.h 
    src                  main.c parse.c tcm_io.c 
  Log:
  - IO handlers now only take one arg, their connection id.
  - parse_client now calls parse_args itself
  
    This means, no special casing in the main I/O loop
  
  Revision  Changes    Path
  1.7       +2 -3      tcm-hybrid/include/parse.h
  1.17      +1 -1      tcm-hybrid/include/tcm_io.h
  1.78      +0 -1      tcm-hybrid/src/main.c
  1.26      +9 -33     tcm-hybrid/src/parse.c
  1.35      +42 -24    tcm-hybrid/src/tcm_io.c



leeh        2002/05/25 22:06:49 EDT	(20020526_6)

  Modified files:
    src                  main.c services.c 
  Log:
  - services cleanups
  - set current_time in main so events work..
  
  Revision  Changes    Path
  1.77      +2 -0      tcm-hybrid/src/main.c
  1.2       +3 -14     tcm-hybrid/src/services.c



db          2002/05/25 21:28:23 EDT	(20020526_5)

  Modified files:
    include              parse.h serverif.h tcm_io.h 
    src                  commands.c main.c parse.c tcm_io.c 
  Log:
  - added io functions.
  - removed used of INVALID socket, use state == S_IDLE instead please
  
    I/O is now handled through a indirection function per client. This means
  adding callbacks for wingates/socks/squid whatever can be added. This also means
  we can hide the I/O more.
  
    Still need time outs on dcc connections.
  
    MORE to go
  
  Revision  Changes    Path
  1.6       +8 -8      tcm-hybrid/include/parse.h
  1.26      +0 -1      tcm-hybrid/include/serverif.h
  1.16      +10 -9     tcm-hybrid/include/tcm_io.h
  1.89      +2 -2      tcm-hybrid/src/commands.c
  1.76      +2 -47     tcm-hybrid/src/main.c
  1.25      +3 -2      tcm-hybrid/src/parse.c
  1.34      +108 -52   tcm-hybrid/src/tcm_io.c



leeh        2002/05/25 20:45:29 EDT	(20020526_4)

  Modified files:
    include              config.h 
  Log:
  - must stop commiting config.h..
  
  Revision  Changes    Path
  1.54      +25 -12    tcm-hybrid/include/config.h



leeh        2002/05/25 20:44:22 EDT	(20020526_3)

  Modified files:
    include              config.h parse.h serverif.h tcm.h 
    src                  .depend main.c parse.c tcm_io.c 
  Added files:
    src                  services.c 
  Log:
  - services code -> services.c
  
  Revision  Changes    Path
  1.53      +12 -25    tcm-hybrid/include/config.h
  1.5       +0 -4      tcm-hybrid/include/parse.h
  1.25      +0 -18     tcm-hybrid/include/serverif.h
  1.39      +6 -0      tcm-hybrid/include/tcm.h
  1.17      +6 -0      tcm-hybrid/src/.depend
  1.75      +6 -2      tcm-hybrid/src/main.c
  1.24      +0 -133    tcm-hybrid/src/parse.c
  1.1       +177 -0    tcm-hybrid/src/services.c (new)
  1.33      +0 -4      tcm-hybrid/src/tcm_io.c



db          2002/05/25 19:27:57 EDT	(20020526_2)

  Modified files:
    include              commands.h modules.h parse.h stdcmds.h 
                         tcm_io.h userlist.h 
    src                  bothunt.c commands.c main.c stdcmds.c 
  Log:
  - DIE YOU HEATHEN EXTERNS! DIE DIE DIE!
    MAY AN ELEPHANT PISS ON YOUR GRAVE!
  
  Revision  Changes    Path
  1.15      +1 -0      tcm-hybrid/include/commands.h
  1.27      +1 -4      tcm-hybrid/include/modules.h
  1.4       +3 -1      tcm-hybrid/include/parse.h
  1.21      +1 -0      tcm-hybrid/include/stdcmds.h
  1.15      +2 -0      tcm-hybrid/include/tcm_io.h
  1.38      +2 -0      tcm-hybrid/include/userlist.h
  1.104     +2 -0      tcm-hybrid/src/bothunt.c
  1.88      +0 -4      tcm-hybrid/src/commands.c
  1.74      +1 -8      tcm-hybrid/src/main.c
  1.73      +5 -2      tcm-hybrid/src/stdcmds.c



leeh        2002/05/25 19:11:13 EDT	(20020526_1)

  Modified files:
    src                  bothunt.c tcm_io.c 
  Log:
  - < to <=
  
  Revision  Changes    Path
  1.103     +2 -1      tcm-hybrid/src/bothunt.c
  1.32      +1 -1      tcm-hybrid/src/tcm_io.c



leeh        2002/05/25 19:06:01 EDT	(20020526_0)

  Modified files:
    src                  commands.c 
  Log:
  - FLAGS_OPERWALL doesnt exist anymore, its FLAGS_WALLOPS
  
  Revision  Changes    Path
  1.87      +3 -3      tcm-hybrid/src/commands.c



leeh        2002/05/25 18:25:11 EDT	(20020525_34)

  Modified files:
    include              modules.h 
    src                  modules.c parse.c 
  Log:
  - numeric handlers.
  
  Revision  Changes    Path
  1.26      +11 -0     tcm-hybrid/include/modules.h
  1.44      +46 -5     tcm-hybrid/src/modules.c
  1.23      +8 -2      tcm-hybrid/src/parse.c



db          2002/05/25 18:03:02 EDT	(20020525_33)

  Modified files:
    include              tcm_io.h 
    src                  bothunt.c main.c parse.c tcm_io.c 
  Log:
  redid more io
  - first off if a socket is INVALID it won't be in the readlist!
  - added state variable to connections
  - redid how dcc chat and msg .chat are done
  
    Need to rethink out I/O handlers...
  Thats next
  
  Revision  Changes    Path
  1.14      +7 -1      tcm-hybrid/include/tcm_io.h
  1.102     +2 -2      tcm-hybrid/src/bothunt.c
  1.73      +1 -1      tcm-hybrid/src/main.c
  1.22      +0 -12     tcm-hybrid/src/parse.c
  1.31      +103 -111  tcm-hybrid/src/tcm_io.c



leeh        2002/05/25 15:22:48 EDT	(20020525_32)

  Modified files:
    src                  modules.c parse.c 
  Log:
  - style cleanups
  
  Revision  Changes    Path
  1.43      +3 -3      tcm-hybrid/src/modules.c
  1.21      +179 -168  tcm-hybrid/src/parse.c



jmallett    2002/05/25 15:21:45 EDT	(20020525_31)

  Modified files:
    src                  tcm_io.c 
  Log:
  Add the connection's file descriptor to the readable file descriptors set
  so that it doesn't get blocked on indefinitely until input is read.
  
  Revision  Changes    Path
  1.30      +1 -0      tcm-hybrid/src/tcm_io.c



jmallett    2002/05/25 15:13:28 EDT	(20020525_30)

  Modified files:
    src                  tcm_io.c 
  Log:
  Spank spank.
  
  Y'uns can avoid checking the fdset if we know the socket is invalid.
  
  Revision  Changes    Path
  1.29      +2 -1      tcm-hybrid/src/tcm_io.c



leeh        2002/05/25 15:10:11 EDT	(20020525_29)

  Modified files:
    src                  parse.c 
  Log:
  - added code to call the handlers (wheeeeeeeeee!)
  
  Revision  Changes    Path
  1.20      +8 -0      tcm-hybrid/src/parse.c



leeh        2002/05/25 14:44:09 EDT	(20020525_28)

  Modified files:
    include              modules.h 
    src                  modules.c 
  Log:
  - initial attempt at the server command handler
  
  Revision  Changes    Path
  1.25      +10 -11    tcm-hybrid/include/modules.h
  1.42      +144 -10   tcm-hybrid/src/modules.c



db          2002/05/25 13:52:06 EDT	(20020525_27)

  Modified files:
    src                  tcm_io.c 
  Log:
  - fix dcc chat to tcm
  
  Revision  Changes    Path
  1.28      +19 -22    tcm-hybrid/src/tcm_io.c



jmallett    2002/05/25 13:45:17 EDT	(20020525_26)

  Modified files:
    include              tcm.h 
    src                  bothunt.c logging.c main.c stdcmds.c 
  Log:
  xfree() ala xmalloc().  Use it for further useless average stats.
  
  Revision  Changes    Path
  1.38      +3 -1      tcm-hybrid/include/tcm.h
  1.101     +4 -4      tcm-hybrid/src/bothunt.c
  1.32      +1 -1      tcm-hybrid/src/logging.c
  1.72      +19 -1     tcm-hybrid/src/main.c
  1.72      +4 -2      tcm-hybrid/src/stdcmds.c



db          2002/05/25 13:34:33 EDT	(20020525_25)

  Modified files:
    include              tcm_io.h 
    src                  main.c tcm_io.c 
  Log:
  - partially done redoing all connects non-blocking...
  
  More to do
  
  Revision  Changes    Path
  1.13      +10 -9     tcm-hybrid/include/tcm_io.h
  1.71      +3 -3      tcm-hybrid/src/main.c
  1.27      +44 -50    tcm-hybrid/src/tcm_io.c



wcampbel    2002/05/25 13:10:31 EDT	(20020525_24)

  Added files:
    include              wingate.h 
  Log:
  It would help if I cvs add wingate.h
  
  Revision  Changes    Path
  1.1       +16 -0     tcm-hybrid/include/wingate.h (new)



wcampbel    2002/05/25 13:08:15 EDT	(20020525_23)

  Modified files:
    include              tcm_io.h 
    src                  .depend bothunt.c commands.c parse.c 
                         tcm_io.c userlist.c wingate.c 
  Log:
  -Wall cleanups
  Slow^H^H^Holaris cleanups
  
  Revision  Changes    Path
  1.12      +1 -1      tcm-hybrid/include/tcm_io.h
  1.16      +9 -5      tcm-hybrid/src/.depend
  1.100     +2 -0      tcm-hybrid/src/bothunt.c
  1.86      +1 -0      tcm-hybrid/src/commands.c
  1.19      +0 -1      tcm-hybrid/src/parse.c
  1.26      +3 -2      tcm-hybrid/src/tcm_io.c
  1.73      +2 -0      tcm-hybrid/src/userlist.c
  1.35      +2 -6      tcm-hybrid/src/wingate.c



wcampbel    2002/05/25 12:49:19 EDT	(20020525_22)

  Modified files:
    include              commands.h config.h 
    src                  commands.c 
  Log:
  Always enable .ulist and .hlist
  
  Revision  Changes    Path
  1.14      +0 -4      tcm-hybrid/include/commands.h
  1.52      +0 -6      tcm-hybrid/include/config.h
  1.85      +0 -12     tcm-hybrid/src/commands.c



jmallett    2002/05/25 12:32:41 EDT	(20020525_21)

  Modified files:
    include              tcm.h 
    src                  main.c stdcmds.c 
  Log:
  Track average allocation, and number of allocations.
  
  Revision  Changes    Path
  1.37      +1 -0      tcm-hybrid/include/tcm.h
  1.70      +4 -0      tcm-hybrid/src/main.c
  1.71      +3 -1      tcm-hybrid/src/stdcmds.c



jmallett    2002/05/25 12:29:16 EDT	(20020525_20)

  Modified files:
    src                  main.c 
  Log:
  Account for overflow in the xmalloc stats.
  
  Revision  Changes    Path
  1.69      +4 -0      tcm-hybrid/src/main.c



jmallett    2002/05/25 12:27:29 EDT	(20020525_19)

  Modified files:
    include              serverif.h 
    src                  commands.c main.c tcm_io.c 
  Log:
  Remove bogus arguments to closeconn().
  
  Revision  Changes    Path
  1.24      +1 -1      tcm-hybrid/include/serverif.h
  1.84      +2 -2      tcm-hybrid/src/commands.c
  1.68      +1 -1      tcm-hybrid/src/main.c
  1.25      +1 -1      tcm-hybrid/src/tcm_io.c



leeh        2002/05/25 12:21:10 EDT	(20020525_18)

  Modified files:
    src                  .depend Makefile.in bothunt.c commands.c 
                         main.c parse.c tcm_io.c userlist.c 
  Removed files:
    include              token.h 
    src                  token.c 
  Log:
  - nuked token.c and token.h
  - updated .depend
  - made the privmsg parser just use a simple strncmp(), the only command
    we accept via privmsg is .chat
  
  Revision  Changes    Path
  1.16      +0 -77     tcm-hybrid/include/token.h (dead)
  1.15      +21 -26    tcm-hybrid/src/.depend
  1.21      +0 -1      tcm-hybrid/src/Makefile.in
  1.99      +0 -1      tcm-hybrid/src/bothunt.c
  1.83      +0 -1      tcm-hybrid/src/commands.c
  1.67      +0 -3      tcm-hybrid/src/main.c
  1.18      +7 -12     tcm-hybrid/src/parse.c
  1.24      +0 -1      tcm-hybrid/src/tcm_io.c
  1.25      +0 -168    tcm-hybrid/src/token.c (dead)
  1.72      +0 -1      tcm-hybrid/src/userlist.c



jmallett    2002/05/25 12:14:39 EDT	(20020525_17)

  Modified files:
    include              logging.h tcm.h 
    src                  commands.c event.c logging.c main.c 
                         stdcmds.c 
  Log:
  Track total memory allocated over time.
  
  Release allocated memory for the log list on rehash.
  
  Fix some stylistic nits regarding using pointer values as booleans.
  
  Revision  Changes    Path
  1.6       +1 -0      tcm-hybrid/include/logging.h
  1.36      +2 -0      tcm-hybrid/include/tcm.h
  1.82      +1 -0      tcm-hybrid/src/commands.c
  1.7       +0 -2      tcm-hybrid/src/event.c
  1.31      +26 -3     tcm-hybrid/src/logging.c
  1.66      +9 -2      tcm-hybrid/src/main.c
  1.70      +3 -1      tcm-hybrid/src/stdcmds.c



db          2002/05/25 12:10:49 EDT	(20020525_16)

  Modified files:
    src                  tcm_io.c 
  Log:
  - fix comment is all
  
  Revision  Changes    Path
  1.23      +1 -1      tcm-hybrid/src/tcm_io.c



wcampbel    2002/05/25 12:08:46 EDT	(20020525_15)

  Modified files:
    src                  tcm_io.c 
  Log:
  Fix privmsg(), needed for msg tcm .chat
  
  Revision  Changes    Path
  1.22      +2 -2      tcm-hybrid/src/tcm_io.c



db          2002/05/25 11:57:58 EDT	(20020525_14)

  Modified files:
    src                  commands.c modules.c userlist.c 
  Log:
  - style
  
  Revision  Changes    Path
  1.81      +2 -10     tcm-hybrid/src/commands.c
  1.41      +42 -20    tcm-hybrid/src/modules.c
  1.71      +130 -106  tcm-hybrid/src/userlist.c



leeh        2002/05/25 11:49:42 EDT	(20020525_13)

  Modified files:
    include              tcm.h 
    src                  bothunt.c commands.c logging.c main.c 
                         stdcmds.c token.c userlist.c 
  Log:
  - added xmalloc() to account for malloc() failure
  
  Revision  Changes    Path
  1.35      +2 -0      tcm-hybrid/include/tcm.h
  1.98      +2 -19     tcm-hybrid/src/bothunt.c
  1.80      +0 -4      tcm-hybrid/src/commands.c
  1.30      +1 -7      tcm-hybrid/src/logging.c
  1.65      +20 -0     tcm-hybrid/src/main.c
  1.69      +0 -4      tcm-hybrid/src/stdcmds.c
  1.24      +1 -10     tcm-hybrid/src/token.c
  1.70      +0 -4      tcm-hybrid/src/userlist.c



wcampbel    2002/05/25 11:46:16 EDT	(20020525_12)

  Modified files:
    src                  .depend 
  Log:
  Update .depend
  
  Revision  Changes    Path
  1.14      +10 -1     tcm-hybrid/src/.depend



leeh        2002/05/25 11:36:28 EDT	(20020525_11)

  Modified files:
    include              modules.h tcm.h 
    src                  main.c modules.c 
  Log:
  - added some comments to the module stuff ive added
  - ripped out m_not_oper
  - moved m_unregistered and m_not_admin to modules.c
  
  Revision  Changes    Path
  1.24      +3 -0      tcm-hybrid/include/modules.h
  1.34      +0 -7      tcm-hybrid/include/tcm.h
  1.64      +0 -24     tcm-hybrid/src/main.c
  1.40      +61 -5     tcm-hybrid/src/modules.c



db          2002/05/25 11:11:18 EDT	(20020525_10)

  Modified files:
    include              tcm_io.h 
    src                  tcm_io.c userlist.c 
  Log:
  - redid notice/privmsg properly d'uh
  - style fix in userlist.c
  
  Revision  Changes    Path
  1.11      +2 -2      tcm-hybrid/include/tcm_io.h
  1.21      +21 -20    tcm-hybrid/src/tcm_io.c
  1.69      +2 -2      tcm-hybrid/src/userlist.c



leeh        2002/05/25 11:08:11 EDT	(20020525_9)

  Modified files:
    include              commands.h parse.h tcm.h 
    src                  commands.c main.c parse.c tcm_io.c 
  Log:
  - moved parse_args and expand_args to parse.c
  - ripped dccproc, added a cleaner version onto the end of parse_client
  - ripped last remaining remnants of the old dcc command handler
  
  Revision  Changes    Path
  1.13      +0 -23     tcm-hybrid/include/commands.h
  1.3       +5 -0      tcm-hybrid/include/parse.h
  1.33      +0 -1      tcm-hybrid/include/tcm.h
  1.79      +0 -47     tcm-hybrid/src/commands.c
  1.63      +0 -34     tcm-hybrid/src/main.c
  1.17      +95 -21    tcm-hybrid/src/parse.c
  1.20      +0 -44     tcm-hybrid/src/tcm_io.c



leeh        2002/05/25 08:34:26 EDT	(20020525_8)

  Modified files:
    include              modules.h 
    src                  bothunt.c commands.c main.c modules.c 
                         wingate.c 
  Log:
  - goodbye old modules system, hello new modules system
  
  Revision  Changes    Path
  1.23      +1 -3      tcm-hybrid/include/modules.h
  1.97      +2 -7      tcm-hybrid/src/bothunt.c
  1.78      +225 -291  tcm-hybrid/src/commands.c
  1.62      +1 -1      tcm-hybrid/src/main.c
  1.39      +19 -51    tcm-hybrid/src/modules.c
  1.34      +3 -8      tcm-hybrid/src/wingate.c



jmallett    2002/05/25 04:05:28 EDT	(20020525_7)

  Modified files:
    include              modules.h 
    src                  modules.c stdcmds.c 
  Log:
  Instead of using malloc() of constant amounts, use static-sized storage, as a
  part of a structure, or on the stack.
  
  Fix compile of modules.c on OpenBSD.
  
  Revision  Changes    Path
  1.22      +1 -1      tcm-hybrid/include/modules.h
  1.38      +4 -6      tcm-hybrid/src/modules.c
  1.68      +6 -51     tcm-hybrid/src/stdcmds.c



db          2002/05/25 02:42:18 EDT	(20020525_6)

  Modified files:
    src                  bothunt.c 
  Log:
  - style
  
  Revision  Changes    Path
  1.96      +8 -4      tcm-hybrid/src/bothunt.c



db          2002/05/25 02:39:32 EDT	(20020525_5)

  Modified files:
    include              serverif.h stdcmds.h tcm_io.h 
    src                  bothunt.c commands.c main.c stdcmds.c 
                         tcm_io.c 
  Log:
  - split out bindsocket into
    connect_to_server(), connect_to_dcc_ip()
  - change makeconn() into accept_dcc_connection()
  - now have connect_to_given_ip_port() which will attempt
    to connect to the given ip and port passed.
  
  more to come....
  
  Revision  Changes    Path
  1.23      +0 -1      tcm-hybrid/include/serverif.h
  1.20      +0 -2      tcm-hybrid/include/stdcmds.h
  1.10      +14 -4     tcm-hybrid/include/tcm_io.h
  1.95      +1 -6      tcm-hybrid/src/bothunt.c
  1.77      +14 -12    tcm-hybrid/src/commands.c
  1.61      +4 -125    tcm-hybrid/src/main.c
  1.67      +0 -31     tcm-hybrid/src/stdcmds.c
  1.19      +260 -18   tcm-hybrid/src/tcm_io.c



db          2002/05/24 22:51:47 EDT	(20020525_4)

  Modified files:
    include              bothunt.h tcm_io.h 
    src                  bothunt.c tcm_io.c 
  Log:
  - move makeconn into tcm_io.c
  
  Revision  Changes    Path
  1.29      +1 -2      tcm-hybrid/include/bothunt.h
  1.9       +1 -0      tcm-hybrid/include/tcm_io.h
  1.94      +2 -84     tcm-hybrid/src/bothunt.c
  1.18      +86 -0     tcm-hybrid/src/tcm_io.c



db          2002/05/24 22:40:42 EDT	(20020525_3)

  Modified files:
    src                  main.c 
  Log:
  - extern *optarg int optind are declared in unistd.h
  
  Revision  Changes    Path
  1.60      +0 -2      tcm-hybrid/src/main.c



db          2002/05/24 22:37:40 EDT	(20020525_2)

  Modified files:
    src                  commands.c logging.c modules.c parse.c 
                         stdcmds.c userlist.c 
  Log:
  - removed extern struct connections[] from these *.c files
    its defined in tcm_io.h
  
   Still more to do...
  
  Revision  Changes    Path
  1.76      +0 -1      tcm-hybrid/src/commands.c
  1.29      +0 -1      tcm-hybrid/src/logging.c
  1.37      +0 -2      tcm-hybrid/src/modules.c
  1.16      +0 -2      tcm-hybrid/src/parse.c
  1.66      +0 -3      tcm-hybrid/src/stdcmds.c
  1.68      +0 -1      tcm-hybrid/src/userlist.c



db          2002/05/24 22:33:38 EDT	(20020525_1)

  Modified files:
    include              bothunt.h serverif.h tcm_io.h 
    src                  wingate.c 
  Log:
  - move extern struct connections[] into tcm_io.h
  
  Revision  Changes    Path
  1.28      +0 -3      tcm-hybrid/include/bothunt.h
  1.22      +0 -16     tcm-hybrid/include/serverif.h
  1.8       +19 -0     tcm-hybrid/include/tcm_io.h
  1.33      +15 -7     tcm-hybrid/src/wingate.c



leeh        2002/05/24 22:16:53 EDT	(20020525_0)

  Modified files:
    include              modules.h 
    src                  modules.c parse.c 
  Log:
  - first pass at the shiny new dcc handler code
  
  Revision  Changes    Path
  1.21      +32 -0     tcm-hybrid/include/modules.h
  1.36      +95 -26    tcm-hybrid/src/modules.c
  1.15      +17 -0     tcm-hybrid/src/parse.c



leeh        2002/05/24 18:40:01 EDT	(20020524_20)

  Modified files:
    src                  tcm_io.c 
  Log:
  - flags = 0, not isoper..
  
  Revision  Changes    Path
  1.17      +0 -1      tcm-hybrid/src/tcm_io.c



leeh        2002/05/24 16:52:47 EDT	(20020524_19)

  Modified files:
    include              modules.h tcm.h 
    src                  bothunt.c commands.c main.c modules.c 
                         parse.c tcm_io.c userlist.c wingate.c 
  Log:
  - ripped out the last of that wierd handler code..
  
  Revision  Changes    Path
  1.20      +0 -26     tcm-hybrid/include/modules.h
  1.32      +0 -1      tcm-hybrid/include/tcm.h
  1.93      +2 -3      tcm-hybrid/src/bothunt.c
  1.75      +0 -1      tcm-hybrid/src/commands.c
  1.59      +0 -31     tcm-hybrid/src/main.c
  1.35      +0 -58     tcm-hybrid/src/modules.c
  1.14      +2 -3      tcm-hybrid/src/parse.c
  1.16      +4 -5      tcm-hybrid/src/tcm_io.c
  1.67      +4 -7      tcm-hybrid/src/userlist.c
  1.32      +0 -5      tcm-hybrid/src/wingate.c



db          2002/05/24 15:31:29 EDT	(20020524_18)

  Modified files:
    src                  wingate.c 
  Log:
  - style cleanups
  
  Revision  Changes    Path
  1.31      +23 -21    tcm-hybrid/src/wingate.c



leeh        2002/05/24 14:50:54 EDT	(20020524_17)

  Modified files:
    .                    Makefile.in 
    include              commands.h 
    src                  Makefile.in commands.c main.c wingate.c 
  Log:
  - byebye mr modules, you shall return soon.
  
  Revision  Changes    Path
  1.24      +1 -1      tcm-hybrid/Makefile.in
  1.12      +6 -0      tcm-hybrid/include/commands.h
  1.20      +3 -1      tcm-hybrid/src/Makefile.in
  1.74      +1 -31     tcm-hybrid/src/commands.c
  1.58      +7 -0      tcm-hybrid/src/main.c
  1.30      +1 -4      tcm-hybrid/src/wingate.c



leeh        2002/05/24 14:35:21 EDT	(20020524_16)

  Modified files:
    .                    Makefile.in 
    modules              Makefile.in 
  Log:
  - dont build in modules/, im about to repo move these modules to src/
  
  Revision  Changes    Path
  1.23      +2 -1      tcm-hybrid/Makefile.in
  1.12      +1 -2      tcm-hybrid/modules/Makefile.in



leeh        2002/05/24 14:29:24 EDT	(20020524_15)

  Modified files:
    etc                  userlist.cf 
    include              config.h tcm_io.h userlist.h 
    modules              commands.c 
    src                  bothunt.c tcm_io.c userlist.c 
  Log:
  - reverted config.h accidental changes
  - ripped TYPE_STAT and SEND_STATS, merged into TYPE_SPY/SEND_SPY
  
  Revision  Changes    Path
  1.20      +1 -2      tcm-hybrid/etc/userlist.cf
  1.51      +24 -5     tcm-hybrid/include/config.h
  1.7       +10 -11    tcm-hybrid/include/tcm_io.h
  1.37      +0 -1      tcm-hybrid/include/userlist.h
  1.73      +0 -3      tcm-hybrid/modules/commands.c
  1.92      +5 -5      tcm-hybrid/src/bothunt.c
  1.15      +0 -5      tcm-hybrid/src/tcm_io.c
  1.66      +0 -5      tcm-hybrid/src/userlist.c



leeh        2002/05/24 14:19:33 EDT	(20020524_14)

  Modified files:
    etc                  userlist.cf 
    include              commands.h config.h modules.h userlist.h 
    modules              commands.c wingate.c 
    src                  bothunt.c main.c modules.c parse.c 
                         tcm_io.c userlist.c 
  Log:
  - ripped out the O flag, with users gone its deprecated.  if you need
    to allow users to dcc, just dont give them flags.
  - TYPE_KLINE -> TYPE_SHOW_KLINES
  - why was TYPE_REGISTERED used to indicate they could kline? dumb.
    TYPE_REGISTERED -> TYPE_KLINE
  - set TYPE_OPER when someone registers, if they dont have it, they havent
    registered.
  - dropped down to three handlers, oper, registered oper, admin.
  
  Revision  Changes    Path
  1.19      +10 -14    tcm-hybrid/etc/userlist.cf
  1.11      +5 -65     tcm-hybrid/include/commands.h
  1.50      +5 -24     tcm-hybrid/include/config.h
  1.19      +0 -1      tcm-hybrid/include/modules.h
  1.36      +3 -3      tcm-hybrid/include/userlist.h
  1.72      +80 -89    tcm-hybrid/modules/commands.c
  1.29      +1 -1      tcm-hybrid/modules/wingate.c
  1.91      +3 -3      tcm-hybrid/src/bothunt.c
  1.57      +1 -2      tcm-hybrid/src/main.c
  1.34      +6 -21     tcm-hybrid/src/modules.c
  1.13      +1 -3      tcm-hybrid/src/parse.c
  1.14      +5 -8      tcm-hybrid/src/tcm_io.c
  1.65      +10 -13    tcm-hybrid/src/userlist.c



db          2002/05/24 11:38:35 EDT	(20020524_13)

  Modified files:
    include              tcm_io.h 
    modules              commands.c 
    src                  tcm_io.c 
  Log:
  - convert the actual sendtoalldcc function itself to send_to_all
    and in the process convert to using va_send_to_socket() to save code.
  
  Revision  Changes    Path
  1.6       +1 -1      tcm-hybrid/include/tcm_io.h
  1.71      +92 -47    tcm-hybrid/modules/commands.c
  1.13      +13 -17    tcm-hybrid/src/tcm_io.c



db          2002/05/24 11:17:52 EDT	(20020524_12)

  Modified files:
    include              tcm_io.h 
    modules              commands.c 
    src                  bothunt.c logging.c main.c modules.c 
                         parse.c stdcmds.c tcm_io.c userlist.c 
  Log:
  - renamed sendtoalldcc -> send_to_all (naming convention change)
    removed incoming_connnum, I will add a send_to_partyline() later
  
  Revision  Changes    Path
  1.5       +2 -3      tcm-hybrid/include/tcm_io.h
  1.70      +18 -33    tcm-hybrid/modules/commands.c
  1.90      +30 -54    tcm-hybrid/src/bothunt.c
  1.28      +2 -2      tcm-hybrid/src/logging.c
  1.56      +2 -2      tcm-hybrid/src/main.c
  1.33      +10 -20    tcm-hybrid/src/modules.c
  1.12      +5 -9      tcm-hybrid/src/parse.c
  1.65      +12 -18    tcm-hybrid/src/stdcmds.c
  1.12      +2 -4      tcm-hybrid/src/tcm_io.c
  1.64      +4 -6      tcm-hybrid/src/userlist.c



db          2002/05/24 11:01:34 EDT	(20020524_11)

  Modified files:
    include              tcm.h 
    modules              wingate.c 
    src                  bothunt.c event.c main.c tcm_io.c 
  Log:
  - rename CurrentTime -> current_time for naming convention consistency
  
  Revision  Changes    Path
  1.31      +1 -1      tcm-hybrid/include/tcm.h
  1.28      +6 -6      tcm-hybrid/modules/wingate.c
  1.89      +23 -23    tcm-hybrid/src/bothunt.c
  1.6       +5 -5      tcm-hybrid/src/event.c
  1.55      +1 -1      tcm-hybrid/src/main.c
  1.11      +5 -5      tcm-hybrid/src/tcm_io.c



db          2002/05/24 10:51:18 EDT	(20020524_10)

  Modified files:
    src                  main.c 
  Log:
  - errno is defined in errno.h
  
  Revision  Changes    Path
  1.54      +0 -1      tcm-hybrid/src/main.c



leeh        2002/05/24 10:35:22 EDT	(20020524_9)

  Modified files:
    include              userlist.h 
    src                  parse.c tcm_io.c 
  Log:
  - missed a bit
  
  Revision  Changes    Path
  1.35      +0 -1      tcm-hybrid/include/userlist.h
  1.11      +3 -6      tcm-hybrid/src/parse.c
  1.10      +1 -1      tcm-hybrid/src/tcm_io.c



leeh        2002/05/24 10:32:37 EDT	(20020524_8)

  Modified files:
    etc                  tcm.cf userlist.cf 
    include              commands.h config.h 
    modules              commands.c 
    src                  bothunt.c userlist.c 
  Log:
  - ripped out optional oper only code
  
  Revision  Changes    Path
  1.26      +0 -3      tcm-hybrid/etc/tcm.cf
  1.18      +0 -4      tcm-hybrid/etc/userlist.cf
  1.10      +0 -1      tcm-hybrid/include/commands.h
  1.49      +1 -5      tcm-hybrid/include/config.h
  1.69      +0 -35     tcm-hybrid/modules/commands.c
  1.88      +6 -33     tcm-hybrid/src/bothunt.c
  1.63      +4 -148    tcm-hybrid/src/userlist.c



leeh        2002/05/24 10:14:01 EDT	(20020524_7)

  Modified files:
    include              tcm_io.h userlist.h 
    modules              commands.c 
    src                  bothunt.c event.c logging.c main.c 
                         modules.c parse.c stdcmds.c tcm_io.c 
                         userlist.c 
  Log:
  - merged TYPE_LINK and TYPE_MOTD into TYPE_SPY (+y)
    will probably merge stats here later, but its a start
  - initial start at getting rid of the optionally oper only stuff,
    it should be mandatory, a user logging into tcm just wont happen.
  - turned the SEND_* stuff for sendtoalldcc() into a proper bitmask, and
    got rid of the _ONLY crap off the end.
  .
  
  Revision  Changes    Path
  1.4       +11 -14    tcm-hybrid/include/tcm_io.h
  1.34      +3 -4      tcm-hybrid/include/userlist.h
  1.68      +44 -66    tcm-hybrid/modules/commands.c
  1.87      +59 -71    tcm-hybrid/src/bothunt.c
  1.5       +1 -0      tcm-hybrid/src/event.c
  1.27      +4 -6      tcm-hybrid/src/logging.c
  1.53      +4 -5      tcm-hybrid/src/main.c
  1.32      +12 -12    tcm-hybrid/src/modules.c
  1.10      +7 -6      tcm-hybrid/src/parse.c
  1.64      +12 -12    tcm-hybrid/src/stdcmds.c
  1.9       +21 -27    tcm-hybrid/src/tcm_io.c
  1.62      +10 -15    tcm-hybrid/src/userlist.c



wcampbel    2002/05/24 09:19:28 EDT	(20020524_6)

  Modified files:
    modules              .depend 
    src                  .depend 
  Log:
  Dependency updates
  
  Revision  Changes    Path
  1.13      +2 -1      tcm-hybrid/modules/.depend
  1.13      +13 -11    tcm-hybrid/src/.depend



leeh        2002/05/24 08:24:47 EDT	(20020524_5)

  Modified files:
    include              config.h 
  Log:
  - dont enable debugmode by default.
  
  Revision  Changes    Path
  1.48      +1 -1      tcm-hybrid/include/config.h



bill        2002/05/24 01:34:19 EDT	(20020524_4)

  Modified files:
    etc                  tcm.cf 
    include              config.h userlist.h 
    modules              wingate.c 
    src                  stdcmds.c 
  Log:
  - added squid proxy detection
  - fixed wingate/socks4/socks5 detection
  - stop exempt users' violations from being reported
  
  Revision  Changes    Path
  1.25      +2 -0      tcm-hybrid/etc/tcm.cf
  1.47      +22 -5     tcm-hybrid/include/config.h
  1.33      +1 -1      tcm-hybrid/include/userlist.h
  1.27      +299 -45   tcm-hybrid/modules/wingate.c
  1.63      +1 -1      tcm-hybrid/src/stdcmds.c



db          2002/05/24 00:04:27 EDT	(20020524_3)

  Modified files:
    include              modules.h serverif.h tcm_io.h 
    modules              commands.c 
    src                  bothunt.c event.c logging.c main.c 
                         modules.c parse.c stdcmds.c tcm_io.c 
                         userlist.c 
  Log:
  - first step to getting rid of global incoming_connnum
  - also moved sendtoalldcc into tcm_io.c (might not be the right place...)
  - modified all sentoalldcc to include extra parm
  - all sendtoalldcc print_to_server print_to_socket will have to verify
    superflous \n are removed in strings used in these functions
  
  More to do....
  
  Revision  Changes    Path
  1.18      +0 -1      tcm-hybrid/include/modules.h
  1.21      +0 -23     tcm-hybrid/include/serverif.h
  1.3       +20 -0     tcm-hybrid/include/tcm_io.h
  1.67      +276 -244  tcm-hybrid/modules/commands.c
  1.86      +78 -42    tcm-hybrid/src/bothunt.c
  1.4       +4 -4      tcm-hybrid/src/event.c
  1.26      +9 -5      tcm-hybrid/src/logging.c
  1.52      +4 -107    tcm-hybrid/src/main.c
  1.31      +37 -19    tcm-hybrid/src/modules.c
  1.9       +56 -12    tcm-hybrid/src/parse.c
  1.62      +25 -17    tcm-hybrid/src/stdcmds.c
  1.8       +110 -2    tcm-hybrid/src/tcm_io.c
  1.61      +7 -6      tcm-hybrid/src/userlist.c



db          2002/05/23 22:31:58 EDT	(20020524_2)

  Modified files:
    include              stdcmds.h tcm_io.h 
    modules              commands.c 
    src                  bothunt.c event.c logging.c main.c 
                         modules.c parse.c stdcmds.c tcm_io.c 
                         userlist.c 
  Log:
  - removed prnt replaced with print_to_socket()
  - removed toserv replaced with print_to_esrver()
  
  Revision  Changes    Path
  1.19      +2 -1      tcm-hybrid/include/stdcmds.h
  1.2       +2 -1      tcm-hybrid/include/tcm_io.h
  1.66      +113 -105  tcm-hybrid/modules/commands.c
  1.85      +20 -20    tcm-hybrid/src/bothunt.c
  1.3       +4 -4      tcm-hybrid/src/event.c
  1.25      +8 -8      tcm-hybrid/src/logging.c
  1.51      +16 -16    tcm-hybrid/src/main.c
  1.30      +7 -7      tcm-hybrid/src/modules.c
  1.8       +8 -8      tcm-hybrid/src/parse.c
  1.61      +92 -115   tcm-hybrid/src/stdcmds.c
  1.7       +62 -33    tcm-hybrid/src/tcm_io.c
  1.60      +12 -5     tcm-hybrid/src/userlist.c



leeh        2002/05/23 19:27:02 EDT	(20020524_1)

  Modified files:
    include              modules.h 
    modules              commands.c 
    src                  main.c modules.c parse.c tcm_io.c 
  Log:
  - handler code.. explode!
  
  Revision  Changes    Path
  1.17      +4 -12     tcm-hybrid/include/modules.h
  1.65      +2 -7      tcm-hybrid/modules/commands.c
  1.50      +0 -13     tcm-hybrid/src/main.c
  1.29      +1 -25     tcm-hybrid/src/modules.c
  1.7       +2 -5      tcm-hybrid/src/parse.c
  1.6       +1 -2      tcm-hybrid/src/tcm_io.c



leeh        2002/05/23 19:09:47 EDT	(20020524_0)

  Modified files:
    include              modules.h 
    src                  main.c modules.c parse.c tcm_io.c 
  Log:
  - ripped out more handler code
  
  Revision  Changes    Path
  1.16      +0 -6      tcm-hybrid/include/modules.h
  1.49      +2 -14     tcm-hybrid/src/main.c
  1.28      +1 -16     tcm-hybrid/src/modules.c
  1.6       +3 -4      tcm-hybrid/src/parse.c
  1.5       +1 -3      tcm-hybrid/src/tcm_io.c



bill        2002/05/23 17:59:50 EDT	(20020523_9)

  Modified files:
    .                    Makefile.in configure 
    autoconf             configure.in 
    modules              Makefile.in 
    src                  Makefile.in 
  Log:
  - few modifications to the makefile, making it easier to turn on verbose output
  
  Revision  Changes    Path
  1.22      +5 -5      tcm-hybrid/Makefile.in
  1.18      +2 -1      tcm-hybrid/autoconf/configure.in
  1.18      +96 -83    tcm-hybrid/configure
  1.11      +1 -4      tcm-hybrid/modules/Makefile.in
  1.19      +2 -6      tcm-hybrid/src/Makefile.in



leeh        2002/05/23 17:27:50 EDT	(20020523_8)

  Modified files:
    include              modules.h 
    src                  main.c modules.c parse.c 
  Log:
  - nuked handlers for wallops and stats functions.
  
  Revision  Changes    Path
  1.15      +0 -14     tcm-hybrid/include/modules.h
  1.48      +0 -13     tcm-hybrid/src/main.c
  1.27      +0 -35     tcm-hybrid/src/modules.c
  1.5       +6 -14     tcm-hybrid/src/parse.c



leeh        2002/05/23 12:05:53 EDT	(20020523_7)

  Modified files:
    src                  tcm_io.c 
  Log:
  - debugcode needs to be in the right place..
  
  Revision  Changes    Path
  1.4       +3 -4      tcm-hybrid/src/tcm_io.c



wcampbel    2002/05/23 10:10:59 EDT	(20020523_6)

  Modified files:
    modules              .depend 
    src                  .depend 
  Log:
  Update .depend's
  
  Revision  Changes    Path
  1.12      +1 -12     tcm-hybrid/modules/.depend
  1.12      +28 -9     tcm-hybrid/src/.depend



db          2002/05/23 09:38:19 EDT	(20020523_5)

  Modified files:
    include              modules.h 
    modules              wingate.c 
    src                  modules.c 
  Log:
  - There is no cur_time it is now CurrentTime
  
  Revision  Changes    Path
  1.14      +0 -3      tcm-hybrid/include/modules.h
  1.26      +4 -5      tcm-hybrid/modules/wingate.c
  1.26      +3 -2      tcm-hybrid/src/modules.c



leeh        2002/05/23 05:51:01 EDT	(20020523_4)

  Modified files:
    src                  bothunt.c parse.c 
  Log:
  - some minor include cleanups
  
  Revision  Changes    Path
  1.84      +5 -22     tcm-hybrid/src/bothunt.c
  1.4       +0 -16     tcm-hybrid/src/parse.c



einride     2002/05/23 04:57:53 EDT	(20020523_3)

  Modified files:
    include              parse.h 
    src                  parse.c 
  Log:
  And once more. I'll check out ALL warnings before i commit fixes next time.
  
  Revision  Changes    Path
  1.2       +1 -1      tcm-hybrid/include/parse.h
  1.3       +1 -1      tcm-hybrid/src/parse.c



einride     2002/05/23 04:53:49 EDT	(20020523_2)

  Modified files:
    src                  main.c parse.c 
  Log:
  Didn't compile with SERVICES defined... small changes.
  
  Revision  Changes    Path
  1.47      +4 -0      tcm-hybrid/src/main.c
  1.2       +1 -1      tcm-hybrid/src/parse.c



db          2002/05/23 02:41:57 EDT	(20020523_1)

  Modified files:
    include              bothunt.h 
    src                  bothunt.c tcm_io.c 
  Log:
  - optimisation in tcm_io.c getline
  - cleanup of bothunt.c move definitions into bothunt.h
  
  Revision  Changes    Path
  1.27      +35 -0     tcm-hybrid/include/bothunt.h
  1.83      +21 -123   tcm-hybrid/src/bothunt.c
  1.3       +25 -26    tcm-hybrid/src/tcm_io.c



db          2002/05/22 21:57:23 EDT	(20020523_0)

  Modified files:
    src                  tcm_io.c 
  Log:
  - fixed get_line
    sorry folks.
    I had forgotten to take care of the case of a line continued into
    the next read.
  
  Groceries come first!
  Still more to come....
  
  Revision  Changes    Path
  1.2       +40 -3     tcm-hybrid/src/tcm_io.c



leeh        2002/05/22 18:17:38 EDT	(20020522_9)

  Removed files:
    modules              serverif.c 
  Log:
  - diediedie
  
  Revision  Changes    Path
  1.72      +0 -1389   tcm-hybrid/modules/serverif.c (dead)



leeh        2002/05/22 18:09:29 EDT	(20020522_8)

  Modified files:
    src                  userlist.c 
  Log:
  - letsseehowmuchcodewecancramintosuchashortspace.
    I dont think so.
  
  Revision  Changes    Path
  1.59      +40 -18    tcm-hybrid/src/userlist.c



leeh        2002/05/22 18:03:37 EDT	(20020522_7)

  Modified files:
    .                    Makefile.in 
    include              bothunt.h config.h modules.h serverif.h 
                         tcm.h 
    modules              Makefile.in wingate.c 
    src                  Makefile.in bothunt.c main.c modules.c 
                         stdcmds.c 
  Added files:
    include              parse.h tcm_io.h 
    src                  parse.c tcm_io.c 
  Log:
  - ugh.  gutted most modules from tcm, stuff can be remodularised
    individually later.
  
  Revision  Changes    Path
  1.21      +10 -0     tcm-hybrid/Makefile.in
  1.26      +11 -0     tcm-hybrid/include/bothunt.h
  1.46      +1 -1      tcm-hybrid/include/config.h
  1.13      +0 -1      tcm-hybrid/include/modules.h
  1.1       +18 -0     tcm-hybrid/include/parse.h (new)
  1.20      +0 -7      tcm-hybrid/include/serverif.h
  1.30      +6 -2      tcm-hybrid/include/tcm.h
  1.1       +21 -0     tcm-hybrid/include/tcm_io.h (new)
  1.10      +1 -3      tcm-hybrid/modules/Makefile.in
  1.25      +1 -2      tcm-hybrid/modules/wingate.c
  1.18      +12 -9     tcm-hybrid/src/Makefile.in
  1.82      +2 -21     tcm-hybrid/src/bothunt.c
  1.46      +36 -7     tcm-hybrid/src/main.c
  1.25      +2 -5      tcm-hybrid/src/modules.c
  1.1       +826 -0    tcm-hybrid/src/parse.c (new)
  1.60      +0 -28     tcm-hybrid/src/stdcmds.c
  1.1       +560 -0    tcm-hybrid/src/tcm_io.c (new)



db          2002/05/22 11:08:47 EDT	(20020522_6)

  Modified files:
    include              tcm.h 
    modules              bothunt.c serverif.c 
    src                  main.c 
  Log:
  - cleaned up m_gline, removed the mallocs
  - added new expand_args function
  - converted other code to use expand_args
  
  COMPILES but UNTESTED :-(
  
  I aint done yet.
  
  Revision  Changes    Path
  1.29      +1 -1      tcm-hybrid/include/tcm.h
  1.81      +76 -67    tcm-hybrid/modules/bothunt.c
  1.71      +1 -10     tcm-hybrid/modules/serverif.c
  1.45      +34 -0     tcm-hybrid/src/main.c



wcampbel    2002/05/22 08:57:17 EDT	(20020522_5)

  Modified files:
    modules              bothunt.c 
  Log:
  bothunt.c: In function `remove_gline':
  bothunt.c:222: warning: assignment makes integer from pointer without a cast
  
  Can't set NULL to a time_t.
  
  Revision  Changes    Path
  1.80      +1 -1      tcm-hybrid/modules/bothunt.c



wcampbel    2002/05/22 08:38:15 EDT	(20020522_4)

  Modified files:
    .                    configure 
    autoconf             configure.in 
    include              setup.h.in tcm.h 
    src                  main.c 
  Log:
  autoconf magic for strlcat() and strlcpy(), stolen from Hybrid 7.
  strlcpy and strlcat taken originally from OpenSSL.
  
  Revision  Changes    Path
  1.17      +1 -1      tcm-hybrid/autoconf/configure.in
  1.17      +1 -1      tcm-hybrid/configure
  1.6       +7 -1      tcm-hybrid/include/setup.h.in
  1.28      +9 -0      tcm-hybrid/include/tcm.h
  1.44      +85 -0     tcm-hybrid/src/main.c



db          2002/05/21 22:33:09 EDT	(20020522_3)

  Modified files:
    include              bothunt.h serverif.h tcm.h 
    modules              bothunt.c 
  Log:
  - moved prototype for makeconn into bothunt.h for now changed to int
    instead of char result. like why?
  - removed a pile of mallocs() in bothunt.c
  - style cleanups
  
    I'm not done yet. more changes coming...
  
  Revision  Changes    Path
  1.25      +7 -7      tcm-hybrid/include/bothunt.h
  1.19      +0 -2      tcm-hybrid/include/serverif.h
  1.27      +3 -0      tcm-hybrid/include/tcm.h
  1.79      +148 -129  tcm-hybrid/modules/bothunt.c



wcampbel    2002/05/21 21:52:42 EDT	(20020522_2)

  Modified files:
    modules              commands.c 
    src                  main.c 
  Log:
  Revision to umode +x, actually make it work...
  
  Revision  Changes    Path
  1.64      +3 -0      tcm-hybrid/modules/commands.c
  1.43      +1 -1      tcm-hybrid/src/main.c



db          2002/05/21 21:40:12 EDT	(20020522_1)

  Modified files:
    src                  logging.c 
  Log:
  - removed a pile of casts on NULLs
  - removed unnecessary spaces
  
  Revision  Changes    Path
  1.24      +16 -16    tcm-hybrid/src/logging.c



wcampbel    2002/05/21 21:34:32 EDT	(20020522_0)

  Modified files:
    etc                  userlist.cf 
    help                 help.umode 
    include              serverif.h userlist.h 
    modules              bothunt.c 
    src                  main.c userlist.c 
  Log:
  Add tcm usermode +x, and move server introduction/split notices into
    that usermode.  Opers really don't need this by default.
  
  Revision  Changes    Path
  1.17      +1 -0      tcm-hybrid/etc/userlist.cf
  1.3       +1 -0      tcm-hybrid/help/help.umode
  1.18      +1 -0      tcm-hybrid/include/serverif.h
  1.32      +1 -0      tcm-hybrid/include/userlist.h
  1.78      +2 -2      tcm-hybrid/modules/bothunt.c
  1.42      +5 -0      tcm-hybrid/src/main.c
  1.58      +4 -0      tcm-hybrid/src/userlist.c



wcampbel    2002/05/21 18:09:44 EDT	(20020521_4)

  Modified files:
    modules              bothunt.c 
  Log:
  Cleanup of on_stats_i()
  Only set exemptions from I:/auth flags that are designed to provide some
    sort of protection.  Do not set exemptions for + - or $
  
  Revision  Changes    Path
  1.77      +12 -15    tcm-hybrid/modules/bothunt.c



wcampbel    2002/05/21 17:29:32 EDT	(20020521_3)

  Modified files:
    src                  stdcmds.c 
  Log:
  Oops, JOIN and MODE sent when there's no channel specified :)
  
  Fixed for you Lee.
  
  Revision  Changes    Path
  1.59      +4 -0      tcm-hybrid/src/stdcmds.c



db          2002/05/20 23:06:21 EDT	(20020521_2)

  Modified files:
    modules              serverif.c 
  Log:
  - ignore blank lines in parse_args()
  
  Revision  Changes    Path
  1.70      +13 -4     tcm-hybrid/modules/serverif.c



wcampbel    2002/05/20 22:12:59 EDT	(20020521_1)

  Modified files:
    modules              bothunt.c 
  Log:
  Minor off-by-one in the "*** Notice -- Received SQUIT ..." message handling.
  
  Revision  Changes    Path
  1.76      +1 -1      tcm-hybrid/modules/bothunt.c



wcampbel    2002/05/20 20:46:50 EDT	(20020521_0)

  Modified files:
    src                  userlist.c 
  Log:
  Make SIGHUP semantics the same as .rehash semantics (don't wipe out O:
    lines read from STATS o unless you are willing to reload them)
  
  Revision  Changes    Path
  1.57      +7 -3      tcm-hybrid/src/userlist.c



wcampbel    2002/05/20 17:51:16 EDT	(20020520_13)

  Modified files:
    modules              bothunt.c 
  Log:
  Massive cleanup to on_stats_o(), the other on_stats_*() need fixing as well,
    but this is a start.  The semantics have changed, *@host ircd O: lines
    are permitted, user@* and *@* are not.
  
  Revision  Changes    Path
  1.75      +13 -62    tcm-hybrid/modules/bothunt.c



wcampbel    2002/05/20 15:05:13 EDT	(20020520_12)

  Modified files:
    src                  userlist.c 
  Log:
  Don't allow *@* or user@* O: lines.  We block them on STATS o, but not
    in the userlist
  
  Revision  Changes    Path
  1.56      +4 -0      tcm-hybrid/src/userlist.c



wcampbel    2002/05/20 14:42:28 EDT	(20020520_11)

  Modified files:
    help                 help.umode 
    include              config.h 
    src                  main.c 
  Log:
  Sanitize ENABLE_W_FLAG...+W is only to see OPERWALL/WALLOPS, +o is to see
    and send LOCOPS.  They do not belong together in a tangled mess!
  Corrected sending of OPERWALL and WALLOPS messages to tcm partyline opers
    to properly respect the +W and +o flags.
  
  Revision  Changes    Path
  1.2       +1 -0      tcm-hybrid/help/help.umode
  1.45      +3 -2      tcm-hybrid/include/config.h
  1.41      +5 -4      tcm-hybrid/src/main.c



wcampbel    2002/05/20 14:15:44 EDT	(20020520_10)

  Modified files:
    modules              .depend 
  Log:
  Update dependencies for the addition of numeric.h
  
  Revision  Changes    Path
  1.11      +3 -3      tcm-hybrid/modules/.depend



db          2002/05/20 12:58:58 EDT	(20020520_9)

  Modified files:
    modules              serverif.c 
  Added files:
    include              numeric.h 
  Log:
  - added numeric.h make serverif.c use numeric.h. I got tired of raw
    numeric decimals.
  
  Revision  Changes    Path
  1.1       +247 -0    tcm-hybrid/include/numeric.h (new)
  1.69      +20 -18    tcm-hybrid/modules/serverif.c



wcampbel    2002/05/20 08:58:30 EDT	(20020520_8)

  Modified files:
    modules              commands.c 
  Log:
  Make .help ? work
  
  Revision  Changes    Path
  1.63      +2 -2      tcm-hybrid/modules/commands.c



wcampbel    2002/05/20 08:48:44 EDT	(20020520_7)

  Modified files:
    logs                 .cvsignore 
  Log:
  Add error.log to logs/.cvsignore
  
  Revision  Changes    Path
  1.3       +1 -0      tcm-hybrid/logs/.cvsignore



wcampbel    2002/05/20 08:46:35 EDT	(20020520_6)

  Modified files:
    .                    configure 
    autoconf             configure.in 
    modules              .depend Makefile.in 
    src                  .depend 
  Log:
  make depend in modules/ now creates usable .depend files (blah.so instead
    of blah.o).  This change forces people who make depend to have sed on their
    machines.
  Detect sed with autoconf.
  Update .depend files for the .so change and the addition of the event system.
  
  Revision  Changes    Path
  1.16      +1 -0      tcm-hybrid/autoconf/configure.in
  1.16      +96 -60    tcm-hybrid/configure
  1.10      +13 -12    tcm-hybrid/modules/.depend
  1.9       +4 -1      tcm-hybrid/modules/Makefile.in
  1.11      +6 -3      tcm-hybrid/src/.depend



db          2002/05/20 01:31:06 EDT	(20020520_5)

  Modified files:
    include              config.h serverif.h 
    modules              bothunt.c commands.c serverif.c 
    src                  event.c logging.c main.c modules.c 
                         stdcmds.c 
  Log:
  - ripped out last remnant of gracefuldie ewww
  - style fixes
  - using event code to run events now
  - fixed function names so they start at first char of line
  
    Probably more, but this is enough for tonight. I still don't understand
  the tunafish thing though.
  
  Revision  Changes    Path
  1.44      +2 -0      tcm-hybrid/include/config.h
  1.17      +0 -1      tcm-hybrid/include/serverif.h
  1.74      +7 -7      tcm-hybrid/modules/bothunt.c
  1.62      +11 -0     tcm-hybrid/modules/commands.c
  1.68      +78 -78    tcm-hybrid/modules/serverif.c
  1.2       +5 -4      tcm-hybrid/src/event.c
  1.23      +1 -1      tcm-hybrid/src/logging.c
  1.40      +38 -95    tcm-hybrid/src/main.c
  1.24      +2 -2      tcm-hybrid/src/modules.c
  1.58      +227 -182  tcm-hybrid/src/stdcmds.c



db          2002/05/19 21:59:57 EDT	(20020520_4)

  Modified files:
    include              serverif.h tcm.h 
    modules              serverif.c 
    src                  Makefile.in main.c 
  Added files:
    include              event.h 
    src                  event.c 
  Log:
  - stole the event code from ircd-hybrid-7
    it does not do anything useful yet but does get initialised at start
  
  Revision  Changes    Path
  1.1       +47 -0     tcm-hybrid/include/event.h (new)
  1.16      +0 -2      tcm-hybrid/include/serverif.h
  1.26      +2 -0      tcm-hybrid/include/tcm.h
  1.67      +11 -13    tcm-hybrid/modules/serverif.c
  1.17      +1 -0      tcm-hybrid/src/Makefile.in
  1.1       +271 -0    tcm-hybrid/src/event.c (new)
  1.39      +20 -26    tcm-hybrid/src/main.c



db          2002/05/19 21:29:32 EDT	(20020520_3)

  Modified files:
    modules              serverif.c 
    src                  logging.c 
  Log:
  - reformatted logging.c so all function names start in first char
  - fixed bug I introduced with "unknown commands"
  
    nearly done. just a bit more to go...
  
  Revision  Changes    Path
  1.66      +3 -6      tcm-hybrid/modules/serverif.c
  1.22      +33 -29    tcm-hybrid/src/logging.c



db          2002/05/19 21:15:56 EDT	(20020520_2)

  Modified files:
    include              userlist.h 
    modules              commands.c serverif.c 
    src                  userlist.c 
  Log:
  - I don't like mixing c++ comments with c personally
  - move local_ip() into userlist.c
  - fix stupid in m_help with argc < 2
  
  Revision  Changes    Path
  1.31      +18 -14    tcm-hybrid/include/userlist.h
  1.61      +5 -3      tcm-hybrid/modules/commands.c
  1.65      +3 -62     tcm-hybrid/modules/serverif.c
  1.55      +63 -0     tcm-hybrid/src/userlist.c



wcampbel    2002/05/19 20:52:53 EDT	(20020520_1)

  Modified files:
    .                    configure 
    autoconf             configure.in 
    include              config.h setup.h.in 
    src                  main.c 
  Log:
  Remove the last remnants of FORCE_CORE
  Use autoconf to protect setup_corefile() on systems that don't have
    setrlimit()
  
  Revision  Changes    Path
  1.15      +2 -1      tcm-hybrid/autoconf/configure.in
  1.15      +56 -1     tcm-hybrid/configure
  1.43      +0 -6      tcm-hybrid/include/config.h
  1.5       +7 -1      tcm-hybrid/include/setup.h.in
  1.38      +8 -0      tcm-hybrid/src/main.c



db          2002/05/19 20:21:36 EDT	(20020520_0)

  Modified files:
    include              serverif.h 
    modules              bothunt.c serverif.c 
    src                  main.c 
  Log:
  - renamed rdpkt as read_packet
  - redid read_packet buffer reads completely
    added separate function (get_line) to build buffer
  - pre-allocate buffer space in struct connections, no more malloc for that
  - removed the signal handler on SIGSEV all it ever did was make debugging
    harder for us
  - made core size unlimited as if old option FORCE_CORE always present
  - re-did argv[] parser as separate function (parse_client)
  - renamed serverproc as parse_server
  - all events handled the same way at the same time in the I/O loop
  
    I have more to do, but this is a start.
  
  Revision  Changes    Path
  1.15      +2 -2      tcm-hybrid/include/serverif.h
  1.73      +0 -11     tcm-hybrid/modules/bothunt.c
  1.64      +208 -144  tcm-hybrid/modules/serverif.c
  1.37      +5 -24     tcm-hybrid/src/main.c



wcampbel    2002/05/19 17:13:31 EDT	(20020519_3)

  Modified files:
    modules              commands.c 
  Log:
  .disconnect (tcm's /kill equivalent) should be admin only
  
  Revision  Changes    Path
  1.60      +1 -1      tcm-hybrid/modules/commands.c



wcampbel    2002/05/19 17:08:21 EDT	(20020519_2)

  Modified files:
    modules              commands.c 
  Log:
  Fixed .quit, it should alias .close, not .disconnect.
  .close simply closes the sender's DCC connection, so it should NOT be admin
    only...
  
  Revision  Changes    Path
  1.59      +2 -2      tcm-hybrid/modules/commands.c



wcampbel    2002/05/19 12:11:35 EDT	(20020519_1)

  Modified files:
    src                  userlist.c 
  Log:
  Change the bzero() to memset(), it's a better fix and doesn't need strings.h
  
  Revision  Changes    Path
  1.54      +1 -3      tcm-hybrid/src/userlist.c



wcampbel    2002/05/19 10:27:31 EDT	(20020519_0)

  Modified files:
    modules              bothunt.c commands.c serverif.c 
    src                  main.c stdcmds.c userlist.c 
  Log:
  Solaris fixes (headers, casts, INADDR_NONE kludge)
  
  Revision  Changes    Path
  1.72      +2 -2      tcm-hybrid/modules/bothunt.c
  1.58      +4 -0      tcm-hybrid/modules/commands.c
  1.63      +2 -1      tcm-hybrid/modules/serverif.c
  1.36      +1 -1      tcm-hybrid/src/main.c
  1.57      +5 -1      tcm-hybrid/src/stdcmds.c
  1.53      +2 -7      tcm-hybrid/src/userlist.c



db          2002/05/17 22:53:22 EDT	(20020518_2)

  Modified files:
    modules              commands.c serverif.c 
    src                  logging.c main.c 
  Log:
  - reworked select loop so it times out after 1 second. This should
    be dropped a bit for proper event handling.
  - reworked server timeout
  - removed unnecessary includes of select.h
  
  Revision  Changes    Path
  1.57      +0 -3      tcm-hybrid/modules/commands.c
  1.62      +45 -31    tcm-hybrid/modules/serverif.c
  1.21      +0 -3      tcm-hybrid/src/logging.c
  1.35      +0 -3      tcm-hybrid/src/main.c



wcampbel    2002/05/17 22:21:16 EDT	(20020518_1)

  Modified files:
    etc                  tcm.cf 
    include              stdcmds.h userlist.h 
    modules              bothunt.c commands.c serverif.c 
    src                  stdcmds.c userlist.c 
  Log:
  Add a mode field to the C: line in tcm.cf, allowing the administrator
  to specify a set of modes to try to maintain in it's channel.
  
  Also, redid how tcm sets modes and keys with a single set_modes() call.
  
  Removed set_key() and (almost) all explicit channel MODE commands.
  
  Revision  Changes    Path
  1.24      +7 -0      tcm-hybrid/etc/tcm.cf
  1.18      +1 -1      tcm-hybrid/include/stdcmds.h
  1.30      +2 -0      tcm-hybrid/include/userlist.h
  1.71      +2 -1      tcm-hybrid/modules/bothunt.c
  1.56      +2 -3      tcm-hybrid/modules/commands.c
  1.61      +12 -25    tcm-hybrid/modules/serverif.c
  1.56      +13 -3     tcm-hybrid/src/stdcmds.c
  1.52      +6 -1      tcm-hybrid/src/userlist.c



wcampbel    2002/05/17 19:35:35 EDT	(20020518_0)

  Modified files:
    include              config.h 
    modules              serverif.c 
  Log:
  Move the define's for the DCC ports into config.h, with a note to
  administrators so that they can configure tcm to run through firewalls
  better.
  
  Revision  Changes    Path
  1.42      +10 -0     tcm-hybrid/include/config.h
  1.60      +0 -3      tcm-hybrid/modules/serverif.c



wcampbel    2002/05/13 18:44:03 EDT	(20020513_2)

  Modified files:
    include              config.h 
  Log:
  Undef QUOTE by default
  Fix an incorrect services setting (future EFnet related)
  
  Revision  Changes    Path
  1.41      +2 -2      tcm-hybrid/include/config.h



bill        2002/05/13 18:36:41 EDT	(20020513_1)

  Modified files:
    include              config.h 
    modules              bothunt.c 
    src                  stdcmds.c 
  Log:
  - fixed link look detection
  - more aggressive default link looker settings
  - non-idented klines will now use ~* as a default usermask, rather than *
  
  Revision  Changes    Path
  1.40      +1 -1      tcm-hybrid/include/config.h
  1.70      +25 -60    tcm-hybrid/modules/bothunt.c
  1.55      +1 -1      tcm-hybrid/src/stdcmds.c



wcampbel    2002/05/13 11:12:29 EDT	(20020513_0)

  Modified files:
    src                  main.c 
  Log:
  Fixed m_not_* and m_unregistered to print their messages correctly.
  
  Revision  Changes    Path
  1.34      +5 -3      tcm-hybrid/src/main.c



wcampbel    2002/05/10 20:39:24 EDT	(20020511_0)

  Modified files:
    modules              commands.c 
  Log:
  Fixed a format string bug with .op
  
  Revision  Changes    Path
  1.55      +1 -1      tcm-hybrid/modules/commands.c



bill        2002/05/09 20:26:32 EDT	(20020510_1)

  Modified files:
    include              commands.h config.h stdcmds.h tcm.h 
                         userlist.h 
    modules              bothunt.c commands.c 
    src                  stdcmds.c 
  Log:
  - misc code cleanups
  - made sure various alterations of config.h did not result in unused variables
  - fixed several local variables that "shadow" global declarations
  - removed obsolete AUTO_DLINE from config.h, its goal can now be achieved by
    specifying (or not specifying) dline for an action
  
  Revision  Changes    Path
  1.9       +2 -0      tcm-hybrid/include/commands.h
  1.39      +0 -5      tcm-hybrid/include/config.h
  1.17      +7 -1      tcm-hybrid/include/stdcmds.h
  1.25      +1 -1      tcm-hybrid/include/tcm.h
  1.29      +2 -0      tcm-hybrid/include/userlist.h
  1.69      +12 -1     tcm-hybrid/modules/bothunt.c
  1.54      +13 -270   tcm-hybrid/modules/commands.c
  1.54      +294 -40   tcm-hybrid/src/stdcmds.c



bill        2002/05/09 19:42:02 EDT	(20020510_0)

  Modified files:
    help                 help.clones help.remote 
    include              commands.h 
    modules              commands.c 
  Log:
  - added deprecation notice for .actions
  - updated help files a little
  
  Revision  Changes    Path
  1.11      +1 -1      tcm-hybrid/help/help.clones
  1.6       +1 -7      tcm-hybrid/help/help.remote
  1.8       +1 -0      tcm-hybrid/include/commands.h
  1.53      +9 -0      tcm-hybrid/modules/commands.c



wcampbel    2002/05/09 09:02:39 EDT	(20020509_0)

  Modified files:
    src                  modules.c 
  Log:
  Ignore anything in the module directory with a filename beginning with '.'.
  
  Revision  Changes    Path
  1.23      +1 -0      tcm-hybrid/src/modules.c



jv          2002/05/08 17:02:12 EDT	(20020508_6)

  Modified files:
    src                  modules.c 
  Log:
  - skip files shorter than 4 characters in load_all_modules().
  
  Revision  Changes    Path
  1.22      +2 -1      tcm-hybrid/src/modules.c



einride     2002/05/08 17:00:48 EDT	(20020508_5)

  Modified files:
    include              userlist.h 
    src                  stdcmds.c 
  Log:
  idents longer than 8 chars truncated if hoststrip field set to "prefix"
  default hoststrip for ctcp flooders changed
  
  Revision  Changes    Path
  1.28      +1 -1      tcm-hybrid/include/userlist.h
  1.53      +7 -1      tcm-hybrid/src/stdcmds.c



bill        2002/05/08 16:55:39 EDT	(20020508_4)

  Modified files:
    modules              commands.c 
    src                  stdcmds.c 
  Log:
  - fixed misleading error message in .hlist and .ulist
  - removed pointless variable in list_users and list_virtual_users
  
  Revision  Changes    Path
  1.52      +2 -2      tcm-hybrid/modules/commands.c
  1.52      +12 -32    tcm-hybrid/src/stdcmds.c



einride     2002/05/08 16:45:05 EDT	(20020508_3)

  Modified files:
    modules              bothunt.c commands.c serverif.c 
  Log:
  Fixed dependancy on module load order.
  
  Revision  Changes    Path
  1.68      +1 -2      tcm-hybrid/modules/bothunt.c
  1.51      +2 -1      tcm-hybrid/modules/commands.c
  1.59      +2 -2      tcm-hybrid/modules/serverif.c



bill        2002/05/08 16:39:19 EDT	(20020508_2)

  Modified files:
    modules              commands.c 
  Log:
  - removed m_k<action> from commands.c
  
  Revision  Changes    Path
  1.50      +1 -86     tcm-hybrid/modules/commands.c



bill        2002/05/08 16:01:27 EDT	(20020508_1)

  Modified files:
    etc                  tcm.cf 
  Log:
  -fixed a typo in A:drone
  
  Revision  Changes    Path
  1.23      +1 -1      tcm-hybrid/etc/tcm.cf



bill        2002/05/08 15:55:18 EDT	(20020508_0)

  Modified files:
    modules              serverif.c 
  Log:
  - improper terminator on the for() used to locate dcc commands in the hash table
  
  Revision  Changes    Path
  1.58      +1 -2      tcm-hybrid/modules/serverif.c



bill        2002/05/07 18:02:27 EDT	(20020507_2)

  Modified files:
    modules              commands.c serverif.c 
  Log:
  - initialize msg_hash_table
  - more robust checking in dcc command processing
  
  Revision  Changes    Path
  1.49      +8 -0      tcm-hybrid/modules/commands.c
  1.57      +1 -1      tcm-hybrid/modules/serverif.c



leeh        2002/05/07 17:37:44 EDT	(20020507_1)

  Modified files:
    modules              bothunt.c 
  Log:
  - bad pointer arithmetic chopping a nick/user in failed oper attempt
  
  Revision  Changes    Path
  1.67      +2 -2      tcm-hybrid/modules/bothunt.c



wcampbel    2002/05/07 13:02:46 EDT	(20020507_0)

  Modified files:
    modules              bothunt.c 
  Log:
  Fix the bug dilli spotted when parsing Quarantined nicks...
  This same issue exists elsewhere, so I will attempt to audit all cases
  or our handling of [ and ] (and friends)
  
  Revision  Changes    Path
  1.66      +6 -2      tcm-hybrid/modules/bothunt.c



wcampbel    2002/05/06 10:20:04 EDT	(20020506_5)

  Modified files:
    include              stdcmds.h 
  Log:
  -Wall cleanup
  
  Revision  Changes    Path
  1.16      +1 -0      tcm-hybrid/include/stdcmds.h



wcampbel    2002/05/06 09:37:29 EDT	(20020506_4)

  Modified files:
    .                    Makefile.in 
    modules              Makefile.in 
    src                  Makefile.in 
  Log:
  Fixed up CFLAGS handling in the Makefiles.  The variables from the root
  Makefile are NOT shared, as it is not appropriate to do that with autoconf.
  
  To use an alternative set of CFLAGS, use a command such as this:
  CFLAGS="-O2 -g -ggdb -pg" ./configure
  
  -O2 -g is the default CFLAGS line used by configure.
  
  Also...Added -Wall to the CFLAGS in modules/ and src/
  
  Revision  Changes    Path
  1.20      +1 -1      tcm-hybrid/Makefile.in
  1.8       +1 -1      tcm-hybrid/modules/Makefile.in
  1.16      +1 -1      tcm-hybrid/src/Makefile.in



wcampbel    2002/05/06 09:28:03 EDT	(20020506_3)

  Modified files:
    .                    README-csircd 
  Log:
  Added a note about the hidehostname flag in csircd's class blocks and their
  adverse effect on tcm's in memory userlist.
  
  Revision  Changes    Path
  1.2       +5 -0      tcm-hybrid/README-csircd



wcampbel    2002/05/06 09:10:55 EDT	(20020506_2)

  Modified files:
    src                  stdcmds.c 
  Log:
  .nfind now shows the class a user is a member of (like .[u|h]list)
  
  Revision  Changes    Path
  1.51      +3 -2      tcm-hybrid/src/stdcmds.c



wcampbel    2002/05/06 08:50:56 EDT	(20020506_1)

  Modified files:
    modules              bothunt.c commands.c serverif.c 
  Log:
  Some cleanups of the toserv() calls done.
  
  Revision  Changes    Path
  1.65      +2 -9      tcm-hybrid/modules/bothunt.c
  1.48      +4 -3      tcm-hybrid/modules/commands.c
  1.56      +5 -6      tcm-hybrid/modules/serverif.c



wcampbel    2002/05/05 22:12:00 EDT	(20020506_0)

  Modified files:
    modules              bothunt.c serverif.c 
    src                  stdcmds.c 
  Log:
  When joining a channel with a key defined in the configuration file,
    set the key on the channel.  Also marked some sections that will need
    to be reviewd.
  
  Key settings requested by dilli
  
  Revision  Changes    Path
  1.64      +8 -1      tcm-hybrid/modules/bothunt.c
  1.55      +12 -0     tcm-hybrid/modules/serverif.c
  1.50      +7 -0      tcm-hybrid/src/stdcmds.c



einride     2002/05/05 13:04:53 EDT	(20020505_2)

  Modified files:
    etc                  tcm.cf 
    include              config.h stdcmds.h userlist.h 
    modules              bothunt.c commands.c serverif.c wingate.c 
    src                  main.c stdcmds.c userlist.c 
  Log:
  Using kline reasons from config.h
  Fixed double socks reporting, now a socks 4 check is only started if socks 5 fail
  handle_action won't gethostbyname
  Error logging added to handle_action
  Added an "Additional comment" param for handle_action
  "hoststrip" now explicitly set for all actions, from #define'd settings
  Saves of actions not defined in tcm.cf should work.
  
  Revision  Changes    Path
  1.22      +5 -2      tcm-hybrid/etc/tcm.cf
  1.38      +17 -24    tcm-hybrid/include/config.h
  1.15      +1 -1      tcm-hybrid/include/stdcmds.h
  1.27      +18 -0     tcm-hybrid/include/userlist.h
  1.63      +31 -23    tcm-hybrid/modules/bothunt.c
  1.47      +1 -1      tcm-hybrid/modules/commands.c
  1.54      +6 -4      tcm-hybrid/modules/serverif.c
  1.24      +9 -7      tcm-hybrid/modules/wingate.c
  1.33      +1 -1      tcm-hybrid/src/main.c
  1.49      +51 -23    tcm-hybrid/src/stdcmds.c
  1.51      +18 -6     tcm-hybrid/src/userlist.c



wcampbel    2002/05/05 10:36:46 EDT	(20020505_1)

  Modified files:
    modules              commands.c 
  Log:
  Make report_multi_user() use match() instead of strcmp().
    Reasoning:  although it doesn't use a pattern, match does take into account
    case AND the [{]}\| legacy nonsense.  This I believe is more important then
    the slight performance hit caused by match()
  
  Revision  Changes    Path
  1.46      +2 -2      tcm-hybrid/modules/commands.c



wcampbel    2002/05/04 23:06:05 EDT	(20020505_0)

  Modified files:
    .                    configure 
    autoconf             configure.in 
    include              patchlevel.h 
  Added files:
    .                    README.FIRST 
  Log:
  Revved the version to 3.1.0-pre.  The changes done to the action system
    warrants a new version number.
  Put in a warning about the new A: line format in etc/tcm.cf.  Hopefully
    people will read it...
  
  Revision  Changes    Path
  1.1       +16 -0     tcm-hybrid/README.FIRST (new)
  1.14      +1 -1      tcm-hybrid/autoconf/configure.in
  1.14      +81 -92    tcm-hybrid/configure
  1.5       +1 -1      tcm-hybrid/include/patchlevel.h



einride     2002/05/04 16:12:10 EDT	(20020504_0)

  Modified files:
    etc                  tcm.cf userlist.cf 
    include              config.h tcm.h userlist.h 
    modules              bothunt.c commands.c 
    src                  main.c stdcmds.c userlist.c 
  Log:
  Fixed some mixups and bugs
  
  Removed .k<actionname> and made .kaction as a generic dcc command for
  simulating violations.
  
  handle_action retrieves ips on demand, and reverts from d-line to k-line
  if an ip couldn't be found.
  
  STATS I wont show spoofed I-lines, so all oper hosts from stats O get added
  as exempts instead.
  
  vclone is back to the logic it had before when it comes to masking hosts.
  
  Revision  Changes    Path
  1.21      +0 -0      tcm-hybrid/etc/tcm.cf
  1.16      +0 -0      tcm-hybrid/etc/userlist.cf
  1.37      +2 -2      tcm-hybrid/include/config.h
  1.24      +1 -1      tcm-hybrid/include/tcm.h
  1.26      +1 -1      tcm-hybrid/include/userlist.h
  1.62      +14 -4     tcm-hybrid/modules/bothunt.c
  1.45      +63 -8     tcm-hybrid/modules/commands.c
  1.32      +5 -5      tcm-hybrid/src/main.c
  1.48      +119 -25   tcm-hybrid/src/stdcmds.c
  1.50      +5 -5      tcm-hybrid/src/userlist.c



einride     2002/05/03 18:49:52 EDT	(20020503_0)

  Modified files:
    etc                  tcm.cf userlist.cf 
    include              stdcmds.h tcm.h userlist.h 
    modules              bothunt.c commands.c serverif.c wingate.c 
    src                  main.c modules.c stdcmds.c userlist.c 
  Log:
  Major action handling changes.
  
  suggest_action and suggest_host are gone, handle_action replaces them.
  
  handle_action does all reporting to irc/dcc, thus some reporting have
  been removed from misc files. A new action field is used by handle_action
  to perform user/host modifications before sending k-lines.
  IPs are passed to handle_action, in case configured handling method should
  be dline, this does *not work properly now*. Will be fixed soon.
  
  actions now are dynamically allocated, and have some changed fields.
  .action is redone
  .save works
  exempts should work
  Config changes for actions, see tcm.cf
  
  dlopen now uses RTLD_GLOBAL, as the modules depend on each other anyway.
  
  Revision  Changes    Path
  1.20      +18 -13    tcm-hybrid/etc/tcm.cf
  1.15      +8 -2      tcm-hybrid/etc/userlist.cf
  1.14      +4 -1      tcm-hybrid/include/stdcmds.h
  1.23      +8 -8      tcm-hybrid/include/tcm.h
  1.25      +38 -2     tcm-hybrid/include/userlist.h
  1.61      +55 -109   tcm-hybrid/modules/bothunt.c
  1.44      +107 -150  tcm-hybrid/modules/commands.c
  1.53      +10 -20    tcm-hybrid/modules/serverif.c
  1.23      +10 -10    tcm-hybrid/modules/wingate.c
  1.31      +37 -59    tcm-hybrid/src/main.c
  1.21      +1 -1      tcm-hybrid/src/modules.c
  1.47      +118 -262  tcm-hybrid/src/stdcmds.c
  1.49      +94 -32    tcm-hybrid/src/userlist.c



bill        2002/04/28 22:18:37 EDT	(20020429_0)

  Modified files:
    etc                  tcm.cf userlist.cf 
    include              userlist.h 
    modules              bothunt.c 
    src                  main.c userlist.c 
    tools                csircd-tcm.diff 
  Log:
  - updated documentation of user flags and exemptions in default cf files
  - added exemption_summary(), an action indexed exemption listing function
  - fixed bug in loading of exemptions
  - added logging of all suggest_action cases using SEND_WARN_ONLY
  - fixed reversal of csircd patch file
  - when dcc connections fail, send REJECT notice (per Kimy's request)
  
  Revision  Changes    Path
  1.19      +1 -1      tcm-hybrid/etc/tcm.cf
  1.14      +6 -1      tcm-hybrid/etc/userlist.cf
  1.24      +4 -0      tcm-hybrid/include/userlist.h
  1.60      +8 -1      tcm-hybrid/modules/bothunt.c
  1.30      +3 -0      tcm-hybrid/src/main.c
  1.48      +32 -4     tcm-hybrid/src/userlist.c
  1.2       +25 -14    tcm-hybrid/tools/csircd-tcm.diff



leeh        2002/04/27 06:46:59 EDT	(20020427_1)

  Modified files:
    src                  stdcmds.c 
  Log:
  - "1 matche found!", fixed. :)
  
  Revision  Changes    Path
  1.46      +4 -4      tcm-hybrid/src/stdcmds.c



bill        2002/04/27 02:18:40 EDT	(20020427_0)

  Modified files:
    modules              bothunt.c 
  Log:
  - fixed a few off-by-ones reported by Tim Baur
  
  Revision  Changes    Path
  1.59      +3 -3      tcm-hybrid/modules/bothunt.c



bill        2002/04/26 15:16:51 EDT	(20020426_0)

  Modified files:
    modules              serverif.c 
  Log:
  - fixed bug in service notice handling, found by Lee
  
  Revision  Changes    Path
  1.52      +2 -2      tcm-hybrid/modules/serverif.c



bill        2002/04/24 22:24:46 EDT	(20020425_0)

  Modified files:
    modules              bothunt.c 
  Log:
  - fixed bug reported by Tim Baur in temp kline clearing log
  
  Revision  Changes    Path
  1.58      +1 -1      tcm-hybrid/modules/bothunt.c



wcampbel    2002/04/23 10:31:12 EDT	(20020423_0)

  Modified files:
    help                 help.clones 
    include              commands.h config.h 
    modules              commands.c 
  Log:
  Brought back .ulist and .hlist, These are optional...
    Reasoning:  I used to use these heavily, as did some of the other opers
                I talked to.  I know .list does the same thing, but it's an
                extra step to put in that @* or *@.  Many European keyboards
                don't have @ easily accessable on the keyboard as well.
  
  Revision  Changes    Path
  1.10      +4 -0      tcm-hybrid/help/help.clones
  1.7       +6 -0      tcm-hybrid/include/commands.h
  1.36      +6 -0      tcm-hybrid/include/config.h
  1.43      +88 -0     tcm-hybrid/modules/commands.c



bill        2002/04/22 18:32:10 EDT	(20020422_0)

  Modified files:
    modules              bothunt.c 
    src                  stdcmds.c 
  Added files:
    .                    README-csircd 
    tools                csircd-tcm.diff 
  Log:
  - added documentation for csircd, complete with a patch to make it work properly
  - added support for faulty british language that has polluted hybrid-7
  
  Revision  Changes    Path
  1.1       +22 -0     tcm-hybrid/README-csircd (new)
  1.57      +2 -0      tcm-hybrid/modules/bothunt.c
  1.45      +8 -2      tcm-hybrid/src/stdcmds.c
  1.1       +33 -0     tcm-hybrid/tools/csircd-tcm.diff (new)



leeh        2002/04/21 16:14:38 EDT	(20020421_0)

  Modified files:
    modules              serverif.c 
  Log:
  - ERROR doesnt have a source..
  
  Revision  Changes    Path
  1.51      +1 -1      tcm-hybrid/modules/serverif.c



wcampbel    2002/04/19 19:15:11 EDT	(20020420_0)

  Modified files:
    include              bothunt.h 
    modules              .depend commands.c 
  Log:
  More -Wall -Wunused ...... cleanups
  
  Revision  Changes    Path
  1.24      +2 -0      tcm-hybrid/include/bothunt.h
  1.9       +1 -1      tcm-hybrid/modules/.depend
  1.42      +1 -0      tcm-hybrid/modules/commands.c



wcampbel    2002/04/17 18:09:29 EDT	(20020417_0)

  Modified files:
    modules              bothunt.c commands.c serverif.c 
    src                  .depend stdcmds.c userlist.c 
  Log:
  Bill noticed that usernames can contain the [{]}\| casemapping characters.
  Made anything that used wldcmp() on usernames use match().  wldwld() calls
    have NOT been changed.
  Cleanups from -Wall blah blah
  
  Revision  Changes    Path
  1.56      +2 -1      tcm-hybrid/modules/bothunt.c
  1.41      +1 -1      tcm-hybrid/modules/commands.c
  1.50      +1 -3      tcm-hybrid/modules/serverif.c
  1.10      +1 -1      tcm-hybrid/src/.depend
  1.44      +7 -7      tcm-hybrid/src/stdcmds.c
  1.47      +4 -3      tcm-hybrid/src/userlist.c



wcampbel    2002/04/16 17:33:03 EDT	(20020416_0)

  Modified files:
    src                  .depend Makefile.in stdcmds.c 
  Added files:
    include              match.h 
    src                  match.c 
  Log:
  Added a match() function, used in commands that compare against nicks.
    The match() is taken from IRCnet 2.10.3p3 with some local modifications.
    The benefit is that in the non-regular expression case of .nfind, nicks
    will be matched with the "proper" RFC1459 casemapping.
  
  Revision  Changes    Path
  1.1       +28 -0     tcm-hybrid/include/match.h (new)
  1.9       +4 -2      tcm-hybrid/src/.depend
  1.15      +1 -0      tcm-hybrid/src/Makefile.in
  1.1       +324 -0    tcm-hybrid/src/match.c (new)
  1.43      +3 -2      tcm-hybrid/src/stdcmds.c



bill        2002/04/11 21:40:52 EDT	(20020412_1)

  Modified files:
    modules              bothunt.c 
  Log:
  - added documentation for most server notices
  - fixed parsing of Flooder notice
  - fixed parsing of incoming/disconnecting server notices
  
  Revision  Changes    Path
  1.55      +28 -17    tcm-hybrid/modules/bothunt.c



einride     2002/04/11 19:35:42 EDT	(20020412_0)

  Modified files:
    etc                  tcm.cf 
    include              bothunt.h 
    modules              bothunt.c 
  Log:
  Fixed reconnect clone detection
  Added "rclone" action and modified tcm.cf sample to reflect it
  Changed reconnect clone threshold to 5 connects / 15 seconds
  
  Revision  Changes    Path
  1.18      +2 -0      tcm-hybrid/etc/tcm.cf
  1.23      +1 -1      tcm-hybrid/include/bothunt.h
  1.54      +18 -7     tcm-hybrid/modules/bothunt.c



wcampbel    2002/04/11 09:11:15 EDT	(20020411_0)

  Modified files:
    modules              serverif.c 
  Log:
  Fixed TCM connecting to a server running PING cookies.  This may also
  account for ping timeouts on an idle tcm without any sort of services
  testing.
  
  Revision  Changes    Path
  1.49      +8 -2      tcm-hybrid/modules/serverif.c



wcampbel    2002/04/08 10:02:29 EDT	(20020408_0)

  Modified files:
    include              config.h 
    src                  main.c 
  Log:
  Added #define FORCE_CORE, defined by default, to automatically ulimit
  the core file size to "unlimited".  This is used so that tcm can dump
  core even on systems that default userland cores to 0 (eg. Redhat)
  
  Revision  Changes    Path
  1.35      +6 -0      tcm-hybrid/include/config.h
  1.29      +35 -0     tcm-hybrid/src/main.c



bill        2002/04/05 21:00:20 EST	(20020406_0)

  Modified files:
    include              bothunt.h 
    modules              bothunt.c serverif.c 
    src                  logging.c stdcmds.c 
  Log:
  - added .gline command
  - beautified gline logging
  - fixed infinite loop in kill notice parsing
  
  Revision  Changes    Path
  1.22      +15 -15    tcm-hybrid/include/bothunt.h
  1.53      +161 -75   tcm-hybrid/modules/bothunt.c
  1.48      +9 -6      tcm-hybrid/modules/serverif.c
  1.20      +3 -1      tcm-hybrid/src/logging.c
  1.42      +1 -1      tcm-hybrid/src/stdcmds.c



bill        2002/04/04 18:46:18 EST	(20020404_3)

  Modified files:
    modules              bothunt.c 
  Log:
  - that stupid NOTICE AUTH :*** nonsense caused an off-by-one .. cored dax-mon
  
  Revision  Changes    Path
  1.52      +3 -3      tcm-hybrid/modules/bothunt.c



bill        2002/04/04 18:19:26 EST	(20020404_2)

  Modified files:
    modules              commands.c 
    src                  token.c userlist.c 
  Log:
  - fully integreated ENABLE_W_FLAG and NO_D_LINE_SUPPORT
  
  Revision  Changes    Path
  1.40      +20 -0     tcm-hybrid/modules/commands.c
  1.23      +1 -64     tcm-hybrid/src/token.c
  1.46      +2 -0      tcm-hybrid/src/userlist.c



bill        2002/04/04 17:53:47 EST	(20020404_1)

  Modified files:
    modules              bothunt.c commands.c serverif.c 
  Log:
  - fixed off-by-one in onservnotice()
  - fixed NO_D_LINE_SUPPORT bug found by Disciple
  - fixed services notices bug found by plan9
  
  Revision  Changes    Path
  1.51      +1 -1      tcm-hybrid/modules/bothunt.c
  1.39      +2 -0      tcm-hybrid/modules/commands.c
  1.47      +4 -1      tcm-hybrid/modules/serverif.c



bill        2002/04/04 17:17:49 EST	(20020404_0)

  Modified files:
    .                    Makefile.in 
    modules              bothunt.c serverif.c 
  Log:
  - replaced 8 spaces with \t in Makefile.in
  - typo prevented spambots from being klined
  - finished new argv[] processing (redid the rest of the server msg processing)
  
  Revision  Changes    Path
  1.19      +1 -1      tcm-hybrid/Makefile.in
  1.50      +1 -1      tcm-hybrid/modules/bothunt.c
  1.46      +93 -115   tcm-hybrid/modules/serverif.c



bill        2002/04/02 19:24:13 EST	(20020403_0)

  Modified files:
    .                    Makefile.in 
    src                  stdcmds.c 
  Log:
  - make install was broken by the change
  - typo in regex matching
  
  Revision  Changes    Path
  1.18      +28 -36    tcm-hybrid/Makefile.in
  1.41      +7 -11     tcm-hybrid/src/stdcmds.c



bill        2002/04/02 18:58:12 EST	(20020402_1)

  Modified files:
    .                    Makefile.in configure 
    autoconf             configure.in 
    modules              Makefile.in 
    src                  Makefile.in 
  Log:
  - fixed autoconf to properly do prefix
  
  Revision  Changes    Path
  1.17      +1 -2      tcm-hybrid/Makefile.in
  1.13      +1 -1      tcm-hybrid/autoconf/configure.in
  1.13      +77 -76    tcm-hybrid/configure
  1.7       +1 -1      tcm-hybrid/modules/Makefile.in
  1.14      +2 -1      tcm-hybrid/src/Makefile.in



bill        2002/04/02 18:24:32 EST	(20020402_0)

  Modified files:
    .                    Makefile.in configure 
    autoconf             configure.in 
    etc                  tcm.cf 
    include              bothunt.h commands.h config.h setup.h.in 
                         stdcmds.h userlist.h 
    modules              .depend Makefile.in bothunt.c commands.c 
                         serverif.c wingate.c 
    src                  .depend logging.c main.c modules.c 
                         stdcmds.c 
  Log:
  - redid onservnotice() and all string parsing called by it
  - added regex matching to .list .vlist .nfind and .killlist
  - migrated list_() functions completely from commands.c to stdcmds.c
  - updated commands.h and stdcmds.h
  - updated dependency files
  - removed all unused variables/functions
  - fixed argv[] overflow that caused core
  - added safety typecase in socks detection that was causing a warning at compile
    time
  - added autodetection for regex.h and compatibility for systems without it
  - misc cleanup/syntax consistency type changes
  - drank a beer
  
  Revision  Changes    Path
  1.16      +1 -1      tcm-hybrid/Makefile.in
  1.12      +3 -0      tcm-hybrid/autoconf/configure.in
  1.12      +127 -79   tcm-hybrid/configure
  1.17      +2 -3      tcm-hybrid/etc/tcm.cf
  1.21      +2 -7      tcm-hybrid/include/bothunt.h
  1.6       +53 -0     tcm-hybrid/include/commands.h
  1.34      +0 -3      tcm-hybrid/include/config.h
  1.4       +4 -0      tcm-hybrid/include/setup.h.in
  1.13      +5 -3      tcm-hybrid/include/stdcmds.h
  1.23      +0 -1      tcm-hybrid/include/userlist.h
  1.8       +3 -1      tcm-hybrid/modules/.depend
  1.6       +3 -1      tcm-hybrid/modules/Makefile.in
  1.49      +356 -289  tcm-hybrid/modules/bothunt.c
  1.38      +102 -186  tcm-hybrid/modules/commands.c
  1.45      +12 -23    tcm-hybrid/modules/serverif.c
  1.22      +2 -2      tcm-hybrid/modules/wingate.c
  1.8       +5 -5      tcm-hybrid/src/.depend
  1.19      +39 -25    tcm-hybrid/src/logging.c
  1.28      +1 -3      tcm-hybrid/src/main.c
  1.20      +2 -2      tcm-hybrid/src/modules.c
  1.40      +255 -51   tcm-hybrid/src/stdcmds.c



bill        2002/03/20 00:08:29 EST	(20020320_0)

  Modified files:
    include              patchlevel.h 
    modules              commands.c serverif.c 
    src                  userlist.c 
  Log:
  - finished replacing tokenizer with hash table
  - fixed bug in .k<action> commands that caused core
  - fixed bug in okhost() that caused performance drop
  - fixed bug in suggest_action that ignored klines
  - fixed bug in E: processing that mis-exempted cloning hosts
  - uped patchlevel to 3.0.3
  
  Revision  Changes    Path
  1.4       +2 -2      tcm-hybrid/include/patchlevel.h
  1.37      +985 -841  tcm-hybrid/modules/commands.c
  1.44      +0 -1      tcm-hybrid/modules/serverif.c
  1.45      +49 -20    tcm-hybrid/src/userlist.c



wcampbel    2002/03/19 18:54:35 EST	(20020319_0)

  Modified files:
    src                  main.c 
  Log:
  Ignore SIGTRAP to prevent tcm from coring when detaching gdb on FreeBSD
  
  Revision  Changes    Path
  1.27      +1 -0      tcm-hybrid/src/main.c



bill        2002/03/11 01:03:47 EST	(20020311_0)

  Modified files:
    src                  stdcmds.c 
  Log:
  - fixed minor typo that caused core, found by Disciple
  
  Revision  Changes    Path
  1.39      +1 -1      tcm-hybrid/src/stdcmds.c



bill        2002/03/08 23:08:44 EST	(20020309_0)

  Modified files:
    modules              serverif.c 
  Log:
  - off by one in WALLOPS handling
  
  Revision  Changes    Path
  1.43      +1 -1      tcm-hybrid/modules/serverif.c



einride     2002/03/06 16:17:22 EST	(20020306_7)

  Modified files:
    modules              wingate.c 
  Log:
  Whoops.... little messup socks detection socket slots wasnt properly
  marked as available.
  
  Revision  Changes    Path
  1.21      +14 -14    tcm-hybrid/modules/wingate.c



einride     2002/03/06 14:24:40 EST	(20020306_6)

  Modified files:
    include              config.h 
  Log:
  Added two new defines used for SOCKS checks.
  
  Revision  Changes    Path
  1.33      +11 -1     tcm-hybrid/include/config.h



einride     2002/03/06 14:20:42 EST	(20020306_5)

  Modified files:
    modules              wingate.c 
  Log:
  WinGate/Socks detection working. Socks detection now checks whether a proxy
  actually is open, not just that it exists.
  
  Revision  Changes    Path
  1.20      +118 -21   tcm-hybrid/modules/wingate.c



einride     2002/03/06 06:06:42 EST	(20020306_4)

  Modified files:
    modules              serverif.c 
  Log:
  Added check for MAX_ARGV exceeds in input splitting to argv[]
  
  Revision  Changes    Path
  1.42      +2 -2      tcm-hybrid/modules/serverif.c



einride     2002/03/06 05:58:59 EST	(20020306_3)

  Modified files:
    modules              wingate.c 
    src                  main.c 
  Log:
  First round of fixing socks/wingate detection.
  Added a SIGPIPE ignore and made sure #define DETECT_WINGATE/SOCKS takes
  
  Revision  Changes    Path
  1.19      +3 -3      tcm-hybrid/modules/wingate.c
  1.26      +1 -1      tcm-hybrid/src/main.c



bill        2002/03/06 04:08:14 EST	(20020306_2)

  Modified files:
    src                  stdcmds.c 
  Log:
  - proper fix for the bug.  caused dax-mon to core, no longer.
  
  Revision  Changes    Path
  1.38      +2 -1      tcm-hybrid/src/stdcmds.c



bill        2002/03/06 00:36:31 EST	(20020306_1)

  Modified files:
    src                  stdcmds.c 
  Log:
  - oops, minor bugfix.
  
  Revision  Changes    Path
  1.37      +2 -0      tcm-hybrid/src/stdcmds.c



bill        2002/03/06 00:16:27 EST	(20020306_0)

  Modified files:
    include              bothunt.h modules.h 
    modules              .depend bothunt.c commands.c serverif.c 
                         wingate.c 
    src                  main.c modules.c stdcmds.c userlist.c 
  Log:
  - further progression on hashisizing of dcc commands
  - fixed E: lines
  - fixed channel reporting
  - stoped wingate.c from compiling if DETECT_WINGATE and DETECT_SOCKS are undefined
  - rewrote server timeout code.  timeout value is now relative to the tcm's ping frequency value in its Y:.
  - added pingf updating in server rehash/sighup as well as tcm rehash/sighup
  - reimplemented mod_del_cmd()
  
  Revision  Changes    Path
  1.20      +17 -17    tcm-hybrid/include/bothunt.h
  1.12      +2 -4      tcm-hybrid/include/modules.h
  1.7       +1 -3      tcm-hybrid/modules/.depend
  1.48      +8 -1      tcm-hybrid/modules/bothunt.c
  1.36      +32 -3     tcm-hybrid/modules/commands.c
  1.41      +20 -19    tcm-hybrid/modules/serverif.c
  1.18      +4 -0      tcm-hybrid/modules/wingate.c
  1.25      +8 -3      tcm-hybrid/src/main.c
  1.19      +2 -4      tcm-hybrid/src/modules.c
  1.36      +3 -0      tcm-hybrid/src/stdcmds.c
  1.44      +3 -2      tcm-hybrid/src/userlist.c



bill        2002/03/05 02:10:57 EST	(20020305_0)

  Modified files:
    include              serverif.h 
    modules              bothunt.c commands.c serverif.c 
    src                  logging.c main.c modules.c userlist.c 
  Log:
  - miscellaneous code cleanups
  - began migration from tokenizer to hash table compatible with ircd-hybrid-7
  - continued groundwork for tcm.so
  
  Revision  Changes    Path
  1.14      +9 -6      tcm-hybrid/include/serverif.h
  1.47      +9 -2      tcm-hybrid/modules/bothunt.c
  1.35      +156 -114  tcm-hybrid/modules/commands.c
  1.40      +24 -20    tcm-hybrid/modules/serverif.c
  1.18      +2 -1      tcm-hybrid/src/logging.c
  1.24      +3 -1      tcm-hybrid/src/main.c
  1.18      +6 -2      tcm-hybrid/src/modules.c
  1.43      +2 -0      tcm-hybrid/src/userlist.c



bill        2002/03/04 16:10:13 EST	(20020304_0)

  Modified files:
    modules              serverif.c 
  Log:
  Submitted by:   Stian Sletner <stian@sletner.com>
  - fix in services-drone detection (was crashing normon almost daily)
  
  Revision  Changes    Path
  1.39      +1 -0      tcm-hybrid/modules/serverif.c



bill        2002/02/24 02:45:05 EST	(20020224_0)

  Modified files:
    src                  userlist.c 
  Log:
  Submitted by: zartik <code@psu.edu>
  - extra %s in conf saving, found and fixed by zartik <code@psu.edu>
  
  Revision  Changes    Path
  1.42      +2 -4      tcm-hybrid/src/userlist.c



einride     2001/12/17 17:08:26 EST	(20011217_0)

  Modified files:
    modules              serverif.c 
  Log:
  Fixed a off by one in serverif.c. In pretty rare cases this could cause a SEGV.
  
  Revision  Changes    Path
  1.38      +1 -1      tcm-hybrid/modules/serverif.c



einride     2001/12/16 15:22:41 EST	(20011216_2)

  Modified files:
    modules              serverif.c 
    src                  stdcmds.c 
  Log:
  A struct in serverif.c lacked "extern", this was causing the SEGVs.
  
  Changed tcm created K-lines to be *@host rather than ~*@host, as e.g.
  connection flooding from unidented users isn't stopped by the ~* K-line
  
  Changed some strcpy/strcat to strncpy/strncat
  
  Revision  Changes    Path
  1.37      +13 -8     tcm-hybrid/modules/serverif.c
  1.35      +7 -24     tcm-hybrid/src/stdcmds.c



einride     2001/12/15 20:33:22 EST	(20011216_1)

  Modified files:
    modules              wingate.c 
  Log:
  Fixed overdetection of open SOCKS. Tested on production network, should be
  ok now.
  
  Revision  Changes    Path
  1.17      +3 -1      tcm-hybrid/modules/wingate.c



einride     2001/12/15 19:28:28 EST	(20011216_0)

  Modified files:
    modules              wingate.c 
  Log:
  _config in wingate.c will now compile also if DETECT_SOCKS and DETECT_WINGATE
  isn't defined
  
  Revision  Changes    Path
  1.16      +2 -1      tcm-hybrid/modules/wingate.c



einride     2001/12/13 09:21:11 EST	(20011213_1)

  Modified files:
    modules              bothunt.c 
  Log:
  Updated connect_flood_notice to consider "unknown@host" as an unidented
  connection, connection floods from unidented users was not correctly
  K-lined.
  
  Revision  Changes    Path
  1.46      +1 -1      tcm-hybrid/modules/bothunt.c



wcampbel    2001/12/12 22:57:19 EST	(20011213_0)

  Modified files:
    modules              commands.c 
  Log:
  Fix a small possible buffer overflow
  
  Revision  Changes    Path
  1.34      +1 -1      tcm-hybrid/modules/commands.c



db          2001/12/12 18:19:58 EST	(20011212_1)

  Modified files:
    src                  userlist.c 
  Log:
  - trivial comment change. we no longer support 'b' for remote tcms
  
  Revision  Changes    Path
  1.41      +1 -5      tcm-hybrid/src/userlist.c



einride     2001/12/12 18:08:18 EST	(20011212_0)

  Modified files:
    modules              wingate.c 
    src                  modules.c userlist.c 
  Log:
  modules.c changed to support multiple hook entries per hook type.
  userlist.c changed to trigger the config hook.
  wingate.c changed to assume any open port 1080 is a socks, previous version would not detect SOCKS5 proxies.
  
  Revision  Changes    Path
  1.15      +12 -2     tcm-hybrid/modules/wingate.c
  1.17      +32 -106   tcm-hybrid/src/modules.c
  1.40      +4 -1      tcm-hybrid/src/userlist.c



db          2001/12/11 16:55:34 EST	(20011211_1)

  Modified files:
    include              userlist.h 
    src                  userlist.c 
  Log:
  - changed some loops to use memset
  - removed typedef no longer used
  
  einride volunteered to test!
  
  Revision  Changes    Path
  1.22      +2 -2      tcm-hybrid/include/userlist.h
  1.39      +26 -60    tcm-hybrid/src/userlist.c



db          2001/12/11 02:00:57 EST	(20011211_0)

  Modified files:
    modules              commands.c 
    src                  userlist.c 
  Log:
  - reformatted commands.c
  - rewrote config file handling in userlist.c.
  
  Revision  Changes    Path
  1.33      +4 -4      tcm-hybrid/modules/commands.c
  1.38      +222 -279  tcm-hybrid/src/userlist.c



bill        2001/12/07 15:06:16 EST	(20011207_0)

  Modified files:
    modules              bothunt.c serverif.c 
  Log:
  - fixed +W flag
  - fixed spambot detection
  
  Revision  Changes    Path
  1.45      +2 -2      tcm-hybrid/modules/bothunt.c
  1.36      +2 -2      tcm-hybrid/modules/serverif.c



*** 20011204_2 by bill

- upped patchlevel to 3.0.2


*** 20011204_1 by bill

- added detection for rapid reconnects
  note: the thresholds for this are rather aggressive,
        to change them you must edit include/bothunt.h


*** 20011129_1 by bill

- fixed bug in okhost()
- fixed exemptions
- fixed bug in .k<action> commands when <action> is warn
  (providing a nick caused core)


*** 20011128_1 by bill

- fixed bug in connect flood detection


*** 20011127_1 by wcampbel
Add kills_klines.log to .cvsignore


*** 20011126_1 by bill

- added optional duration to .k<action> commands
- .k<action> commands' action will default to kline for "warn"


*** 20011124_1 by bill

- made +W affect LOCOPS viewing in addition to OPERWALL
- made +W off by default, define ENABLE_W_FLAG in include/config.h
  to enable
- fixed improper format bug in commands.c
- fixed typo in do_a_kline() -- found by plan9
- fixed bug in .kline (and added optional duration) -- also found by plan9


*** 20011123_4 by wcampbel
Paste broke up a string line


*** 20011123_3 by wcampbel
More cleanups, no XXX's this time


*** 20011123_2 by wcampbel
More code cleanup, more XXX's


*** 20011123_1 by wcampbel
TCM Cleanups.  Look at the XXX's for more details.
Moved report_multi*() to be static functions in modules/commands.c,
  as they are only used there, and don't appear to depend on anything
  else.


*** 20011114_1 by bill

- fixed bug with server buffer initialization


*** 20011110_3 by bill
- set MAX_ARGV to 80 to account for extra long OPERWALLs
- proc() cleanups
- list_user*() cleanups
- fixed : bug in tcm.cf's M:
- rdpt() cleanups


*** 20011110_2 by wcampbel
More cleanups


*** 20011110_1 by wcampbel
Some more cleanups...
I XXX'ed out some functions, check to see if they are not used


*** 20011109_2 by wcampbel
Fix make lint
Minor cleanups


*** 20011109_1 by wcampbel
Bunched all the SERVICES defines together, requested by paulsen


*** 20011108_1 by bill
- added ability to specify install directory with ./configure --prefix
  (documented, aren't you proud hwy?)
- turned OPERS_ONLY on by default
- fixed bug in rdpt() causing incoming buffers from differing fds to be
  switched with one-another
- fixed bug in check_host_clones() and check_virtual_host_clones() that
  would print unitialized variables
- fixed .vlist so the user part of <[user@]ip> works properly.  you may now:
   .vlist 255.2?5.*  or .vlist ~*@255.2?5.*
  (documented this, too.  I am on a role!)
- added the "has disconnected" notice back from wherever it went


*** 20011107_1 by wcampbel
Document some items more clearly.
Disable HOW_TO_MAIL by default.
Add in zartik's suggested command for HOW_TO_MAIL on FreeBSD and OpenBSD.


*** 20011105_2 by wcampbel
Updated some documentation, spotted by paulsen <erik@pentadon.com>


*** 20011105_1 by wcampbel
Documentation corrections from paulsen <erik@pentadon.com>


*** 20011102_1 by db
- fixed core dump on linkclosed
- various cleanups with argv nonsense



*** 20011031_1 by bill

- added NULL checking in find_banned_host()


*** 20011030_4 by bill

- removed obsolete autopilot
- fixed .raw/.quote


*** 20011030_3 by wcampbel
Minor documentation fix


*** 20011030_2 by bill

- added checking for SUN ld, -export-dynamic caused breakage on solaris


*** 20011030_1 by bill

- fixed parse error in .testline response.  k-line notice argv[] was off by 2


*** 20011029_7 by bill

- fixed bug in gline request/trigger parsing


*** 20011029_6 by bill

- added ability to specify user with ipmask in .vlist
   you can now: .vlist some.net.block.* (or .vlist *@some.net.block.*)
                .vlist user@some.net.block.*
                etc


*** 20011029_5 by wcampbel
Added a logs .cvsignore file


*** 20011029_4 by wcampbel
More cleanups


*** 20011029_3 by wcampbel
Fixed some format string bugs
And did a couple things for safety (added precaution against FSB's)


*** 20011029_2 by wcampbel
Update of the help files


*** 20011029_1 by bill

- fixec vclone detection to only call suggest_action() if the idents are the same


*** 20011028_11 by wcampbel
Removed the last remnants of placed


*** 20011028_10 by db
- more cleanups



*** 20011028_9 by db
- removed placed
- redid server message handling lookup table
- redid argv[] catenation



*** 20011028_8 by wcampbel
Removed a little more crud
Made a small change for correctness


*** 20011028_7 by wcampbel
Documentation update:
Corrected an error in README-WINGATES
Updated and remove specific values from README


*** 20011028_6 by wcampbel
TYPE_CAN_REMOTE is gone (BLOAT!)


*** 20011028_5 by wcampbel
<dollar>Id<dollar>'ed everything properly
Removed more crud related to linking and remote tcm opers
Other general cleanups


*** 20011028_4 by wcampbel
Removed TYPE_TCM and all it's related trash


*** 20011028_3 by wcampbel
Cleaned up more cruft/lint/moldy code/BLOAT


*** 20011028_2 by wcampbel
Removed the BUGS list that Bill created.
Documented that I repo-moved tcm.check into tools/


*** 20011028_1 by wcampbel
More cleanups


*** 20011027_6 by wcampbel
Document .testline........<sigh>


*** 20011027_5 by bill
- fixed ping timeout bug.  we now reset last_ping_time whenever we read data


*** 20011027_4 by bill
- fixed duplicated \001\n in ping reply


*** 20011027_3 by bill
- fixed more warnings


*** 20011027_2 by db
- yet more cleanups.
  add_action called with too many args. 
  moved function prototypes into tcm.h



*** 20011027_1 by db
- Yet more tcm cleanups



*** 20011026_11 by wcampbel
Added etc/.cvsignore


*** 20011026_10 by bill
- removed generation of 'rude' default Makefile on distclean


*** 20011026_9 by wcampbel
Updated the INSTALL document


*** 20011026_8 by wcampbel
Fixed modules/.depend


*** 20011026_7 by wcampbel
Massive code cleanup - no more warnings in modules/*.c
Fixed some format string bugs and an if (... = ...)
Added modules/.cvsignore


*** 20011026_6 by db
- corrected typos, it runs...



*** 20011026_5 by db
- cleanups, these mallocs were not needed at all.



*** 20011026_4 by bill
- fixed all warnings caused by src/ files
- updated dependancy files
- fixes for modules/ warnings to come


*** 20011026_3 by bill
- missing string.h which caused warnings on compile


*** 20011026_2 by bill
- fixed "is now an operator" notice


*** 20011026_1 by db
- got rid of unnecessary mallocs and frees
- make function names stand out on own line
- just a bunch of cleanups



*** 20011024_3 by wcampbel
Document .help umode


*** 20011024_2 by bill

- forgot to duplicate bugfix in its other locations


*** 20011024_1 by bill

- minor bugfix in if() caused by unexpected disconnect


*** 20011023_2 by bill
- updated default M: to goto http://www.ircd-hybrid.org/tcm/


*** 20011023_1 by bill
- found and fixed mem leak
- fixed parse error in server link/unlink messages


*** 20011020_1 by db
- First pass of cleanups, if remote tcm is no longer supported
  all the code needed for that is not needed!



*** 20011017_4 by wcampbel
Correction, that was .restart, not .rehash


*** 20011017_3 by wcampbel
Added .restart.  It works but does not properly clean up connections.
  Someone who knows current tcm code better will need to handle this.
Removed the less than polite Makefile.  There is no reason for it...
  If people cannot run ./configure, they shouldn't be running the service
  in the first place.  This Makefile also interferes with cvs update's and
  commits if you don't make distclean first.


*** 20011017_2 by wcampbel
Doc cleanups
Minor cosmetic code cleanups
configure now takes the current working directory and sets it to DPATH, this
  is used when starting so that it chdir's into there BEFORE trying to use
  the conf files.  This will allow the tcm to be started from any directory,
  not just in the root of the source tree.  The side effect is that users
  will have to build in place...they cannot build then move the tree elsewhere.
  This will also be used for RESTART.


*** 20011017_1 by bill

- whoop, first in what is sure to be series of typo fixes (argv[9] needed where argv[6] was)


*** 20011016_2 by bill
- got rid of tcm linking userlist flags
  (note: once and for all, tcm link support is *gone*)
  it needs to be rewritten, and taking it out was motivation for me to redo it
- replaced old E: lines in userlist.cf with what were once known as F: lines
- updated connection flooding to handle "Invalid username" notices as well as
  X-line rejection notices
- added capability to detect network splits/joins and inform SEND_WARN_ONLY users
- added G-line support (for monitoring, I have yet to decide if tcm opers should have control over
  voting on G-lines)
- REHASH notice still doesn't seem to work.  I have absolutely no idea why.. anyone?
- added logging of "Failed OPER attempt" notices, also inform SEND_WARN_ONLY users
- added logging of "has just acquired the personality of a ..." notices, and again, inform
  SEND_WARN_ONLY users
- rewrote okhost() to be action specific; the rules are as follows:
   cflood  -- ident -> ident@host          no ident -> ~*@host
   vclone  -- ident -> ident@ip.block.0/24 no ident -> ~*@ip.block.0/24
   flood   -- ident -> ident@*.domain      no ident -> ~*@host
   link    -- ident -> ident@host          no ident -> ~*@host
   bot     -- ident -> ident@*.domain      no ident -> ~*@host
   ctcp    -- ident -> ident@*.domain      no ident -> ~*@host
   spambot -- ident -> ident@*.domain      no ident -> ~*@host
   clone   -- ident -> *@host              no ident -> ~*@host
   sclone  -- ident -> *@host              no ident -> ~*@host
   drone   -- ident -> *@host              no ident -> ~*@host
   wingate -- ident -> *@host              no ident -> ~*@host
   socks   -- ident -> *@host              no ident -> ~*@host
    (note: I would like these to be, at some point, #define'able or even better, configurable
           in the config file(s).  Dynamic configuration, like .action, would be the next step
           to this, too.)


*** 20011016_1 by bill
- first step of major comit -- updated to correct action names
                            -- updated user flags (and added +e/+p to userlist)


*** 20011013_4 by bill
- document updates
- connection flooders always klined ident@<whatever> even if there is no ident


*** 20011013_3 by bill
- stat() caused core.  to hell with it.


*** 20011013_2 by bill
- changed around .vbots and .vmulti to maintain format of .bots and .hmulti


*** 20011013_1 by bill
- added supposed mem leak to BUGS
- rewrote .save to replace tcm.cf rather than making its own file
- removed obsolete .load
- updated dependancy file


*** 20011011_14 by bill

- line break where there shouldn't be one


*** 20011011_13 by db
- reverted missing tokens in commands.c



*** 20011011_12 by db
- no its 9 chars, it really does have a space after the '>'



*** 20011011_11 by db
There are 8 letters in "Wingate>" not 9
(pointed out by Zike on EFnet)



*** 20011011_10 by bill

- damn debug statements


*** 20011011_9 by bill
- finalized updates.  we are ready for a release.


*** 20011011_8 by bill
- made .kclone/.kbot/etc conform to their respective .actions
- more help file updates


*** 20011011_7 by wcampbel
Cleanup of the example tcm.cf (add A:sclone: and A:drones: => A:drone: )


*** 20011011_6 by bill
- Taske is all over these help file updates


*** 20011011_5 by bill
- More updating help files
- Fixed Unauthorized client connection SNOTICE bug


*** 20011011_4 by bill
- Thanks to Taske (irc.daxnet.no admin) for pointing out multiple typos
  and formatting mistakes
- Fixed .vbots to correct threshold
- Ultimate robustness (yes, it is a word now) in .action
- Removed .hlist and .ulist from help files (the commands were removed some
  time ago, use .list *@host or .list user@*)


*** 20011011_3 by bill
- I never remember to remove my fripping debug statements


*** 20011011_2 by bill

- minor typo in .vmulti


*** 20011011_1 by bill

- redid add_common_function() to properly initialize each linked list


*** 20011010_2 by bill
- oops forgot to remove a debug statement


*** 20011010_1 by bill
- die on KLINE/DLINE
- Made DCC connects O_NONBLOCKing
- rewrote .action to be as robust/multi-syntaxed as I can possibly make it
- fixed = from being added to exempt list in spoofed I-lines
- spoofed hosts now shown in .whom and STATS p rather than real hosts
- .chat connects are now treated the same as DCC (printed MOTD, greeting, etc)
- actions are now properly read from the config file
- fixed .chat bug in BUGS file requiring both spoofed and real hostname being added to the userlist.cf



*** 20011009_3 by bill

- fixed typo


*** 20011009_2 by bill
- forgot to commit fix for dcc bug (non resolving ips didnt always work)
- suggest_host() now includes type, so we can suggest a host based on what
  we are klining for


*** 20011009_1 by bill

- implemented fully .modload, .modunload, .modreload
- updated out-of-date dependency file


*** 20011008_2 by wcampbel
Cosmetic cleanup of the help files


*** 20011008_1 by wcampbel
Fix for .help.  ".help    admin" still doesn't work, but it's not a big
concern for right now.


*** 20011004_2 by wcampbel
Cosmetic fix of LOCOPS/WALLOPS/OPERWALL handling.


*** 20011004_1 by bill

- fixed .opers
- fixed .locops (and WALLOP parsing)
- removed obsolete spoof detection code
- improved Makefile.in to remove *all* logs on distclean


*** 20011003_1 by wcampbel
Fixed .umulti and .hmulti once and for all.


*** 20011001_1 by bill

- fixed to run on fbsd
- dcc chat works 50/50, some problem with makeconn() getting the proper address


*** 20010922_5 by wcampbel
Fixed FreeBSD compiles, I'll test on Linux in a minute, then test to make
sure that two tcm's on both platforms will work


*** 20010922_4 by bill
- freebsd likes making things difficult for me, as always.


*** 20010922_3 by bill
- already found a bug, heh.  this fixes cwd problem in *bsd


*** 20010922_2 by bill

- removed unneeded files


*** 20010922_1 by bill
- completed modularization and adaptation (finally!)
- upped version to 3.0.1


*** 20010921_1 by bill
- modularization is almost finished
  todo: make sure all actions have been correctly implemented
        make sure wingate/socks detection still works


*** 20010920_2 by bill
- more work towards modularizing
   info:  tcm now gets online.  working on ctcp/privmsg/notice handling to
          get dcc chat working.


*** 20010920_1 by bill
- fixed modules
- began to rewrite most functions to use connnum, argc, argv format
- hooray, only busy work until completion


*** 20010919_4 by bill
- thanks to larne for advice regarding compiling modules.  they now load
  semi-succesfully

  current problem: undefined symbols in loading each module.  suggestions?


*** 20010919_3 by bill
- adding very needed files


*** 20010919_2 by bill
- heh oops.  turned off DEBUGMODE by default


*** 20010919_1 by bill
- another major leaped towards modularization
   current brokenness: 
    ELF file's phentsize not the expected size
   for all modules on load


*** 20010918_2 by bill
- first commit towards modularization
  note: this tcm does *not* work, and yes I know it compiles

TODO:
  I need to finish updating the files in modules/ to work as (un)loadable
  modules, and to work independently of one another.

Please do not send this copy out.


*** 20010918_1 by bill
Directory /cvsroot/tcm-hybrid/modules added to the repository


*** 20010906_1 by bill
- fixed lag caused by many simultaneous SOCKS connection attempts


*** 20010902_1 by bill
- fixed threshold.. we have to -= 2 for some reason in all the report_?multi()s


*** 20010901_2 by bill
- cosmetic fix, removed extra space in LOCOPS logging


*** 20010901_1 by bill
- fixed lag caused by wingate/socks detection


*** 20010829_3 by bill
- fixed socks detection (since when does fstat() return 0 on failure?)
- fixed .quit bug


*** 20010829_2 by bill
 oopsie forget those were there ::smirk::


*** 20010829_1 by bill
- fixed an overshot buffer in the new i/o code
- fixed a threshhold miscalc (you had to -1 to get the correct output)


*** 20010826_2 by bill
- still from W. Campbell's patch
  forgot to remove extra space in kill message


*** 20010826_1 by bill
- added a modified patch by W. Campbell:
   fixes a few typos
   adds idle time to DCC .whom output
   replaces class_name in usage output to <class name> (it looks prettier, dunchya know?)


*** 20010815_2 by bill
- do not need to report offenders twice per offense.


*** 20010815_1 by bill
- more robust makefile to avoid problems if the binary is moved around


*** 20010813_1 by leeh
- updated make distclean to remove binaries


*** 20010729_1 by bill

- fixed SOCKS detection
- a problem on my hard-disk required me to touch * in the tcm-hybrid dir
   (not all of these files were actually changed)
- fixed #ifdefs for statically declared wingate_class type functions
   (they only checked for DETECT_WINGATE, and not DETECT_SOCKS)



*** 20010728_1 by bill

- first step towards fixing proxy checking
   (currently, wingate detect works, proxy detection does not)

- once and for all, replaced stupid byte-per-recv() socket reading with
  an actual buffer


*** 20010723_1 by wcampbel
Replace all sprintf's with more secure snprintf's


*** 20010722_15 by wcampbel
This is all I can do to fix SOCKS detection.  It now gets into socks_bindsocket
but fails inside.


*** 20010722_14 by wcampbel
Fixed the tcm.check crontab script


*** 20010722_13 by wcampbel
Add .quote/.raw commands.  They are disabled by default, and not
saupported by the developers.


*** 20010722_12 by wcampbel
Fixed a couple bugs spotted by Stephen Olsen (Inglish) with .action


*** 20010722_11 by wcampbel
Remove the old strdup code (1990!!!)
Store the pid file in etc/


*** 20010722_10 by wcampbel
Add a .cvsignore to bin/
Change the documentation to reference bin/


*** 20010722_9 by wcampbel
The binaries go into bin/, not ./, this also fixes a dependency issue


*** 20010722_8 by wcampbel
Directory /usr/cvsroot/tcm-hybrid/bin added to the repository


*** 20010722_7 by wcampbel
Made tcm work with getopt for command line arguments.
This WILL break any installations that use ./tcm conf.file
They will have to use ./tcm -f conf.file or just use the standard tcm.cf
name.


*** 20010722_6 by wcampbel
Keep all logs in the logs/ directory.


*** 20010722_5 by wcampbel
Move the pref files and the cf's (and the motd) to the etc directory
and document as such in INSTALL


*** 20010722_4 by wcampbel
Fix make lint in the tools/ Makefile


*** 20010722_3 by wcampbel
Updated dependencies


*** 20010722_2 by wcampbel
Updated .cvsignore's


*** 20010722_1 by wcampbel
Split out the version info into patchlevel.h


*** 20010721_4 by wcampbel
Made tcm work with the repo-move to src/
I believe it's good to go now


*** 20010721_3 by wcampbel
This is the code to support the help files in a subdirectory.
The repo-move will be done as soon as I finish this commit


*** 20010721_2 by wcampbel
I did a repo-move for the *.h files into include/
This is what else needed to be done to make it work...
Next is the icky src files...


*** 20010721_1 by wcampbel
Add a few more bugs to the BUGS list
Add a check for crypt.h, needed for some (lame) Linux distributions


*** 20010703_1 by wcampbel
Add in the .cvsignore files


*** 20010702_2 by wcampbel
Cleaned up some things lint found
Added make lint
Changed rand/srand to random/srandom


*** 20010702_1 by wcampbel
Fixed my last typo in ChangeLog


*** 20010619_1 by wcampbel
Migrated to the same mkpasswd we use in hyb7 and hyb6


*** 20010618_1 by kreator
- Solaris uses mblk_t from sys/stream.h for sys/socketvar.h; i've added
  necessary tests and includes in source to fix compile


*** 20010617_1 by jdc
- bothunt.c, logging.c: Linux needs time.h (patch by Hwy).


*** 20010614_1 by db
- just upped version



*** 20010603_3 by db
patch sent in by W. Campbell
1.  Document that USE_CRYPT is enabled by default
2.  Fix an issue where people could telnet to the tcm and not type
    anything.  Those people would see everything that an oper would.
    I changed it so that sensitive data is only sent to remote TCM's
    if they were NOT pending connections (meaning fully registered)

Simple change of -1 to INVALID for consistency -db



*** 20010603_2 by greg
Two simple bugfixes.

- (from W. Campbell) oper before doing a /stats O; some servers may
  make use of OLINES_OPER_ONLY, or similar.
- (pointed out by KrON/ogre) fixed a nifty core where islegal_pass() fell
  off the edge of the userlist array.

(hum, maybe we should do something when spoofed opers msg the bot .chat?
I can see this being a) an information leak if tcm is not opers_only, and
b) a problem when a person uses .chat, but their oline is for their spoof)


*** 20010603_1 by db
Submitted by W. Campbell <wcampbel@botbay.net>

My "commit" message:

1.  Makes numerous commands that can give away information oper only
2.  The oper only conf line is in tcm.cf, not userlist.cf
3.  FLAGS on comstud servers was missing a +
4.  Documentation cleanup
5.  fixed a couple compiler errors when wingate checking is enabled
6.  Fixed another small issue with the opers only option
7.  Added a small piece of debug code to the tcm.cf conf parser
8.  Fixed a MAJOR security hole in .action

The 1st and 8th are big, and in my opinion should warrant a new
release, with whatever bug fixes greg decides to throw in.



*** 20010602_2 by greg
.. this one got missed.

- FLAGS +SOME +UNGODLY +NUMBER +OF +INDIVIDUAL +FLAGS -> FLAGS +ALL
  (ircd-comstud compat.)


*** 20010602_1 by greg
Well kids, my first CVS commit. Be afraid or something.

Some cleanup before I do some in-depth stuff.
- removed the capability to msg a tcm .clones, it's kind of
  silly considering we dump it to the channel and stuff.
- removed a few extraneous msg_mychannel()'s that were randomly
  dumping "  [etc.]" to the TCM's channel, and personally scaring
  the hell out of me when I randomly see my TCM speak.

Build check done.


*** 20010403_2 by db
- corrected drone code to honour autopilot as well
- corrected examples.



*** 20010403_1 by db
- removed extra print to opers about cfloods
- fixed spam warning to suggest .kspam



*** 20010402_2 by db
- action must specifically say "warn" or no warning is given at all



*** 20010402_1 by db
- cleaned up the logging, no more 0 length log files
- renamed clone_log to just log, its a generic log
- re-added back autopilot
- added new tcm.cf flag "D" for deny i.e. opers only
- oper deny /dcc will not show ip any more of tcm
- bumped version up
- tested on irc.ins.net.uk



*** 20010221_1 by wcampbel
Misc. documentation updates
Release version 2.5.2, as a number of things have been done since 2.5.1
release


*** 20010203_2 by wcampbel
Format string bugs...
We must find out what that 0 byte log file bug is...even if it means
ripping out the mail code...


*** 20010203_1 by wcampbel
Massive cleanup part 4 of 4.  tcm compiles cleanly (except for the version
variables) with -Wall -Wunused...... and SHOULD be pretty clean now.  I'll
run it through lint soon, then will start going through and cleaning up the
rest of the code.  We'll see how it goes...

Oh, I forgot to mention I added usermode +l to the MODE command it sends to
the server when it connects.  This allows tcm to see LOCOPS messages when
it is run against a Hybrid 7 server.


*** 20010202_1 by wcampbel
Massive cleanup part 3


*** 20010201_6 by wcampbel
Gotta stop coding when I'm tired....DEBUGMODE, not DEBUG...


*** 20010201_5 by wcampbel
Compiler warning cleanup part 3


*** 20010201_4 by wcampbel
Massive Cleanup, part 2


*** 20010201_3 by wcampbel
Don't remove the .pref's and logs on a make clean...
use make cleandata for that...


*** 20010201_2 by wcampbel
bah... damn typo


*** 20010201_1 by wcampbel
Massive compiler warning cleanup, part 1


*** 20010131_2 by wcampbel
Brought the configure script up to date


*** 20010131_1 by wcampbel
Major docs cleanup
Minor bug fixes with the tokenizing code, and the commands parser


*** 20010123_1 by wcampbel
pwd.h isn't needed for a password encrypter


*** 20010114_1 by wcampbel
Documented the weird bug that spookey and I have been trying to debug


*** 20010113_1 by wcampbel
1. Added a missing \n to the DCC CHAT msg()
2. Fixed the if's in local_ip() so that it will actually return a valid
   IP for the DCC CHAT message


*** 20001209_1 by bill

- fixed suggested_host in suggest_kill_kline()


*** 20001208_2 by bill

- medium sized overhaul
- fixed link looker detection buffer overrun
- fixed local kill client exiting buffer overrun
- added CFLOOD action
  (for connect flooding drones which have been a problem lately)
- finalizing ircd-comstud compatibility modifications


*** 20001204_1 by bill

- added F lines (violation specific E lines)
- fixed parsing error with SQUIT/server disconnect msgs
- changed .locops source to (nick) rather than (nick@tcm)


*** 20001201_3 by bill

- more comstud stuff


*** 20001201_2 by bill

- working on comstud compatibility still


*** 20001201_1 by bill

- added more compatibility for ircd-comstud (hello ik!)


*** 20001110_2 by bill

Permission error, fixed.
Added a note to comstud users for making tcm work properly into tcm.cf


*** 20001110_1 by bill

Added support for ircd-comstud-1.11REL
 -Compatibility for different syntaxed messages (trace, client connects, etc)
 -Compatibility for non-numerical connection class identifications (and numerical still)
 -Updated wingate class code accordingly

Bumped version to 2.5.1


*** 20000930_1 by bill

changed comment for DETECT_DNS_SPOOFERS
turned DETECT_DNS_SPOOFERS off by default


*** 20000902_9 by db
- discovered I had a previously released 2.4.7, bumped to 2.5.0 again
  to reduce confusion.



*** 20000902_8 by db
- doc cleanups only, but I bumped the version # to reduce confusion.



*** 20000902_7 by db
Directory /cvsroot/tcm-hybrid/HISTORY added to the repository


*** 20000902_6 by lusky
cleaned up Makefiles and converted to autoconf


*** 20000902_5 by lusky
fixed SERIALNUM
started autoconf work
added .depend


*** 20000902_4 by lusky
Directory /cvsroot/tcm-hybrid/autoconf added to the repository


*** 20000902_3 by lusky
added SERIALNUM support


*** 20000902_2 by lusky
Directory /cvsroot/tcm-hybrid/include added to the repository


