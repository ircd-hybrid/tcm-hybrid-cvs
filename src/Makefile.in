# $Id: Makefile.in,v 1.18 2002/05/22 22:03:34 leeh Exp $

CC = @CC@
RM = @RM@
MKDEP = ${CC} -MM

TCMLIBS = @LIBS@
INCLUDES = -I../include
CPPFLAGS = ${INCLUDES} @CPPFLAGS@

# Any other defines you need, add below.
DEFINES = -DDPATH=\"@prefix@\"

# -O for optimization.  Can't debug.  Use -g for debuggable code.
CFLAGS = @CFLAGS@ -Wall
LDFLAGS = @LDFLAGS@

# Debuggers CFLAGS
# CFLAGS = -g -O -Wunused -Wall -ggdb -Wshadow -Wmissing-declarations

###### CHANGES BELOW HERE ONLY IF YOU KNOW WHAT YOU'RE DOING ######

SOURCES =       bothunt.c       \
                event.c         \
                logging.c       \
                main.c          \
                match.c         \
                modules.c       \
                parse.c         \
                stdcmds.c       \
                tcm_io.c        \
                token.c         \
                userlist.c      \
                wild.c

OBJECTS = ${SOURCES:.c=.o}

all: build

clean: 
	${RM} -f *.o tcm core tcm.core *~

distclean: clean
	${RM} -f Makefile

.c.o:
	${CC} ${CPPFLAGS} ${CFLAGS} ${DEFINES} -c $<

build: ${OBJECTS}
	${CC} ${CFLAGS} ${LDFLAGS} -o ../bin/tcm ${OBJECTS} ${TCMLIBS}

lint:
	lint -aacgprxhH $(CPPFLAGS) $(DEFINES) $(SOURCES) >../lint.out

depend:
	${MKDEP} ${INCLUDES} ${SOURCES} > .depend

include .depend

